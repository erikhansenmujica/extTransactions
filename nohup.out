
> nest-typescript-starter@1.0.0 start:prod /home/wadiahex/nBanking-ExternalTransactions
> node dist/main

[32m[Nest] 1738525  - [39m12/08/2021, 10:00:24 AM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 1738525  - [39m12/08/2021, 10:00:24 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMailerModule dependencies initialized[39m[38;5;3m +95ms[39m
[32m[Nest] 1738525  - [39m12/08/2021, 10:00:24 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 1738525  - [39m12/08/2021, 10:00:24 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1738525  - [39m12/08/2021, 10:00:24 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1738525  - [39m12/08/2021, 10:00:24 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mCacheModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1738525  - [39m12/08/2021, 10:00:24 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHttpModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1738525  - [39m12/08/2021, 10:00:24 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigHostModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1738525  - [39m12/08/2021, 10:00:24 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1738525  - [39m12/08/2021, 10:00:24 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1738525  - [39m12/08/2021, 10:00:24 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHelperModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1738525  - [39m12/08/2021, 10:00:24 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMailerCoreModule dependencies initialized[39m[38;5;3m +561ms[39m
Executing (default): SELECT 1+1 AS result
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntities" ("code" VARCHAR(255) , "masterAccountCode" VARCHAR(255), "userName" VARCHAR(255), "source" INTEGER, "extraData" JSON, "lastTransactionDate" TIMESTAMP WITH TIME ZONE, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("code"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntities' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntities' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" TYPE INTEGER;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntities' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntityMovements" ("id"  SERIAL , "externalEntityCode" VARCHAR(255) REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE, "transactionNumber" VARCHAR(255), "transactionDateTime" TIMESTAMP WITH TIME ZONE, "accountReferenceNumber" VARCHAR(255), "originalCurrency" VARCHAR(255), "originalCurrencyAmount" VARCHAR(255), "TargetCurrency" VARCHAR(255), "TargetCurrencyAmount" VARCHAR(255), "OriginalToTargetExchangeRate" VARCHAR(255), "Description" VARCHAR(255), "Status" VARCHAR(255), "ConfirmedDateTime" TIMESTAMP WITH TIME ZONE, "ProcessedDateTime" TIMESTAMP WITH TIME ZONE, "ErrorMessage" VARCHAR(255), "FullData" JSON, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("id"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntityMovements' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntityMovements' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntityMovements" DROP CONSTRAINT "ExternalEntityMovements_externalEntityCode_fkey"
Executing (default): ALTER TABLE "ExternalEntityMovements"  ADD FOREIGN KEY ("externalEntityCode") REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrencyAmount" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "OriginalToTargetExchangeRate" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "OriginalToTargetExchangeRate" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "OriginalToTargetExchangeRate" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Description" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Description" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Description" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Status" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Status" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Status" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ConfirmedDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ConfirmedDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ConfirmedDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ProcessedDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ProcessedDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ProcessedDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ErrorMessage" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ErrorMessage" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ErrorMessage" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "FullData" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "FullData" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "FullData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntityMovements' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
[32m[Nest] 1738525  - [39m12/08/2021, 10:00:25 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeCoreModule dependencies initialized[39m[38;5;3m +140ms[39m
[32m[Nest] 1738525  - [39m12/08/2021, 10:00:25 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +2ms[39m
Executing (default): SELECT 1+1 AS result
Executing (default): SELECT 1+1 AS result
[32m[Nest] 1738525  - [39m12/08/2021, 10:00:26 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeCoreModule dependencies initialized[39m[38;5;3m +1138ms[39m
[32m[Nest] 1738525  - [39m12/08/2021, 10:00:26 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTransactionsModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 1738525  - [39m12/08/2021, 10:00:26 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 1738525  - [39m12/08/2021, 10:00:26 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/}:[39m[38;5;3m +14ms[39m
[32m[Nest] 1738525  - [39m12/08/2021, 10:00:26 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/process-transactions/jeeves, GET} route[39m[38;5;3m +7ms[39m
[32m[Nest] 1738525  - [39m12/08/2021, 10:00:26 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1738525  - [39m12/08/2021, 10:00:26 AM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +8ms[39m
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 866.5 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T15:00:03.594Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 866.5 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T15:00:03.594Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2659.17 2000 866.5
Se ha pasado el limite de Jeeves de USD 2000. Limite actual 2659.17
2659.17 1500 866.5
Se ha pasado el limite de Jeeves de USD 1500. Limite actual 2659.17
2659.17 1000 866.5
Se ha pasado el limite de Jeeves de USD 1000. Limite actual 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 12:59:01.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.67295,"AFN":96.25256,"ALL":107.7,"AMD":493.797441,"ANG":1.803347,"AOA":564,"ARS":101.3885,"AUD":1.398934,"AWG":1.8005,"AZN":1.700805,"BAM":1.735538,"BBD":2,"BDT":85.847145,"BGN":1.73189,"BHD":0.37698,"BIF":1998,"BMD":1,"BND":1.364775,"BOB":6.909207,"BRL":5.5501,"BSD":1,"BTC":0.000019685481,"BTN":75.492834,"BWP":11.714245,"BYN":2.543903,"BZD":2.01693,"CAD":1.261522,"CDF":2002,"CHF":0.923809,"CLF":0.030428,"CLP":839.6,"CNH":6.342135,"CNY":6.3477,"COP":3901.79834,"CRC":634.600505,"CUC":1,"CUP":25.75,"CVE":98.375,"CZK":22.541,"DJF":178.134105,"DKK":6.57845,"DOP":56.79,"DZD":138.868378,"EGP":15.7347,"ERN":15.000155,"ETB":48.25,"EUR":0.884644,"FJD":2.1336,"FKP":0.757464,"GBP":0.757464,"GEL":3.105,"GGP":0.757464,"GHS":6.15,"GIP":0.757464,"GMD":52.5,"GNF":9355,"GTQ":7.734702,"GYD":209.457225,"HKD":7.796038,"HNL":24.150001,"HRK":6.6564,"HTG":99.95031,"HUF":324.525,"IDR":14344.95,"ILS":3.10625,"IMP":0.757464,"INR":75.420046,"IQD":1460.5,"IRR":42250,"ISK":130.42,"JEP":0.757464,"JMD":154.984235,"JOD":0.709,"JPY":113.8695,"KES":112.9,"KGS":84.790875,"KHR":4070,"KMF":437.649745,"KPW":900,"KRW":1175.240443,"KWD":0.30286,"KYD":0.833918,"KZT":437.116176,"LAK":10935,"LBP":1532,"LKR":203.018068,"LRD":141.850016,"LSL":15.9,"LYD":4.595,"MAD":9.238551,"MDL":17.596432,"MGA":3975,"MKD":54.687187,"MMK":1781.048689,"MNT":2856.429306,"MOP":8.03599,"MRO":356.999828,"MRU":36.32,"MUR":43.329997,"MVR":15.4,"MWK":810.5,"MXN":20.92745,"MYR":4.2245,"MZN":63.824998,"NAD":15.9,"NGN":409.99,"NIO":35.225,"NOK":8.90764,"NPR":120.800464,"NZD":1.471679,"OMR":0.385018,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.243001,"PKR":176.8,"PLN":4.056131,"PYG":6804.103506,"QAR":3.641,"RON":4.3782,"RSD":103.976818,"RUB":73.6995,"RWF":1002.5,"SAR":3.75141,"SBD":8.074316,"SCR":13.029325,"SDG":437.5,"SEK":9.064161,"SGD":1.3636,"SHP":0.757464,"SLL":11128.84989,"SOS":584,"SRD":21.5245,"SSP":130.26,"STD":21200.790504,"STN":22.13,"SVC":8.755413,"SYP":2512.5,"SZL":15.9,"THB":33.476057,"TJS":11.296902,"TMT":3.51,"TND":2.8845,"TOP":2.289256,"TRY":13.7168,"TTD":6.80388,"TWD":27.737498,"TZS":2303,"UAH":27.278982,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":113.119805,"WST":2.591826,"XAF":580.288413,"XAG":0.04464788,"XAU":0.00056133,"XCD":2.70255,"XDR":0.712861,"XOF":580.288413,"XPD":0.00053952,"XPF":105.566108,"XPT":0.00104387,"YER":250.250057,"ZAR":15.72954,"ZMW":17.310552,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 866.5 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T15:00:51.060Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 866.5 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T15:00:51.060Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2659.17 2000 866.5
Se ha pasado el limite de Jeeves de USD 2000. Limite actual 2659.17
2659.17 1500 866.5
Se ha pasado el limite de Jeeves de USD 1500. Limite actual 2659.17
2659.17 1000 866.5
Se ha pasado el limite de Jeeves de USD 1000. Limite actual 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 12:59:01.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.67295,"AFN":96.25256,"ALL":107.7,"AMD":493.797441,"ANG":1.803347,"AOA":564,"ARS":101.3885,"AUD":1.398934,"AWG":1.8005,"AZN":1.700805,"BAM":1.735538,"BBD":2,"BDT":85.847145,"BGN":1.73189,"BHD":0.37698,"BIF":1998,"BMD":1,"BND":1.364775,"BOB":6.909207,"BRL":5.5501,"BSD":1,"BTC":0.000019685481,"BTN":75.492834,"BWP":11.714245,"BYN":2.543903,"BZD":2.01693,"CAD":1.261522,"CDF":2002,"CHF":0.923809,"CLF":0.030428,"CLP":839.6,"CNH":6.342135,"CNY":6.3477,"COP":3901.79834,"CRC":634.600505,"CUC":1,"CUP":25.75,"CVE":98.375,"CZK":22.541,"DJF":178.134105,"DKK":6.57845,"DOP":56.79,"DZD":138.868378,"EGP":15.7347,"ERN":15.000155,"ETB":48.25,"EUR":0.884644,"FJD":2.1336,"FKP":0.757464,"GBP":0.757464,"GEL":3.105,"GGP":0.757464,"GHS":6.15,"GIP":0.757464,"GMD":52.5,"GNF":9355,"GTQ":7.734702,"GYD":209.457225,"HKD":7.796038,"HNL":24.150001,"HRK":6.6564,"HTG":99.95031,"HUF":324.525,"IDR":14344.95,"ILS":3.10625,"IMP":0.757464,"INR":75.420046,"IQD":1460.5,"IRR":42250,"ISK":130.42,"JEP":0.757464,"JMD":154.984235,"JOD":0.709,"JPY":113.8695,"KES":112.9,"KGS":84.790875,"KHR":4070,"KMF":437.649745,"KPW":900,"KRW":1175.240443,"KWD":0.30286,"KYD":0.833918,"KZT":437.116176,"LAK":10935,"LBP":1532,"LKR":203.018068,"LRD":141.850016,"LSL":15.9,"LYD":4.595,"MAD":9.238551,"MDL":17.596432,"MGA":3975,"MKD":54.687187,"MMK":1781.048689,"MNT":2856.429306,"MOP":8.03599,"MRO":356.999828,"MRU":36.32,"MUR":43.329997,"MVR":15.4,"MWK":810.5,"MXN":20.92745,"MYR":4.2245,"MZN":63.824998,"NAD":15.9,"NGN":409.99,"NIO":35.225,"NOK":8.90764,"NPR":120.800464,"NZD":1.471679,"OMR":0.385018,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.243001,"PKR":176.8,"PLN":4.056131,"PYG":6804.103506,"QAR":3.641,"RON":4.3782,"RSD":103.976818,"RUB":73.6995,"RWF":1002.5,"SAR":3.75141,"SBD":8.074316,"SCR":13.029325,"SDG":437.5,"SEK":9.064161,"SGD":1.3636,"SHP":0.757464,"SLL":11128.84989,"SOS":584,"SRD":21.5245,"SSP":130.26,"STD":21200.790504,"STN":22.13,"SVC":8.755413,"SYP":2512.5,"SZL":15.9,"THB":33.476057,"TJS":11.296902,"TMT":3.51,"TND":2.8845,"TOP":2.289256,"TRY":13.7168,"TTD":6.80388,"TWD":27.737498,"TZS":2303,"UAH":27.278982,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":113.119805,"WST":2.591826,"XAF":580.288413,"XAG":0.04464788,"XAU":0.00056133,"XCD":2.70255,"XDR":0.712861,"XOF":580.288413,"XPD":0.00053952,"XPF":105.566108,"XPT":0.00104387,"YER":250.250057,"ZAR":15.72954,"ZMW":17.310552,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }

> nest-typescript-starter@1.0.0 start:prod /home/wadiahex/nBanking-ExternalTransactions
> node dist/main

[32m[Nest] 1842916  - [39m12/08/2021, 10:43:14 AM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 1842916  - [39m12/08/2021, 10:43:14 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMailerModule dependencies initialized[39m[38;5;3m +87ms[39m
[32m[Nest] 1842916  - [39m12/08/2021, 10:43:14 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1842916  - [39m12/08/2021, 10:43:14 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1842916  - [39m12/08/2021, 10:43:14 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1842916  - [39m12/08/2021, 10:43:14 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mCacheModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1842916  - [39m12/08/2021, 10:43:14 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHttpModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1842916  - [39m12/08/2021, 10:43:14 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigHostModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1842916  - [39m12/08/2021, 10:43:14 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1842916  - [39m12/08/2021, 10:43:14 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1842916  - [39m12/08/2021, 10:43:14 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHelperModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1842916  - [39m12/08/2021, 10:43:15 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMailerCoreModule dependencies initialized[39m[38;5;3m +487ms[39m
Executing (default): SELECT 1+1 AS result
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntities" ("code" VARCHAR(255) , "masterAccountCode" VARCHAR(255), "userName" VARCHAR(255), "source" INTEGER, "extraData" JSON, "lastTransactionDate" TIMESTAMP WITH TIME ZONE, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("code"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntities' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntities' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" TYPE INTEGER;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntities' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntityMovements" ("id"  SERIAL , "externalEntityCode" VARCHAR(255) REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE, "transactionNumber" VARCHAR(255), "transactionDateTime" TIMESTAMP WITH TIME ZONE, "accountReferenceNumber" VARCHAR(255), "originalCurrency" VARCHAR(255), "originalCurrencyAmount" VARCHAR(255), "TargetCurrency" VARCHAR(255), "TargetCurrencyAmount" VARCHAR(255), "OriginalToTargetExchangeRate" VARCHAR(255), "Description" VARCHAR(255), "Status" VARCHAR(255), "ConfirmedDateTime" TIMESTAMP WITH TIME ZONE, "ProcessedDateTime" TIMESTAMP WITH TIME ZONE, "ErrorMessage" VARCHAR(255), "FullData" JSON, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("id"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntityMovements' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntityMovements' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntityMovements" DROP CONSTRAINT "ExternalEntityMovements_externalEntityCode_fkey"
Executing (default): ALTER TABLE "ExternalEntityMovements"  ADD FOREIGN KEY ("externalEntityCode") REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrencyAmount" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "OriginalToTargetExchangeRate" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "OriginalToTargetExchangeRate" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "OriginalToTargetExchangeRate" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Description" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Description" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Description" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Status" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Status" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Status" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ConfirmedDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ConfirmedDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ConfirmedDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ProcessedDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ProcessedDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ProcessedDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ErrorMessage" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ErrorMessage" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ErrorMessage" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "FullData" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "FullData" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "FullData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntityMovements' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
[32m[Nest] 1842916  - [39m12/08/2021, 10:43:15 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeCoreModule dependencies initialized[39m[38;5;3m +113ms[39m
[32m[Nest] 1842916  - [39m12/08/2021, 10:43:15 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +1ms[39m
Executing (default): SELECT 1+1 AS result
Executing (default): SELECT 1+1 AS result
[32m[Nest] 1842916  - [39m12/08/2021, 10:43:16 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeCoreModule dependencies initialized[39m[38;5;3m +1421ms[39m
[32m[Nest] 1842916  - [39m12/08/2021, 10:43:16 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTransactionsModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1842916  - [39m12/08/2021, 10:43:16 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1842916  - [39m12/08/2021, 10:43:16 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/}:[39m[38;5;3m +9ms[39m
[32m[Nest] 1842916  - [39m12/08/2021, 10:43:16 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/process-transactions/jeeves, GET} route[39m[38;5;3m +5ms[39m
[32m[Nest] 1842916  - [39m12/08/2021, 10:43:16 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/, GET} route[39m[38;5;3m +2ms[39m
[32m[Nest] 1842916  - [39m12/08/2021, 10:43:16 AM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +5ms[39m
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 866.5 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T15:30:03.353Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 866.5 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T15:30:03.353Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2659.17 2000 866.5
2659.17 1500 866.5
2659.17 1000 866.5
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 12:59:01.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.67295,"AFN":96.25256,"ALL":107.7,"AMD":493.797441,"ANG":1.803347,"AOA":564,"ARS":101.3885,"AUD":1.398934,"AWG":1.8005,"AZN":1.700805,"BAM":1.735538,"BBD":2,"BDT":85.847145,"BGN":1.73189,"BHD":0.37698,"BIF":1998,"BMD":1,"BND":1.364775,"BOB":6.909207,"BRL":5.5501,"BSD":1,"BTC":0.000019685481,"BTN":75.492834,"BWP":11.714245,"BYN":2.543903,"BZD":2.01693,"CAD":1.261522,"CDF":2002,"CHF":0.923809,"CLF":0.030428,"CLP":839.6,"CNH":6.342135,"CNY":6.3477,"COP":3901.79834,"CRC":634.600505,"CUC":1,"CUP":25.75,"CVE":98.375,"CZK":22.541,"DJF":178.134105,"DKK":6.57845,"DOP":56.79,"DZD":138.868378,"EGP":15.7347,"ERN":15.000155,"ETB":48.25,"EUR":0.884644,"FJD":2.1336,"FKP":0.757464,"GBP":0.757464,"GEL":3.105,"GGP":0.757464,"GHS":6.15,"GIP":0.757464,"GMD":52.5,"GNF":9355,"GTQ":7.734702,"GYD":209.457225,"HKD":7.796038,"HNL":24.150001,"HRK":6.6564,"HTG":99.95031,"HUF":324.525,"IDR":14344.95,"ILS":3.10625,"IMP":0.757464,"INR":75.420046,"IQD":1460.5,"IRR":42250,"ISK":130.42,"JEP":0.757464,"JMD":154.984235,"JOD":0.709,"JPY":113.8695,"KES":112.9,"KGS":84.790875,"KHR":4070,"KMF":437.649745,"KPW":900,"KRW":1175.240443,"KWD":0.30286,"KYD":0.833918,"KZT":437.116176,"LAK":10935,"LBP":1532,"LKR":203.018068,"LRD":141.850016,"LSL":15.9,"LYD":4.595,"MAD":9.238551,"MDL":17.596432,"MGA":3975,"MKD":54.687187,"MMK":1781.048689,"MNT":2856.429306,"MOP":8.03599,"MRO":356.999828,"MRU":36.32,"MUR":43.329997,"MVR":15.4,"MWK":810.5,"MXN":20.92745,"MYR":4.2245,"MZN":63.824998,"NAD":15.9,"NGN":409.99,"NIO":35.225,"NOK":8.90764,"NPR":120.800464,"NZD":1.471679,"OMR":0.385018,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.243001,"PKR":176.8,"PLN":4.056131,"PYG":6804.103506,"QAR":3.641,"RON":4.3782,"RSD":103.976818,"RUB":73.6995,"RWF":1002.5,"SAR":3.75141,"SBD":8.074316,"SCR":13.029325,"SDG":437.5,"SEK":9.064161,"SGD":1.3636,"SHP":0.757464,"SLL":11128.84989,"SOS":584,"SRD":21.5245,"SSP":130.26,"STD":21200.790504,"STN":22.13,"SVC":8.755413,"SYP":2512.5,"SZL":15.9,"THB":33.476057,"TJS":11.296902,"TMT":3.51,"TND":2.8845,"TOP":2.289256,"TRY":13.7168,"TTD":6.80388,"TWD":27.737498,"TZS":2303,"UAH":27.278982,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":113.119805,"WST":2.591826,"XAF":580.288413,"XAG":0.04464788,"XAU":0.00056133,"XCD":2.70255,"XDR":0.712861,"XOF":580.288413,"XPD":0.00053952,"XPF":105.566108,"XPT":0.00104387,"YER":250.250057,"ZAR":15.72954,"ZMW":17.310552,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 866.5 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T15:43:32.373Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 866.5 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T15:43:32.373Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2659.17 2000 866.5
2659.17 1500 866.5
2659.17 1000 866.5
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 12:59:01.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.67295,"AFN":96.25256,"ALL":107.7,"AMD":493.797441,"ANG":1.803347,"AOA":564,"ARS":101.390797,"AUD":1.396693,"AWG":1.8,"AZN":1.700805,"BAM":1.735538,"BBD":2,"BDT":85.847145,"BGN":1.72978,"BHD":0.377055,"BIF":1998,"BMD":1,"BND":1.364775,"BOB":6.909207,"BRL":5.551277,"BSD":1,"BTC":0.000019752234,"BTN":75.492834,"BWP":11.714245,"BYN":2.543903,"BZD":2.01693,"CAD":1.266059,"CDF":2004,"CHF":0.922472,"CLF":0.030439,"CLP":839.9,"CNH":6.33599,"CNY":6.3443,"COP":3892.306969,"CRC":634.600505,"CUC":1,"CUP":25.75,"CVE":98.025,"CZK":22.484267,"DJF":178,"DKK":6.561693,"DOP":56.75,"DZD":139.045372,"EGP":15.7197,"ERN":15.000155,"ETB":48.25,"EUR":0.882418,"FJD":2.1336,"FKP":0.756682,"GBP":0.756682,"GEL":3.105,"GGP":0.756682,"GHS":6.16,"GIP":0.756682,"GMD":52.525,"GNF":9352.5,"GTQ":7.734702,"GYD":209.457225,"HKD":7.797558,"HNL":24.150001,"HRK":6.6412,"HTG":99.95031,"HUF":323.195921,"IDR":14345.861616,"ILS":3.098979,"IMP":0.756682,"INR":75.407209,"IQD":1459.5,"IRR":42275,"ISK":130.07,"JEP":0.756682,"JMD":154.984235,"JOD":0.709,"JPY":113.88358697,"KES":112.9,"KGS":84.797051,"KHR":4070,"KMF":437.649745,"KPW":900,"KRW":1173.069353,"KWD":0.302775,"KYD":0.833918,"KZT":437.116176,"LAK":10935,"LBP":1532,"LKR":203.018068,"LRD":141.850016,"LSL":15.81,"LYD":4.595,"MAD":9.238551,"MDL":17.596432,"MGA":3975,"MKD":54.687187,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.32,"MUR":43.649999,"MVR":15.45,"MWK":810.5,"MXN":20.932847,"MYR":4.2245,"MZN":63.824998,"NAD":15.81,"NGN":409.99,"NIO":35.225,"NOK":8.89678,"NPR":120.800464,"NZD":1.469264,"OMR":0.385013,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.233505,"PKR":176.8,"PLN":4.069197,"PYG":6804.103506,"QAR":3.641,"RON":4.367,"RSD":103.779629,"RUB":73.68155,"RWF":1002.5,"SAR":3.751132,"SBD":8.074316,"SCR":12.954955,"SDG":437.5,"SEK":9.053695,"SGD":1.362345,"SHP":0.756682,"SLL":11129.99989,"SOS":586,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.755413,"SYP":2512.5,"SZL":15.81,"THB":33.4205,"TJS":11.296902,"TMT":3.5,"TND":2.8855,"TOP":2.289256,"TRY":13.709598,"TTD":6.80388,"TWD":27.724356,"TZS":2303,"UAH":27.278982,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10787,"VES":4.6228,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":578.828568,"XAG":0.0446409,"XAU":0.00056098,"XCD":2.70255,"XDR":0.712861,"XOF":578.828568,"XPD":0.00053691,"XPF":105.300533,"XPT":0.00104276,"YER":250.249937,"ZAR":15.70481,"ZMW":17.310552,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 866.5 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T16:00:03.289Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 866.5 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T16:00:03.289Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2659.17 2000 866.5
2659.17 1500 866.5
2659.17 1000 866.5
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 12:59:01.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.67295,"AFN":96.25256,"ALL":107.7,"AMD":493.797441,"ANG":1.803347,"AOA":564,"ARS":101.390797,"AUD":1.396693,"AWG":1.8,"AZN":1.700805,"BAM":1.735538,"BBD":2,"BDT":85.847145,"BGN":1.72978,"BHD":0.377055,"BIF":1998,"BMD":1,"BND":1.364775,"BOB":6.909207,"BRL":5.551277,"BSD":1,"BTC":0.000019752234,"BTN":75.492834,"BWP":11.714245,"BYN":2.543903,"BZD":2.01693,"CAD":1.266059,"CDF":2004,"CHF":0.922472,"CLF":0.030439,"CLP":839.9,"CNH":6.33599,"CNY":6.3443,"COP":3892.306969,"CRC":634.600505,"CUC":1,"CUP":25.75,"CVE":98.025,"CZK":22.484267,"DJF":178,"DKK":6.561693,"DOP":56.75,"DZD":139.045372,"EGP":15.7197,"ERN":15.000155,"ETB":48.25,"EUR":0.882418,"FJD":2.1336,"FKP":0.756682,"GBP":0.756682,"GEL":3.105,"GGP":0.756682,"GHS":6.16,"GIP":0.756682,"GMD":52.525,"GNF":9352.5,"GTQ":7.734702,"GYD":209.457225,"HKD":7.797558,"HNL":24.150001,"HRK":6.6412,"HTG":99.95031,"HUF":323.195921,"IDR":14345.861616,"ILS":3.098979,"IMP":0.756682,"INR":75.407209,"IQD":1459.5,"IRR":42275,"ISK":130.07,"JEP":0.756682,"JMD":154.984235,"JOD":0.709,"JPY":113.88358697,"KES":112.9,"KGS":84.797051,"KHR":4070,"KMF":437.649745,"KPW":900,"KRW":1173.069353,"KWD":0.302775,"KYD":0.833918,"KZT":437.116176,"LAK":10935,"LBP":1532,"LKR":203.018068,"LRD":141.850016,"LSL":15.81,"LYD":4.595,"MAD":9.238551,"MDL":17.596432,"MGA":3975,"MKD":54.687187,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.32,"MUR":43.649999,"MVR":15.45,"MWK":810.5,"MXN":20.932847,"MYR":4.2245,"MZN":63.824998,"NAD":15.81,"NGN":409.99,"NIO":35.225,"NOK":8.89678,"NPR":120.800464,"NZD":1.469264,"OMR":0.385013,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.233505,"PKR":176.8,"PLN":4.069197,"PYG":6804.103506,"QAR":3.641,"RON":4.367,"RSD":103.779629,"RUB":73.68155,"RWF":1002.5,"SAR":3.751132,"SBD":8.074316,"SCR":12.954955,"SDG":437.5,"SEK":9.053695,"SGD":1.362345,"SHP":0.756682,"SLL":11129.99989,"SOS":586,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.755413,"SYP":2512.5,"SZL":15.81,"THB":33.4205,"TJS":11.296902,"TMT":3.5,"TND":2.8855,"TOP":2.289256,"TRY":13.709598,"TTD":6.80388,"TWD":27.724356,"TZS":2303,"UAH":27.278982,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10787,"VES":4.6228,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":578.828568,"XAG":0.0446409,"XAU":0.00056098,"XCD":2.70255,"XDR":0.712861,"XOF":578.828568,"XPD":0.00053691,"XPF":105.300533,"XPT":0.00104276,"YER":250.249937,"ZAR":15.70481,"ZMW":17.310552,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 866.5 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T16:30:02.927Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 866.5 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T16:30:02.927Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2659.17 2000 866.5
2659.17 1500 866.5
2659.17 1000 866.5
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 12:59:01.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.67295,"AFN":96.25256,"ALL":107.7,"AMD":493.797441,"ANG":1.803347,"AOA":564,"ARS":101.3869,"AUD":1.395444,"AWG":1.8,"AZN":1.700805,"BAM":1.735538,"BBD":2,"BDT":85.847145,"BGN":1.729855,"BHD":0.377039,"BIF":1998,"BMD":1,"BND":1.364775,"BOB":6.909207,"BRL":5.5405,"BSD":1,"BTC":0.000019811735,"BTN":75.492834,"BWP":11.714245,"BYN":2.543903,"BZD":2.01693,"CAD":1.265374,"CDF":2002,"CHF":0.921846,"CLF":0.030433,"CLP":839.75,"CNH":6.334479,"CNY":6.3443,"COP":3894.126059,"CRC":634.600505,"CUC":1,"CUP":25.75,"CVE":98.025,"CZK":22.485104,"DJF":178,"DKK":6.563969,"DOP":56.75,"DZD":138.899672,"EGP":15.722,"ERN":15.000155,"ETB":48.25,"EUR":0.882745,"FJD":2.1336,"FKP":0.755515,"GBP":0.755515,"GEL":3.105,"GGP":0.755515,"GHS":6.16,"GIP":0.755515,"GMD":52.525,"GNF":9352.5,"GTQ":7.734702,"GYD":209.457225,"HKD":7.79671,"HNL":24.150001,"HRK":6.6448,"HTG":99.95031,"HUF":323.279915,"IDR":14336.245925,"ILS":3.09802,"IMP":0.755515,"INR":75.417404,"IQD":1459.5,"IRR":42275,"ISK":130.11,"JEP":0.755515,"JMD":154.984235,"JOD":0.709,"JPY":113.837,"KES":112.85,"KGS":84.797051,"KHR":4070,"KMF":437.649745,"KPW":900,"KRW":1172.765695,"KWD":0.302787,"KYD":0.833918,"KZT":437.116176,"LAK":10935,"LBP":1532,"LKR":203.018068,"LRD":141.850016,"LSL":15.81,"LYD":4.595,"MAD":9.238551,"MDL":17.596432,"MGA":3975,"MKD":54.687187,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.32,"MUR":43.649998,"MVR":15.45,"MWK":810.5,"MXN":20.962275,"MYR":4.2245,"MZN":63.824998,"NAD":15.81,"NGN":409.99,"NIO":35.225,"NOK":8.889214,"NPR":120.800464,"NZD":1.469072,"OMR":0.385008,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.2455,"PKR":176.8,"PLN":4.073617,"PYG":6804.103506,"QAR":3.641,"RON":4.3694,"RSD":103.812742,"RUB":73.5739,"RWF":1002.5,"SAR":3.751511,"SBD":8.074316,"SCR":12.891866,"SDG":437.5,"SEK":9.04884,"SGD":1.36225,"SHP":0.755515,"SLL":11129.99989,"SOS":586,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.755413,"SYP":2512.5,"SZL":15.81,"THB":33.423502,"TJS":11.296902,"TMT":3.5,"TND":2.8855,"TOP":2.289256,"TRY":13.715225,"TTD":6.80388,"TWD":27.728299,"TZS":2303,"UAH":27.278982,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10787,"VES":4.6228,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":579.042754,"XAG":0.04464087,"XAU":0.00056096,"XCD":2.70255,"XDR":0.712861,"XOF":579.042754,"XPD":0.00053838,"XPF":105.339497,"XPT":0.00104059,"YER":250.249937,"ZAR":15.710339,"ZMW":17.310552,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 866.5 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T17:00:03.875Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 866.5 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T17:00:03.875Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2659.17 2000 866.5
2659.17 1500 866.5
2659.17 1000 866.5
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 12:59:01.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.67295,"AFN":96.25256,"ALL":107.7,"AMD":493.797441,"ANG":1.803347,"AOA":564,"ARS":101.3869,"AUD":1.395444,"AWG":1.8,"AZN":1.700805,"BAM":1.735538,"BBD":2,"BDT":85.847145,"BGN":1.729855,"BHD":0.377039,"BIF":1998,"BMD":1,"BND":1.364775,"BOB":6.909207,"BRL":5.5405,"BSD":1,"BTC":0.000019811735,"BTN":75.492834,"BWP":11.714245,"BYN":2.543903,"BZD":2.01693,"CAD":1.265374,"CDF":2002,"CHF":0.921846,"CLF":0.030433,"CLP":839.75,"CNH":6.334479,"CNY":6.3443,"COP":3894.126059,"CRC":634.600505,"CUC":1,"CUP":25.75,"CVE":98.025,"CZK":22.485104,"DJF":178,"DKK":6.563969,"DOP":56.75,"DZD":138.899672,"EGP":15.722,"ERN":15.000155,"ETB":48.25,"EUR":0.882745,"FJD":2.1336,"FKP":0.755515,"GBP":0.755515,"GEL":3.105,"GGP":0.755515,"GHS":6.16,"GIP":0.755515,"GMD":52.525,"GNF":9352.5,"GTQ":7.734702,"GYD":209.457225,"HKD":7.79671,"HNL":24.150001,"HRK":6.6448,"HTG":99.95031,"HUF":323.279915,"IDR":14336.245925,"ILS":3.09802,"IMP":0.755515,"INR":75.417404,"IQD":1459.5,"IRR":42275,"ISK":130.11,"JEP":0.755515,"JMD":154.984235,"JOD":0.709,"JPY":113.837,"KES":112.85,"KGS":84.797051,"KHR":4070,"KMF":437.649745,"KPW":900,"KRW":1172.765695,"KWD":0.302787,"KYD":0.833918,"KZT":437.116176,"LAK":10935,"LBP":1532,"LKR":203.018068,"LRD":141.850016,"LSL":15.81,"LYD":4.595,"MAD":9.238551,"MDL":17.596432,"MGA":3975,"MKD":54.687187,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.32,"MUR":43.649998,"MVR":15.45,"MWK":810.5,"MXN":20.962275,"MYR":4.2245,"MZN":63.824998,"NAD":15.81,"NGN":409.99,"NIO":35.225,"NOK":8.889214,"NPR":120.800464,"NZD":1.469072,"OMR":0.385008,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.2455,"PKR":176.8,"PLN":4.073617,"PYG":6804.103506,"QAR":3.641,"RON":4.3694,"RSD":103.812742,"RUB":73.5739,"RWF":1002.5,"SAR":3.751511,"SBD":8.074316,"SCR":12.891866,"SDG":437.5,"SEK":9.04884,"SGD":1.36225,"SHP":0.755515,"SLL":11129.99989,"SOS":586,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.755413,"SYP":2512.5,"SZL":15.81,"THB":33.423502,"TJS":11.296902,"TMT":3.5,"TND":2.8855,"TOP":2.289256,"TRY":13.715225,"TTD":6.80388,"TWD":27.728299,"TZS":2303,"UAH":27.278982,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10787,"VES":4.6228,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":579.042754,"XAG":0.04464087,"XAU":0.00056096,"XCD":2.70255,"XDR":0.712861,"XOF":579.042754,"XPD":0.00053838,"XPF":105.339497,"XPT":0.00104059,"YER":250.249937,"ZAR":15.710339,"ZMW":17.310552,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 866.5 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T17:05:03.468Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 866.5 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T17:05:03.468Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2659.17 2000 866.5
2659.17 1500 866.5
2659.17 1000 866.5
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 12:59:01.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.67295,"AFN":96.25256,"ALL":107.7,"AMD":493.797441,"ANG":1.803347,"AOA":564,"ARS":101.3869,"AUD":1.395444,"AWG":1.8,"AZN":1.700805,"BAM":1.735538,"BBD":2,"BDT":85.847145,"BGN":1.729855,"BHD":0.377039,"BIF":1998,"BMD":1,"BND":1.364775,"BOB":6.909207,"BRL":5.5405,"BSD":1,"BTC":0.000019811735,"BTN":75.492834,"BWP":11.714245,"BYN":2.543903,"BZD":2.01693,"CAD":1.265374,"CDF":2002,"CHF":0.921846,"CLF":0.030433,"CLP":839.75,"CNH":6.334479,"CNY":6.3443,"COP":3894.126059,"CRC":634.600505,"CUC":1,"CUP":25.75,"CVE":98.025,"CZK":22.485104,"DJF":178,"DKK":6.563969,"DOP":56.75,"DZD":138.899672,"EGP":15.722,"ERN":15.000155,"ETB":48.25,"EUR":0.882745,"FJD":2.1336,"FKP":0.755515,"GBP":0.755515,"GEL":3.105,"GGP":0.755515,"GHS":6.16,"GIP":0.755515,"GMD":52.525,"GNF":9352.5,"GTQ":7.734702,"GYD":209.457225,"HKD":7.79671,"HNL":24.150001,"HRK":6.6448,"HTG":99.95031,"HUF":323.279915,"IDR":14336.245925,"ILS":3.09802,"IMP":0.755515,"INR":75.417404,"IQD":1459.5,"IRR":42275,"ISK":130.11,"JEP":0.755515,"JMD":154.984235,"JOD":0.709,"JPY":113.837,"KES":112.85,"KGS":84.797051,"KHR":4070,"KMF":437.649745,"KPW":900,"KRW":1172.765695,"KWD":0.302787,"KYD":0.833918,"KZT":437.116176,"LAK":10935,"LBP":1532,"LKR":203.018068,"LRD":141.850016,"LSL":15.81,"LYD":4.595,"MAD":9.238551,"MDL":17.596432,"MGA":3975,"MKD":54.687187,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.32,"MUR":43.649998,"MVR":15.45,"MWK":810.5,"MXN":20.962275,"MYR":4.2245,"MZN":63.824998,"NAD":15.81,"NGN":409.99,"NIO":35.225,"NOK":8.889214,"NPR":120.800464,"NZD":1.469072,"OMR":0.385008,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.2455,"PKR":176.8,"PLN":4.073617,"PYG":6804.103506,"QAR":3.641,"RON":4.3694,"RSD":103.812742,"RUB":73.5739,"RWF":1002.5,"SAR":3.751511,"SBD":8.074316,"SCR":12.891866,"SDG":437.5,"SEK":9.04884,"SGD":1.36225,"SHP":0.755515,"SLL":11129.99989,"SOS":586,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.755413,"SYP":2512.5,"SZL":15.81,"THB":33.423502,"TJS":11.296902,"TMT":3.5,"TND":2.8855,"TOP":2.289256,"TRY":13.715225,"TTD":6.80388,"TWD":27.728299,"TZS":2303,"UAH":27.278982,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10787,"VES":4.6228,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":579.042754,"XAG":0.04464087,"XAU":0.00056096,"XCD":2.70255,"XDR":0.712861,"XOF":579.042754,"XPD":0.00053838,"XPF":105.339497,"XPT":0.00104059,"YER":250.249937,"ZAR":15.710339,"ZMW":17.310552,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 866.5 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T17:30:03.026Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 866.5 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T17:30:03.026Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2659.17 2000 866.5
2659.17 1500 866.5
2659.17 1000 866.5
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 12:59:01.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.67295,"AFN":96.25256,"ALL":107.7,"AMD":493.797441,"ANG":1.803347,"AOA":564,"ARS":101.377,"AUD":1.393207,"AWG":1.8,"AZN":1.700805,"BAM":1.735538,"BBD":2,"BDT":85.847145,"BGN":1.728385,"BHD":0.377001,"BIF":1998,"BMD":1,"BND":1.364775,"BOB":6.909207,"BRL":5.5439,"BSD":1,"BTC":0.000019887163,"BTN":75.492834,"BWP":11.714245,"BYN":2.543903,"BZD":2.01693,"CAD":1.26446,"CDF":2002,"CHF":0.920686,"CLF":0.030433,"CLP":839.75,"CNH":6.335559,"CNY":6.3448,"COP":3886.33283,"CRC":634.600505,"CUC":1,"CUP":25.75,"CVE":98.025,"CZK":22.4407,"DJF":178,"DKK":6.552431,"DOP":56.75,"DZD":138.955455,"EGP":15.7157,"ERN":15.000155,"ETB":48.25,"EUR":0.88117,"FJD":2.1336,"FKP":0.755456,"GBP":0.755456,"GEL":3.105,"GGP":0.755456,"GHS":6.16,"GIP":0.755456,"GMD":52.525,"GNF":9352.5,"GTQ":7.734702,"GYD":209.457225,"HKD":7.796385,"HNL":24.150001,"HRK":6.6325,"HTG":99.95031,"HUF":322.486018,"IDR":14317.25,"ILS":3.09802,"IMP":0.755456,"INR":75.42525,"IQD":1459.5,"IRR":42275,"ISK":129.89,"JEP":0.755456,"JMD":154.984235,"JOD":0.709,"JPY":113.681,"KES":112.85,"KGS":84.797051,"KHR":4070,"KMF":434.625072,"KPW":900,"KRW":1171.926783,"KWD":0.302808,"KYD":0.833918,"KZT":437.116176,"LAK":10975,"LBP":1532,"LKR":203.018068,"LRD":141.975008,"LSL":15.81,"LYD":4.605,"MAD":9.1775,"MDL":17.596432,"MGA":3975,"MKD":54.687187,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.335,"MUR":43.65,"MVR":15.45,"MWK":807.5,"MXN":20.936217,"MYR":4.2245,"MZN":63.875002,"NAD":15.81,"NGN":409.99,"NIO":35.225,"NOK":8.879198,"NPR":120.800464,"NZD":1.467206,"OMR":0.385031,"PAB":1,"PEN":4.0775,"PGK":3.535,"PHP":50.199004,"PKR":177.225,"PLN":4.070545,"PYG":6804.103506,"QAR":3.641,"RON":4.3608,"RSD":103.611341,"RUB":73.5357,"RWF":1005,"SAR":3.751301,"SBD":8.074316,"SCR":12.845533,"SDG":437.5,"SEK":9.033615,"SGD":1.361018,"SHP":0.755456,"SLL":11129.99989,"SOS":584,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.995,"SVC":8.755413,"SYP":2512.5,"SZL":15.81,"THB":33.41,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.670229,"TTD":6.80388,"TWD":27.7267,"TZS":2303,"UAH":27.278982,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10787,"VES":4.6228,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":578.009613,"XAG":0.04459909,"XAU":0.00056038,"XCD":2.70255,"XDR":0.712861,"XOF":578.009613,"XPD":0.00053968,"XPF":105.151548,"XPT":0.00103951,"YER":250.274989,"ZAR":15.71525,"ZMW":17.310552,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 866.5 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T18:00:02.953Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 866.5 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T18:00:02.953Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2659.17 2000 866.5
2659.17 1500 866.5
2659.17 1000 866.5
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 12:59:01.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.67295,"AFN":96.25256,"ALL":107.7,"AMD":493.797441,"ANG":1.803347,"AOA":564,"ARS":101.377,"AUD":1.393207,"AWG":1.8,"AZN":1.700805,"BAM":1.735538,"BBD":2,"BDT":85.847145,"BGN":1.728385,"BHD":0.377001,"BIF":1998,"BMD":1,"BND":1.364775,"BOB":6.909207,"BRL":5.5439,"BSD":1,"BTC":0.000019887163,"BTN":75.492834,"BWP":11.714245,"BYN":2.543903,"BZD":2.01693,"CAD":1.26446,"CDF":2002,"CHF":0.920686,"CLF":0.030433,"CLP":839.75,"CNH":6.335559,"CNY":6.3448,"COP":3886.33283,"CRC":634.600505,"CUC":1,"CUP":25.75,"CVE":98.025,"CZK":22.4407,"DJF":178,"DKK":6.552431,"DOP":56.75,"DZD":138.955455,"EGP":15.7157,"ERN":15.000155,"ETB":48.25,"EUR":0.88117,"FJD":2.1336,"FKP":0.755456,"GBP":0.755456,"GEL":3.105,"GGP":0.755456,"GHS":6.16,"GIP":0.755456,"GMD":52.525,"GNF":9352.5,"GTQ":7.734702,"GYD":209.457225,"HKD":7.796385,"HNL":24.150001,"HRK":6.6325,"HTG":99.95031,"HUF":322.486018,"IDR":14317.25,"ILS":3.09802,"IMP":0.755456,"INR":75.42525,"IQD":1459.5,"IRR":42275,"ISK":129.89,"JEP":0.755456,"JMD":154.984235,"JOD":0.709,"JPY":113.681,"KES":112.85,"KGS":84.797051,"KHR":4070,"KMF":434.625072,"KPW":900,"KRW":1171.926783,"KWD":0.302808,"KYD":0.833918,"KZT":437.116176,"LAK":10975,"LBP":1532,"LKR":203.018068,"LRD":141.975008,"LSL":15.81,"LYD":4.605,"MAD":9.1775,"MDL":17.596432,"MGA":3975,"MKD":54.687187,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.335,"MUR":43.65,"MVR":15.45,"MWK":807.5,"MXN":20.936217,"MYR":4.2245,"MZN":63.875002,"NAD":15.81,"NGN":409.99,"NIO":35.225,"NOK":8.879198,"NPR":120.800464,"NZD":1.467206,"OMR":0.385031,"PAB":1,"PEN":4.0775,"PGK":3.535,"PHP":50.199004,"PKR":177.225,"PLN":4.070545,"PYG":6804.103506,"QAR":3.641,"RON":4.3608,"RSD":103.611341,"RUB":73.5357,"RWF":1005,"SAR":3.751301,"SBD":8.074316,"SCR":12.845533,"SDG":437.5,"SEK":9.033615,"SGD":1.361018,"SHP":0.755456,"SLL":11129.99989,"SOS":584,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.995,"SVC":8.755413,"SYP":2512.5,"SZL":15.81,"THB":33.41,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.670229,"TTD":6.80388,"TWD":27.7267,"TZS":2303,"UAH":27.278982,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10787,"VES":4.6228,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":578.009613,"XAG":0.04459909,"XAU":0.00056038,"XCD":2.70255,"XDR":0.712861,"XOF":578.009613,"XPD":0.00053968,"XPF":105.151548,"XPT":0.00103951,"YER":250.274989,"ZAR":15.71525,"ZMW":17.310552,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 866.5 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T18:30:02.706Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 866.5 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T18:30:02.706Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2659.17 2000 866.5
2659.17 1500 866.5
2659.17 1000 866.5
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 12:59:01.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.67295,"AFN":96.25256,"ALL":106.8,"AMD":493.797441,"ANG":1.803347,"AOA":564,"ARS":101.3801,"AUD":1.393211,"AWG":1.8,"AZN":1.700805,"BAM":1.735538,"BBD":2,"BDT":85.847145,"BGN":1.72608,"BHD":0.377023,"BIF":1998,"BMD":1,"BND":1.364775,"BOB":6.909207,"BRL":5.5352,"BSD":1,"BTC":0.00001975056,"BTN":75.492834,"BWP":11.714245,"BYN":2.543903,"BZD":2.01693,"CAD":1.265065,"CDF":2002,"CHF":0.920653,"CLF":0.030433,"CLP":839.75,"CNH":6.345611,"CNY":6.3448,"COP":3887.541647,"CRC":634.600505,"CUC":1,"CUP":25.75,"CVE":98.025,"CZK":22.449908,"DJF":178,"DKK":6.55404,"DOP":56.75,"DZD":138.871758,"EGP":15.7231,"ERN":15.000155,"ETB":48.2,"EUR":0.881403,"FJD":2.121417,"FKP":0.755694,"GBP":0.755694,"GEL":3.105,"GGP":0.755694,"GHS":6.16,"GIP":0.755694,"GMD":52.525,"GNF":9352.5,"GTQ":7.734702,"GYD":209.457225,"HKD":7.79669,"HNL":24.159999,"HRK":6.6342,"HTG":99.95031,"HUF":322.196692,"IDR":14331.35,"ILS":3.09802,"IMP":0.755694,"INR":75.444053,"IQD":1459.5,"IRR":42275,"ISK":129.89,"JEP":0.755694,"JMD":154.984235,"JOD":0.709,"JPY":113.676,"KES":112.85,"KGS":84.797051,"KHR":4070,"KMF":434.625072,"KPW":900,"KRW":1172.76582,"KWD":0.302808,"KYD":0.833918,"KZT":437.116176,"LAK":10975,"LBP":1516.000002,"LKR":203.018068,"LRD":141.975008,"LSL":15.81,"LYD":4.605,"MAD":9.1775,"MDL":17.596432,"MGA":3970,"MKD":54.687187,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.335,"MUR":43.65,"MVR":15.45,"MWK":807.5,"MXN":20.949463,"MYR":4.2245,"MZN":63.875002,"NAD":15.81,"NGN":409.99,"NIO":35.225,"NOK":8.881096,"NPR":120.800464,"NZD":1.467718,"OMR":0.385034,"PAB":1,"PEN":4.0775,"PGK":3.53,"PHP":50.224002,"PKR":177.225,"PLN":4.068736,"PYG":6804.103506,"QAR":3.641,"RON":4.3618,"RSD":103.63,"RUB":73.5841,"RWF":1005,"SAR":3.75131,"SBD":8.077592,"SCR":12.814185,"SDG":437.5,"SEK":9.038386,"SGD":1.3618,"SHP":0.755694,"SLL":11129.99989,"SOS":584,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.995,"SVC":8.755413,"SYP":2512.5,"SZL":15.81,"THB":33.43,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.6718,"TTD":6.80388,"TWD":27.739499,"TZS":2303,"UAH":27.278982,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10800,"VES":4.6228,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":578.162462,"XAG":0.04457223,"XAU":0.00056035,"XCD":2.70255,"XDR":0.712861,"XOF":578.162462,"XPD":0.0005391,"XPF":105.179355,"XPT":0.00103951,"YER":250.274989,"ZAR":15.746737,"ZMW":17.310552,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }

> nest-typescript-starter@1.0.0 start:prod /home/wadiahex/nBanking-ExternalTransactions
> node dist/main

[32m[Nest] 2456228  - [39m12/08/2021, 2:04:07 PM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 2456228  - [39m12/08/2021, 2:04:07 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMailerModule dependencies initialized[39m[38;5;3m +69ms[39m
[32m[Nest] 2456228  - [39m12/08/2021, 2:04:07 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2456228  - [39m12/08/2021, 2:04:07 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2456228  - [39m12/08/2021, 2:04:07 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2456228  - [39m12/08/2021, 2:04:07 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mCacheModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 2456228  - [39m12/08/2021, 2:04:07 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHttpModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2456228  - [39m12/08/2021, 2:04:07 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigHostModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2456228  - [39m12/08/2021, 2:04:07 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2456228  - [39m12/08/2021, 2:04:07 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 2456228  - [39m12/08/2021, 2:04:07 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHelperModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 2456228  - [39m12/08/2021, 2:04:08 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMailerCoreModule dependencies initialized[39m[38;5;3m +494ms[39m
Executing (default): SELECT 1+1 AS result
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntities" ("code" VARCHAR(255) , "masterAccountCode" VARCHAR(255), "userName" VARCHAR(255), "source" INTEGER, "extraData" JSON, "lastTransactionDate" TIMESTAMP WITH TIME ZONE, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("code"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntities' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntities' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" TYPE INTEGER;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntities' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntityMovements" ("id"  SERIAL , "externalEntityCode" VARCHAR(255) REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE, "transactionNumber" VARCHAR(255), "transactionDateTime" TIMESTAMP WITH TIME ZONE, "accountReferenceNumber" VARCHAR(255), "originalCurrency" VARCHAR(255), "originalCurrencyAmount" VARCHAR(255), "TargetCurrency" VARCHAR(255), "TargetCurrencyAmount" VARCHAR(255), "OriginalToTargetExchangeRate" VARCHAR(255), "Description" VARCHAR(255), "Status" VARCHAR(255), "ConfirmedDateTime" TIMESTAMP WITH TIME ZONE, "ProcessedDateTime" TIMESTAMP WITH TIME ZONE, "ErrorMessage" VARCHAR(255), "FullData" JSON, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("id"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntityMovements' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntityMovements' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntityMovements" DROP CONSTRAINT "ExternalEntityMovements_externalEntityCode_fkey"
Executing (default): ALTER TABLE "ExternalEntityMovements"  ADD FOREIGN KEY ("externalEntityCode") REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrencyAmount" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "OriginalToTargetExchangeRate" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "OriginalToTargetExchangeRate" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "OriginalToTargetExchangeRate" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Description" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Description" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Description" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Status" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Status" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Status" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ConfirmedDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ConfirmedDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ConfirmedDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ProcessedDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ProcessedDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ProcessedDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ErrorMessage" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ErrorMessage" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ErrorMessage" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "FullData" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "FullData" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "FullData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntityMovements' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
[32m[Nest] 2456228  - [39m12/08/2021, 2:04:08 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeCoreModule dependencies initialized[39m[38;5;3m +104ms[39m
[32m[Nest] 2456228  - [39m12/08/2021, 2:04:08 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +0ms[39m
Executing (default): SELECT 1+1 AS result
Executing (default): SELECT 1+1 AS result
[32m[Nest] 2456228  - [39m12/08/2021, 2:04:09 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeCoreModule dependencies initialized[39m[38;5;3m +1184ms[39m
[32m[Nest] 2456228  - [39m12/08/2021, 2:04:09 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTransactionsModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 2456228  - [39m12/08/2021, 2:04:09 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2456228  - [39m12/08/2021, 2:04:09 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/}:[39m[38;5;3m +8ms[39m
[32m[Nest] 2456228  - [39m12/08/2021, 2:04:09 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/process-transactions/jeeves, GET} route[39m[38;5;3m +4ms[39m
[32m[Nest] 2456228  - [39m12/08/2021, 2:04:09 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 2456228  - [39m12/08/2021, 2:04:09 PM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +4ms[39m
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 866.5 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T19:00:03.900Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 866.5 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T19:00:03.900Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2659.17 2000 866.5
2659.17 1500 866.5
2659.17 1000 866.5
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 12:59:01.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.67295,"AFN":96.25256,"ALL":106.8,"AMD":493.797441,"ANG":1.803347,"AOA":564,"ARS":101.3801,"AUD":1.393211,"AWG":1.8,"AZN":1.700805,"BAM":1.735538,"BBD":2,"BDT":85.847145,"BGN":1.72608,"BHD":0.377023,"BIF":1998,"BMD":1,"BND":1.364775,"BOB":6.909207,"BRL":5.5352,"BSD":1,"BTC":0.00001975056,"BTN":75.492834,"BWP":11.714245,"BYN":2.543903,"BZD":2.01693,"CAD":1.265065,"CDF":2002,"CHF":0.920653,"CLF":0.030433,"CLP":839.75,"CNH":6.345611,"CNY":6.3448,"COP":3887.541647,"CRC":634.600505,"CUC":1,"CUP":25.75,"CVE":98.025,"CZK":22.449908,"DJF":178,"DKK":6.55404,"DOP":56.75,"DZD":138.871758,"EGP":15.7231,"ERN":15.000155,"ETB":48.2,"EUR":0.881403,"FJD":2.121417,"FKP":0.755694,"GBP":0.755694,"GEL":3.105,"GGP":0.755694,"GHS":6.16,"GIP":0.755694,"GMD":52.525,"GNF":9352.5,"GTQ":7.734702,"GYD":209.457225,"HKD":7.79669,"HNL":24.159999,"HRK":6.6342,"HTG":99.95031,"HUF":322.196692,"IDR":14331.35,"ILS":3.09802,"IMP":0.755694,"INR":75.444053,"IQD":1459.5,"IRR":42275,"ISK":129.89,"JEP":0.755694,"JMD":154.984235,"JOD":0.709,"JPY":113.676,"KES":112.85,"KGS":84.797051,"KHR":4070,"KMF":434.625072,"KPW":900,"KRW":1172.76582,"KWD":0.302808,"KYD":0.833918,"KZT":437.116176,"LAK":10975,"LBP":1516.000002,"LKR":203.018068,"LRD":141.975008,"LSL":15.81,"LYD":4.605,"MAD":9.1775,"MDL":17.596432,"MGA":3970,"MKD":54.687187,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.335,"MUR":43.65,"MVR":15.45,"MWK":807.5,"MXN":20.949463,"MYR":4.2245,"MZN":63.875002,"NAD":15.81,"NGN":409.99,"NIO":35.225,"NOK":8.881096,"NPR":120.800464,"NZD":1.467718,"OMR":0.385034,"PAB":1,"PEN":4.0775,"PGK":3.53,"PHP":50.224002,"PKR":177.225,"PLN":4.068736,"PYG":6804.103506,"QAR":3.641,"RON":4.3618,"RSD":103.63,"RUB":73.5841,"RWF":1005,"SAR":3.75131,"SBD":8.077592,"SCR":12.814185,"SDG":437.5,"SEK":9.038386,"SGD":1.3618,"SHP":0.755694,"SLL":11129.99989,"SOS":584,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.995,"SVC":8.755413,"SYP":2512.5,"SZL":15.81,"THB":33.43,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.6718,"TTD":6.80388,"TWD":27.739499,"TZS":2303,"UAH":27.278982,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10800,"VES":4.6228,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":578.162462,"XAG":0.04457223,"XAU":0.00056035,"XCD":2.70255,"XDR":0.712861,"XOF":578.162462,"XPD":0.0005391,"XPF":105.179355,"XPT":0.00103951,"YER":250.274989,"ZAR":15.746737,"ZMW":17.310552,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }

> nest-typescript-starter@1.0.0 start:prod /home/wadiahex/nBanking-ExternalTransactions
> node dist/main

[32m[Nest] 2457039  - [39m12/08/2021, 2:04:27 PM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 2457039  - [39m12/08/2021, 2:04:27 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMailerModule dependencies initialized[39m[38;5;3m +67ms[39m
[32m[Nest] 2457039  - [39m12/08/2021, 2:04:27 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2457039  - [39m12/08/2021, 2:04:27 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2457039  - [39m12/08/2021, 2:04:27 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 2457039  - [39m12/08/2021, 2:04:27 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mCacheModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2457039  - [39m12/08/2021, 2:04:27 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHttpModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 2457039  - [39m12/08/2021, 2:04:27 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigHostModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2457039  - [39m12/08/2021, 2:04:27 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2457039  - [39m12/08/2021, 2:04:27 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 2457039  - [39m12/08/2021, 2:04:27 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHelperModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2457039  - [39m12/08/2021, 2:04:27 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMailerCoreModule dependencies initialized[39m[38;5;3m +494ms[39m
Executing (default): SELECT 1+1 AS result
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntities" ("code" VARCHAR(255) , "masterAccountCode" VARCHAR(255), "userName" VARCHAR(255), "source" INTEGER, "extraData" JSON, "lastTransactionDate" TIMESTAMP WITH TIME ZONE, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("code"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntities' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntities' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" TYPE INTEGER;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntities' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntityMovements" ("id"  SERIAL , "externalEntityCode" VARCHAR(255) REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE, "transactionNumber" VARCHAR(255), "transactionDateTime" TIMESTAMP WITH TIME ZONE, "accountReferenceNumber" VARCHAR(255), "originalCurrency" VARCHAR(255), "originalCurrencyAmount" VARCHAR(255), "TargetCurrency" VARCHAR(255), "TargetCurrencyAmount" VARCHAR(255), "OriginalToTargetExchangeRate" VARCHAR(255), "Description" VARCHAR(255), "Status" VARCHAR(255), "ConfirmedDateTime" TIMESTAMP WITH TIME ZONE, "ProcessedDateTime" TIMESTAMP WITH TIME ZONE, "ErrorMessage" VARCHAR(255), "FullData" JSON, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("id"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntityMovements' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntityMovements' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntityMovements" DROP CONSTRAINT "ExternalEntityMovements_externalEntityCode_fkey"
Executing (default): ALTER TABLE "ExternalEntityMovements"  ADD FOREIGN KEY ("externalEntityCode") REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrencyAmount" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "OriginalToTargetExchangeRate" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "OriginalToTargetExchangeRate" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "OriginalToTargetExchangeRate" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Description" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Description" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Description" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Status" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Status" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Status" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ConfirmedDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ConfirmedDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ConfirmedDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ProcessedDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ProcessedDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ProcessedDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ErrorMessage" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ErrorMessage" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ErrorMessage" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "FullData" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "FullData" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "FullData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntityMovements' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
[32m[Nest] 2457039  - [39m12/08/2021, 2:04:27 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeCoreModule dependencies initialized[39m[38;5;3m +114ms[39m
[32m[Nest] 2457039  - [39m12/08/2021, 2:04:27 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +1ms[39m
Executing (default): SELECT 1+1 AS result
Executing (default): SELECT 1+1 AS result
[32m[Nest] 2457039  - [39m12/08/2021, 2:04:28 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeCoreModule dependencies initialized[39m[38;5;3m +1250ms[39m
[32m[Nest] 2457039  - [39m12/08/2021, 2:04:28 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTransactionsModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2457039  - [39m12/08/2021, 2:04:28 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2457039  - [39m12/08/2021, 2:04:28 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/}:[39m[38;5;3m +9ms[39m
[32m[Nest] 2457039  - [39m12/08/2021, 2:04:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/process-transactions/jeeves, GET} route[39m[38;5;3m +6ms[39m
[32m[Nest] 2457039  - [39m12/08/2021, 2:04:28 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 2457039  - [39m12/08/2021, 2:04:28 PM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +5ms[39m
[31m[Nest] 2457039  - [39m12/08/2021, 2:04:28 PM [31m  ERROR[39m [38;5;3m[NestApplication] [39m[31mError: listen EADDRINUSE: address already in use :::32000[39m[38;5;3m +4ms[39m
(node:2457039) UnhandledPromiseRejectionWarning: Error: listen EADDRINUSE: address already in use :::32000
    at Server.setupListenHandle [as _listen2] (net.js:1280:14)
    at listenInCluster (net.js:1328:12)
    at Server.listen (net.js:1415:7)
    at ExpressAdapter.listen (/home/wadiahex/nBanking-ExternalTransactions/node_modules/@nestjs/platform-express/adapters/express-adapter.js:53:32)
    at Promise (/home/wadiahex/nBanking-ExternalTransactions/node_modules/@nestjs/core/nest-application.js:168:46)
    at new Promise (<anonymous>)
    at NestApplication.listen (/home/wadiahex/nBanking-ExternalTransactions/node_modules/@nestjs/core/nest-application.js:157:16)
    at process._tickCallback (internal/process/next_tick.js:68:7)
(node:2457039) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 1)
(node:2457039) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.

> nest-typescript-starter@1.0.0 start:prod /home/wadiahex/nBanking-ExternalTransactions
> node dist/main

[32m[Nest] 2457643  - [39m12/08/2021, 2:04:46 PM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 2457643  - [39m12/08/2021, 2:04:46 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMailerModule dependencies initialized[39m[38;5;3m +88ms[39m
[32m[Nest] 2457643  - [39m12/08/2021, 2:04:46 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 2457643  - [39m12/08/2021, 2:04:46 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2457643  - [39m12/08/2021, 2:04:46 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 2457643  - [39m12/08/2021, 2:04:46 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mCacheModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2457643  - [39m12/08/2021, 2:04:46 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHttpModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2457643  - [39m12/08/2021, 2:04:46 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigHostModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2457643  - [39m12/08/2021, 2:04:46 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2457643  - [39m12/08/2021, 2:04:46 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2457643  - [39m12/08/2021, 2:04:46 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHelperModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 2457643  - [39m12/08/2021, 2:04:46 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMailerCoreModule dependencies initialized[39m[38;5;3m +495ms[39m
Executing (default): SELECT 1+1 AS result
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntities" ("code" VARCHAR(255) , "masterAccountCode" VARCHAR(255), "userName" VARCHAR(255), "source" INTEGER, "extraData" JSON, "lastTransactionDate" TIMESTAMP WITH TIME ZONE, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("code"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntities' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntities' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" TYPE INTEGER;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntities' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntityMovements" ("id"  SERIAL , "externalEntityCode" VARCHAR(255) REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE, "transactionNumber" VARCHAR(255), "transactionDateTime" TIMESTAMP WITH TIME ZONE, "accountReferenceNumber" VARCHAR(255), "originalCurrency" VARCHAR(255), "originalCurrencyAmount" VARCHAR(255), "TargetCurrency" VARCHAR(255), "TargetCurrencyAmount" VARCHAR(255), "OriginalToTargetExchangeRate" VARCHAR(255), "Description" VARCHAR(255), "Status" VARCHAR(255), "ConfirmedDateTime" TIMESTAMP WITH TIME ZONE, "ProcessedDateTime" TIMESTAMP WITH TIME ZONE, "ErrorMessage" VARCHAR(255), "FullData" JSON, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("id"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntityMovements' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntityMovements' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntityMovements" DROP CONSTRAINT "ExternalEntityMovements_externalEntityCode_fkey"
Executing (default): ALTER TABLE "ExternalEntityMovements"  ADD FOREIGN KEY ("externalEntityCode") REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrencyAmount" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "OriginalToTargetExchangeRate" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "OriginalToTargetExchangeRate" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "OriginalToTargetExchangeRate" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Description" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Description" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Description" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Status" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Status" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Status" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ConfirmedDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ConfirmedDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ConfirmedDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ProcessedDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ProcessedDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ProcessedDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ErrorMessage" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ErrorMessage" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ErrorMessage" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "FullData" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "FullData" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "FullData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntityMovements' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
[32m[Nest] 2457643  - [39m12/08/2021, 2:04:46 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeCoreModule dependencies initialized[39m[38;5;3m +120ms[39m
[32m[Nest] 2457643  - [39m12/08/2021, 2:04:46 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +1ms[39m
Executing (default): SELECT 1+1 AS result
Executing (default): SELECT 1+1 AS result
[32m[Nest] 2457643  - [39m12/08/2021, 2:04:47 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeCoreModule dependencies initialized[39m[38;5;3m +1089ms[39m
[32m[Nest] 2457643  - [39m12/08/2021, 2:04:47 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTransactionsModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2457643  - [39m12/08/2021, 2:04:47 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2457643  - [39m12/08/2021, 2:04:47 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/}:[39m[38;5;3m +8ms[39m
[32m[Nest] 2457643  - [39m12/08/2021, 2:04:47 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/process-transactions/jeeves, GET} route[39m[38;5;3m +3ms[39m
[32m[Nest] 2457643  - [39m12/08/2021, 2:04:48 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 2457643  - [39m12/08/2021, 2:04:48 PM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +4ms[39m
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 866.5 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T19:04:20.512Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 866.5 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T19:04:20.512Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2659.17 2000 866.5
2659.17 1500 866.5
2659.17 1000 866.5
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 12:59:01.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.67295,"AFN":96.25256,"ALL":106.8,"AMD":493.797441,"ANG":1.803347,"AOA":564,"ARS":101.3801,"AUD":1.393211,"AWG":1.8,"AZN":1.700805,"BAM":1.735538,"BBD":2,"BDT":85.847145,"BGN":1.72608,"BHD":0.377023,"BIF":1998,"BMD":1,"BND":1.364775,"BOB":6.909207,"BRL":5.5352,"BSD":1,"BTC":0.00001975056,"BTN":75.492834,"BWP":11.714245,"BYN":2.543903,"BZD":2.01693,"CAD":1.265065,"CDF":2002,"CHF":0.920653,"CLF":0.030433,"CLP":839.75,"CNH":6.345611,"CNY":6.3448,"COP":3887.541647,"CRC":634.600505,"CUC":1,"CUP":25.75,"CVE":98.025,"CZK":22.449908,"DJF":178,"DKK":6.55404,"DOP":56.75,"DZD":138.871758,"EGP":15.7231,"ERN":15.000155,"ETB":48.2,"EUR":0.881403,"FJD":2.121417,"FKP":0.755694,"GBP":0.755694,"GEL":3.105,"GGP":0.755694,"GHS":6.16,"GIP":0.755694,"GMD":52.525,"GNF":9352.5,"GTQ":7.734702,"GYD":209.457225,"HKD":7.79669,"HNL":24.159999,"HRK":6.6342,"HTG":99.95031,"HUF":322.196692,"IDR":14331.35,"ILS":3.09802,"IMP":0.755694,"INR":75.444053,"IQD":1459.5,"IRR":42275,"ISK":129.89,"JEP":0.755694,"JMD":154.984235,"JOD":0.709,"JPY":113.676,"KES":112.85,"KGS":84.797051,"KHR":4070,"KMF":434.625072,"KPW":900,"KRW":1172.76582,"KWD":0.302808,"KYD":0.833918,"KZT":437.116176,"LAK":10975,"LBP":1516.000002,"LKR":203.018068,"LRD":141.975008,"LSL":15.81,"LYD":4.605,"MAD":9.1775,"MDL":17.596432,"MGA":3970,"MKD":54.687187,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.335,"MUR":43.65,"MVR":15.45,"MWK":807.5,"MXN":20.949463,"MYR":4.2245,"MZN":63.875002,"NAD":15.81,"NGN":409.99,"NIO":35.225,"NOK":8.881096,"NPR":120.800464,"NZD":1.467718,"OMR":0.385034,"PAB":1,"PEN":4.0775,"PGK":3.53,"PHP":50.224002,"PKR":177.225,"PLN":4.068736,"PYG":6804.103506,"QAR":3.641,"RON":4.3618,"RSD":103.63,"RUB":73.5841,"RWF":1005,"SAR":3.75131,"SBD":8.077592,"SCR":12.814185,"SDG":437.5,"SEK":9.038386,"SGD":1.3618,"SHP":0.755694,"SLL":11129.99989,"SOS":584,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.995,"SVC":8.755413,"SYP":2512.5,"SZL":15.81,"THB":33.43,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.6718,"TTD":6.80388,"TWD":27.739499,"TZS":2303,"UAH":27.278982,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10800,"VES":4.6228,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":578.162462,"XAG":0.04457223,"XAU":0.00056035,"XCD":2.70255,"XDR":0.712861,"XOF":578.162462,"XPD":0.0005391,"XPF":105.179355,"XPT":0.00103951,"YER":250.274989,"ZAR":15.746737,"ZMW":17.310552,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }

> nest-typescript-starter@1.0.0 start:prod /home/wadiahex/nBanking-ExternalTransactions
> node dist/main

internal/modules/cjs/loader.js:638
    throw err;
    ^

Error: Cannot find module '/home/wadiahex/nBanking-ExternalTransactions/dist/main'
    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:636:15)
    at Function.Module._load (internal/modules/cjs/loader.js:562:25)
    at Function.Module.runMain (internal/modules/cjs/loader.js:831:12)
    at startup (internal/bootstrap/node.js:283:19)
    at bootstrapNodeJSCore (internal/bootstrap/node.js:623:3)
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! nest-typescript-starter@1.0.0 start:prod: `node dist/main`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the nest-typescript-starter@1.0.0 start:prod script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.

npm ERR! A complete log of this run can be found in:
npm ERR!     /home/wadiahex/.npm/_logs/2021-12-08T19_06_09_727Z-debug.log

> nest-typescript-starter@1.0.0 start:prod /home/wadiahex/nBanking-ExternalTransactions
> node dist/main

[32m[Nest] 2462286  - [39m12/08/2021, 2:06:29 PM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 2462286  - [39m12/08/2021, 2:06:29 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMailerModule dependencies initialized[39m[38;5;3m +76ms[39m
[32m[Nest] 2462286  - [39m12/08/2021, 2:06:29 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2462286  - [39m12/08/2021, 2:06:29 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 2462286  - [39m12/08/2021, 2:06:29 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2462286  - [39m12/08/2021, 2:06:29 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mCacheModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2462286  - [39m12/08/2021, 2:06:29 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHttpModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2462286  - [39m12/08/2021, 2:06:29 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigHostModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 2462286  - [39m12/08/2021, 2:06:29 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2462286  - [39m12/08/2021, 2:06:29 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2462286  - [39m12/08/2021, 2:06:29 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHelperModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2462286  - [39m12/08/2021, 2:06:30 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMailerCoreModule dependencies initialized[39m[38;5;3m +505ms[39m
Executing (default): SELECT 1+1 AS result
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntities" ("code" VARCHAR(255) , "masterAccountCode" VARCHAR(255), "userName" VARCHAR(255), "source" INTEGER, "extraData" JSON, "lastTransactionDate" TIMESTAMP WITH TIME ZONE, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("code"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntities' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntities' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" TYPE INTEGER;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntities' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntityMovements" ("id"  SERIAL , "externalEntityCode" VARCHAR(255) REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE, "transactionNumber" VARCHAR(255), "transactionDateTime" TIMESTAMP WITH TIME ZONE, "accountReferenceNumber" VARCHAR(255), "originalCurrency" VARCHAR(255), "originalCurrencyAmount" VARCHAR(255), "TargetCurrency" VARCHAR(255), "TargetCurrencyAmount" VARCHAR(255), "OriginalToTargetExchangeRate" VARCHAR(255), "Description" VARCHAR(255), "Status" VARCHAR(255), "ConfirmedDateTime" TIMESTAMP WITH TIME ZONE, "ProcessedDateTime" TIMESTAMP WITH TIME ZONE, "ErrorMessage" VARCHAR(255), "FullData" JSON, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("id"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntityMovements' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntityMovements' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntityMovements" DROP CONSTRAINT "ExternalEntityMovements_externalEntityCode_fkey"
Executing (default): ALTER TABLE "ExternalEntityMovements"  ADD FOREIGN KEY ("externalEntityCode") REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrencyAmount" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "OriginalToTargetExchangeRate" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "OriginalToTargetExchangeRate" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "OriginalToTargetExchangeRate" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Description" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Description" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Description" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Status" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Status" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Status" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ConfirmedDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ConfirmedDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ConfirmedDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ProcessedDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ProcessedDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ProcessedDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ErrorMessage" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ErrorMessage" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ErrorMessage" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "FullData" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "FullData" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "FullData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntityMovements' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
[32m[Nest] 2462286  - [39m12/08/2021, 2:06:30 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeCoreModule dependencies initialized[39m[38;5;3m +115ms[39m
[32m[Nest] 2462286  - [39m12/08/2021, 2:06:30 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +1ms[39m
Executing (default): SELECT 1+1 AS result
Executing (default): SELECT 1+1 AS result
[32m[Nest] 2462286  - [39m12/08/2021, 2:06:31 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeCoreModule dependencies initialized[39m[38;5;3m +1274ms[39m
[32m[Nest] 2462286  - [39m12/08/2021, 2:06:31 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTransactionsModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 2462286  - [39m12/08/2021, 2:06:31 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 2462286  - [39m12/08/2021, 2:06:31 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/}:[39m[38;5;3m +8ms[39m
[32m[Nest] 2462286  - [39m12/08/2021, 2:06:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/process-transactions/jeeves, GET} route[39m[38;5;3m +4ms[39m
[32m[Nest] 2462286  - [39m12/08/2021, 2:06:31 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 2462286  - [39m12/08/2021, 2:06:31 PM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +4ms[39m
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 866.5 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T19:04:55.549Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 866.5 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T19:04:55.549Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2659.17 2000 866.5
2659.17 1500 2659.17
2659.17 1000 2659.17
Executing (default): UPDATE "ExternalEntities" SET "extraData"=$1,"updatedAt"=$2 WHERE "code" = $3
email sent
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 12:59:01.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.67295,"AFN":96.25256,"ALL":106.8,"AMD":493.797441,"ANG":1.803347,"AOA":564,"ARS":101.3801,"AUD":1.393211,"AWG":1.8,"AZN":1.700805,"BAM":1.735538,"BBD":2,"BDT":85.847145,"BGN":1.72608,"BHD":0.377023,"BIF":1998,"BMD":1,"BND":1.364775,"BOB":6.909207,"BRL":5.5352,"BSD":1,"BTC":0.00001975056,"BTN":75.492834,"BWP":11.714245,"BYN":2.543903,"BZD":2.01693,"CAD":1.265065,"CDF":2002,"CHF":0.920653,"CLF":0.030433,"CLP":839.75,"CNH":6.345611,"CNY":6.3448,"COP":3887.541647,"CRC":634.600505,"CUC":1,"CUP":25.75,"CVE":98.025,"CZK":22.449908,"DJF":178,"DKK":6.55404,"DOP":56.75,"DZD":138.871758,"EGP":15.7231,"ERN":15.000155,"ETB":48.2,"EUR":0.881403,"FJD":2.121417,"FKP":0.755694,"GBP":0.755694,"GEL":3.105,"GGP":0.755694,"GHS":6.16,"GIP":0.755694,"GMD":52.525,"GNF":9352.5,"GTQ":7.734702,"GYD":209.457225,"HKD":7.79669,"HNL":24.159999,"HRK":6.6342,"HTG":99.95031,"HUF":322.196692,"IDR":14331.35,"ILS":3.09802,"IMP":0.755694,"INR":75.444053,"IQD":1459.5,"IRR":42275,"ISK":129.89,"JEP":0.755694,"JMD":154.984235,"JOD":0.709,"JPY":113.676,"KES":112.85,"KGS":84.797051,"KHR":4070,"KMF":434.625072,"KPW":900,"KRW":1172.76582,"KWD":0.302808,"KYD":0.833918,"KZT":437.116176,"LAK":10975,"LBP":1516.000002,"LKR":203.018068,"LRD":141.975008,"LSL":15.81,"LYD":4.605,"MAD":9.1775,"MDL":17.596432,"MGA":3970,"MKD":54.687187,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.335,"MUR":43.65,"MVR":15.45,"MWK":807.5,"MXN":20.949463,"MYR":4.2245,"MZN":63.875002,"NAD":15.81,"NGN":409.99,"NIO":35.225,"NOK":8.881096,"NPR":120.800464,"NZD":1.467718,"OMR":0.385034,"PAB":1,"PEN":4.0775,"PGK":3.53,"PHP":50.224002,"PKR":177.225,"PLN":4.068736,"PYG":6804.103506,"QAR":3.641,"RON":4.3618,"RSD":103.63,"RUB":73.5841,"RWF":1005,"SAR":3.75131,"SBD":8.077592,"SCR":12.814185,"SDG":437.5,"SEK":9.038386,"SGD":1.3618,"SHP":0.755694,"SLL":11129.99989,"SOS":584,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.995,"SVC":8.755413,"SYP":2512.5,"SZL":15.81,"THB":33.43,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.6718,"TTD":6.80388,"TWD":27.739499,"TZS":2303,"UAH":27.278982,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10800,"VES":4.6228,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":578.162462,"XAG":0.04457223,"XAU":0.00056035,"XCD":2.70255,"XDR":0.712861,"XOF":578.162462,"XPD":0.0005391,"XPF":105.179355,"XPT":0.00103951,"YER":250.274989,"ZAR":15.746737,"ZMW":17.310552,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T19:06:38.065Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T19:06:38.065Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2659.17 2000 2659.17
2659.17 1500 2659.17
2659.17 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 12:59:01.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.67295,"AFN":96.25256,"ALL":106.8,"AMD":493.797441,"ANG":1.803347,"AOA":564,"ARS":101.3801,"AUD":1.393211,"AWG":1.8,"AZN":1.700805,"BAM":1.735538,"BBD":2,"BDT":85.847145,"BGN":1.72608,"BHD":0.377023,"BIF":1998,"BMD":1,"BND":1.364775,"BOB":6.909207,"BRL":5.5352,"BSD":1,"BTC":0.00001975056,"BTN":75.492834,"BWP":11.714245,"BYN":2.543903,"BZD":2.01693,"CAD":1.265065,"CDF":2002,"CHF":0.920653,"CLF":0.030433,"CLP":839.75,"CNH":6.345611,"CNY":6.3448,"COP":3887.541647,"CRC":634.600505,"CUC":1,"CUP":25.75,"CVE":98.025,"CZK":22.449908,"DJF":178,"DKK":6.55404,"DOP":56.75,"DZD":138.871758,"EGP":15.7231,"ERN":15.000155,"ETB":48.2,"EUR":0.881403,"FJD":2.121417,"FKP":0.755694,"GBP":0.755694,"GEL":3.105,"GGP":0.755694,"GHS":6.16,"GIP":0.755694,"GMD":52.525,"GNF":9352.5,"GTQ":7.734702,"GYD":209.457225,"HKD":7.79669,"HNL":24.159999,"HRK":6.6342,"HTG":99.95031,"HUF":322.196692,"IDR":14331.35,"ILS":3.09802,"IMP":0.755694,"INR":75.444053,"IQD":1459.5,"IRR":42275,"ISK":129.89,"JEP":0.755694,"JMD":154.984235,"JOD":0.709,"JPY":113.676,"KES":112.85,"KGS":84.797051,"KHR":4070,"KMF":434.625072,"KPW":900,"KRW":1172.76582,"KWD":0.302808,"KYD":0.833918,"KZT":437.116176,"LAK":10975,"LBP":1516.000002,"LKR":203.018068,"LRD":141.975008,"LSL":15.81,"LYD":4.605,"MAD":9.1775,"MDL":17.596432,"MGA":3970,"MKD":54.687187,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.335,"MUR":43.65,"MVR":15.45,"MWK":807.5,"MXN":20.949463,"MYR":4.2245,"MZN":63.875002,"NAD":15.81,"NGN":409.99,"NIO":35.225,"NOK":8.881096,"NPR":120.800464,"NZD":1.467718,"OMR":0.385034,"PAB":1,"PEN":4.0775,"PGK":3.53,"PHP":50.224002,"PKR":177.225,"PLN":4.068736,"PYG":6804.103506,"QAR":3.641,"RON":4.3618,"RSD":103.63,"RUB":73.5841,"RWF":1005,"SAR":3.75131,"SBD":8.077592,"SCR":12.814185,"SDG":437.5,"SEK":9.038386,"SGD":1.3618,"SHP":0.755694,"SLL":11129.99989,"SOS":584,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.995,"SVC":8.755413,"SYP":2512.5,"SZL":15.81,"THB":33.43,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.6718,"TTD":6.80388,"TWD":27.739499,"TZS":2303,"UAH":27.278982,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10800,"VES":4.6228,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":578.162462,"XAG":0.04457223,"XAU":0.00056035,"XCD":2.70255,"XDR":0.712861,"XOF":578.162462,"XPD":0.0005391,"XPF":105.179355,"XPT":0.00103951,"YER":250.274989,"ZAR":15.746737,"ZMW":17.310552,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T19:30:02.967Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T19:30:02.967Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2659.17 2000 2659.17
2659.17 1500 2659.17
2659.17 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 12:59:01.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.67295,"AFN":96.25256,"ALL":106.8,"AMD":493.797441,"ANG":1.803347,"AOA":564,"ARS":101.3801,"AUD":1.393211,"AWG":1.8,"AZN":1.700805,"BAM":1.735538,"BBD":2,"BDT":85.847145,"BGN":1.72608,"BHD":0.377023,"BIF":1998,"BMD":1,"BND":1.364775,"BOB":6.909207,"BRL":5.5352,"BSD":1,"BTC":0.00001975056,"BTN":75.492834,"BWP":11.714245,"BYN":2.543903,"BZD":2.01693,"CAD":1.265065,"CDF":2002,"CHF":0.920653,"CLF":0.030433,"CLP":839.75,"CNH":6.345611,"CNY":6.3448,"COP":3887.541647,"CRC":634.600505,"CUC":1,"CUP":25.75,"CVE":98.025,"CZK":22.449908,"DJF":178,"DKK":6.55404,"DOP":56.75,"DZD":138.871758,"EGP":15.7231,"ERN":15.000155,"ETB":48.2,"EUR":0.881403,"FJD":2.121417,"FKP":0.755694,"GBP":0.755694,"GEL":3.105,"GGP":0.755694,"GHS":6.16,"GIP":0.755694,"GMD":52.525,"GNF":9352.5,"GTQ":7.734702,"GYD":209.457225,"HKD":7.79669,"HNL":24.159999,"HRK":6.6342,"HTG":99.95031,"HUF":322.196692,"IDR":14331.35,"ILS":3.09802,"IMP":0.755694,"INR":75.444053,"IQD":1459.5,"IRR":42275,"ISK":129.89,"JEP":0.755694,"JMD":154.984235,"JOD":0.709,"JPY":113.676,"KES":112.85,"KGS":84.797051,"KHR":4070,"KMF":434.625072,"KPW":900,"KRW":1172.76582,"KWD":0.302808,"KYD":0.833918,"KZT":437.116176,"LAK":10975,"LBP":1516.000002,"LKR":203.018068,"LRD":141.975008,"LSL":15.81,"LYD":4.605,"MAD":9.1775,"MDL":17.596432,"MGA":3970,"MKD":54.687187,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.335,"MUR":43.65,"MVR":15.45,"MWK":807.5,"MXN":20.949463,"MYR":4.2245,"MZN":63.875002,"NAD":15.81,"NGN":409.99,"NIO":35.225,"NOK":8.881096,"NPR":120.800464,"NZD":1.467718,"OMR":0.385034,"PAB":1,"PEN":4.0775,"PGK":3.53,"PHP":50.224002,"PKR":177.225,"PLN":4.068736,"PYG":6804.103506,"QAR":3.641,"RON":4.3618,"RSD":103.63,"RUB":73.5841,"RWF":1005,"SAR":3.75131,"SBD":8.077592,"SCR":12.814185,"SDG":437.5,"SEK":9.038386,"SGD":1.3618,"SHP":0.755694,"SLL":11129.99989,"SOS":584,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.995,"SVC":8.755413,"SYP":2512.5,"SZL":15.81,"THB":33.43,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.6718,"TTD":6.80388,"TWD":27.739499,"TZS":2303,"UAH":27.278982,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10800,"VES":4.6228,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":578.162462,"XAG":0.04457223,"XAU":0.00056035,"XCD":2.70255,"XDR":0.712861,"XOF":578.162462,"XPD":0.0005391,"XPF":105.179355,"XPT":0.00103951,"YER":250.274989,"ZAR":15.746737,"ZMW":17.310552,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T19:42:00.010Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T19:42:00.010Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2659.17 2000 2659.17
2659.17 1500 2659.17
2659.17 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 12:59:01.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.67295,"AFN":96.25256,"ALL":106.8,"AMD":493.797441,"ANG":1.803347,"AOA":564,"ARS":101.3779,"AUD":1.393072,"AWG":1.8,"AZN":1.700805,"BAM":1.735538,"BBD":2,"BDT":85.847145,"BGN":1.727039,"BHD":0.377021,"BIF":1998,"BMD":1,"BND":1.364775,"BOB":6.909207,"BRL":5.5352,"BSD":1,"BTC":0.000019830726,"BTN":75.492834,"BWP":11.714245,"BYN":2.543903,"BZD":2.01693,"CAD":1.265841,"CDF":2002,"CHF":0.919907,"CLF":0.030433,"CLP":839.75,"CNH":6.347692,"CNY":6.3448,"COP":3885.728703,"CRC":634.600505,"CUC":1,"CUP":25.75,"CVE":98.025,"CZK":22.441599,"DJF":178,"DKK":6.55175,"DOP":56.75,"DZD":138.86232,"EGP":15.7194,"ERN":15.000155,"ETB":48.2,"EUR":0.881098,"FJD":2.121417,"FKP":0.755605,"GBP":0.755605,"GEL":3.105,"GGP":0.755605,"GHS":6.16,"GIP":0.755605,"GMD":52.525,"GNF":9352.5,"GTQ":7.734702,"GYD":209.457225,"HKD":7.79715,"HNL":24.159999,"HRK":6.6313,"HTG":99.95031,"HUF":321.876149,"IDR":14324.25,"ILS":3.09802,"IMP":0.755605,"INR":75.42405,"IQD":1459.5,"IRR":42275,"ISK":129.87,"JEP":0.755605,"JMD":154.984235,"JOD":0.709,"JPY":113.6664,"KES":112.85,"KGS":84.797051,"KHR":4070,"KMF":434.625072,"KPW":900,"KRW":1172.21849,"KWD":0.30279,"KYD":0.833918,"KZT":437.116176,"LAK":10975,"LBP":1516.000002,"LKR":203.018068,"LRD":141.975008,"LSL":15.81,"LYD":4.605,"MAD":9.1775,"MDL":17.596432,"MGA":3970,"MKD":54.687187,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.335,"MUR":43.65,"MVR":15.45,"MWK":807.5,"MXN":20.959485,"MYR":4.2245,"MZN":63.875002,"NAD":15.81,"NGN":409.99,"NIO":35.225,"NOK":8.878708,"NPR":120.800464,"NZD":1.467115,"OMR":0.385005,"PAB":1,"PEN":4.0775,"PGK":3.53,"PHP":50.261007,"PKR":177.225,"PLN":4.06258,"PYG":6804.103506,"QAR":3.641,"RON":4.3604,"RSD":103.59218,"RUB":73.5958,"RWF":1005,"SAR":3.751398,"SBD":8.077592,"SCR":12.797977,"SDG":437.5,"SEK":9.035508,"SGD":1.3615,"SHP":0.755605,"SLL":11129.99989,"SOS":584,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.995,"SVC":8.755413,"SYP":2512.5,"SZL":15.81,"THB":33.44,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.6711,"TTD":6.80388,"TWD":27.731301,"TZS":2303,"UAH":27.278982,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10800,"VES":4.6228,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":577.962417,"XAG":0.0445157,"XAU":0.00056003,"XCD":2.70255,"XDR":0.712861,"XOF":577.962417,"XPD":0.00053754,"XPF":105.142962,"XPT":0.00103897,"YER":250.274989,"ZAR":15.712924,"ZMW":17.310552,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T20:00:02.903Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T20:00:02.903Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2659.17 2000 2659.17
2659.17 1500 2659.17
2659.17 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 12:59:01.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.67295,"AFN":96.25256,"ALL":106.8,"AMD":493.797441,"ANG":1.803347,"AOA":564,"ARS":101.3779,"AUD":1.393072,"AWG":1.8,"AZN":1.700805,"BAM":1.735538,"BBD":2,"BDT":85.847145,"BGN":1.727039,"BHD":0.377021,"BIF":1998,"BMD":1,"BND":1.364775,"BOB":6.909207,"BRL":5.5352,"BSD":1,"BTC":0.000019830726,"BTN":75.492834,"BWP":11.714245,"BYN":2.543903,"BZD":2.01693,"CAD":1.265841,"CDF":2002,"CHF":0.919907,"CLF":0.030433,"CLP":839.75,"CNH":6.347692,"CNY":6.3448,"COP":3885.728703,"CRC":634.600505,"CUC":1,"CUP":25.75,"CVE":98.025,"CZK":22.441599,"DJF":178,"DKK":6.55175,"DOP":56.75,"DZD":138.86232,"EGP":15.7194,"ERN":15.000155,"ETB":48.2,"EUR":0.881098,"FJD":2.121417,"FKP":0.755605,"GBP":0.755605,"GEL":3.105,"GGP":0.755605,"GHS":6.16,"GIP":0.755605,"GMD":52.525,"GNF":9352.5,"GTQ":7.734702,"GYD":209.457225,"HKD":7.79715,"HNL":24.159999,"HRK":6.6313,"HTG":99.95031,"HUF":321.876149,"IDR":14324.25,"ILS":3.09802,"IMP":0.755605,"INR":75.42405,"IQD":1459.5,"IRR":42275,"ISK":129.87,"JEP":0.755605,"JMD":154.984235,"JOD":0.709,"JPY":113.6664,"KES":112.85,"KGS":84.797051,"KHR":4070,"KMF":434.625072,"KPW":900,"KRW":1172.21849,"KWD":0.30279,"KYD":0.833918,"KZT":437.116176,"LAK":10975,"LBP":1516.000002,"LKR":203.018068,"LRD":141.975008,"LSL":15.81,"LYD":4.605,"MAD":9.1775,"MDL":17.596432,"MGA":3970,"MKD":54.687187,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.335,"MUR":43.65,"MVR":15.45,"MWK":807.5,"MXN":20.959485,"MYR":4.2245,"MZN":63.875002,"NAD":15.81,"NGN":409.99,"NIO":35.225,"NOK":8.878708,"NPR":120.800464,"NZD":1.467115,"OMR":0.385005,"PAB":1,"PEN":4.0775,"PGK":3.53,"PHP":50.261007,"PKR":177.225,"PLN":4.06258,"PYG":6804.103506,"QAR":3.641,"RON":4.3604,"RSD":103.59218,"RUB":73.5958,"RWF":1005,"SAR":3.751398,"SBD":8.077592,"SCR":12.797977,"SDG":437.5,"SEK":9.035508,"SGD":1.3615,"SHP":0.755605,"SLL":11129.99989,"SOS":584,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.995,"SVC":8.755413,"SYP":2512.5,"SZL":15.81,"THB":33.44,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.6711,"TTD":6.80388,"TWD":27.731301,"TZS":2303,"UAH":27.278982,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10800,"VES":4.6228,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":577.962417,"XAG":0.0445157,"XAU":0.00056003,"XCD":2.70255,"XDR":0.712861,"XOF":577.962417,"XPD":0.00053754,"XPF":105.142962,"XPT":0.00103897,"YER":250.274989,"ZAR":15.712924,"ZMW":17.310552,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T20:30:02.974Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T12:59:01.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T20:30:02.974Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2618.53 2000 2659.17
2618.53 1500 2659.17
2618.53 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 12:59:01.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.67295,"AFN":96.25256,"ALL":106.8,"AMD":493.797441,"ANG":1.803347,"AOA":564,"ARS":101.3918,"AUD":1.393495,"AWG":1.8,"AZN":1.700805,"BAM":1.735538,"BBD":2,"BDT":85.847145,"BGN":1.725558,"BHD":0.377021,"BIF":1998,"BMD":1,"BND":1.364775,"BOB":6.909207,"BRL":5.5301,"BSD":1,"BTC":0.000019659732,"BTN":75.492834,"BWP":11.714245,"BYN":2.543903,"BZD":2.01693,"CAD":1.265028,"CDF":2002,"CHF":0.919985,"CLF":0.030433,"CLP":839.75,"CNH":6.346791,"CNY":6.3448,"COP":3885.879717,"CRC":634.600505,"CUC":1,"CUP":25.75,"CVE":98.025,"CZK":22.44635,"DJF":178,"DKK":6.55233,"DOP":56.75,"DZD":138.860681,"EGP":15.7234,"ERN":15.000155,"ETB":48.2,"EUR":0.881158,"FJD":2.125,"FKP":0.75613,"GBP":0.75613,"GEL":3.105,"GGP":0.75613,"GHS":6.16,"GIP":0.75613,"GMD":52.525,"GNF":9352.5,"GTQ":7.734702,"GYD":209.457225,"HKD":7.79831,"HNL":24.159999,"HRK":6.629,"HTG":99.95031,"HUF":322.015595,"IDR":14324.7,"ILS":3.09802,"IMP":0.75613,"INR":75.432756,"IQD":1460.5,"IRR":42275,"ISK":129.9,"JEP":0.75613,"JMD":154.984235,"JOD":0.709,"JPY":113.6667,"KES":112.85,"KGS":84.797051,"KHR":4070,"KMF":434.625072,"KPW":900,"KRW":1172.478656,"KWD":0.302797,"KYD":0.833918,"KZT":437.116176,"LAK":10975,"LBP":1528.173805,"LKR":203.018068,"LRD":141.975008,"LSL":15.81,"LYD":4.605,"MAD":9.155,"MDL":17.596432,"MGA":3970,"MKD":54.687187,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.65,"MVR":15.45,"MWK":807.5,"MXN":20.93304,"MYR":4.2245,"MZN":63.875002,"NAD":15.81,"NGN":409.99,"NIO":35.225,"NOK":8.866545,"NPR":120.800464,"NZD":1.46722,"OMR":0.38502,"PAB":1,"PEN":4.078,"PGK":3.53,"PHP":50.270501,"PKR":177.225,"PLN":4.061524,"PYG":6804.103506,"QAR":3.641,"RON":4.3602,"RSD":103.605,"RUB":73.626,"RWF":1005,"SAR":3.751046,"SBD":8.077592,"SCR":12.791297,"SDG":437.5,"SEK":9.032462,"SGD":1.361705,"SHP":0.75613,"SLL":11129.99989,"SOS":584,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.995,"SVC":8.755413,"SYP":2512.5,"SZL":15.81,"THB":33.439999,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.687785,"TTD":6.80388,"TWD":27.729299,"TZS":2303,"UAH":27.278982,"UGX":3570.145093,"USD":1,"UYU":44.165459,"UZS":10800,"VES":4.6321,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":578.001841,"XAG":0.04449491,"XAU":0.00055993,"XCD":2.70255,"XDR":0.712861,"XOF":578.001841,"XPD":0.00053765,"XPF":105.150134,"XPT":0.00103951,"YER":250.274989,"ZAR":15.70995,"ZMW":17.310552,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T21:00:03.932Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T21:00:03.932Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2618.53 2000 2659.17
2618.53 1500 2659.17
2618.53 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-312838'
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.67295,"AFN":96.25256,"ALL":106.8,"AMD":493.797441,"ANG":1.803347,"AOA":564,"ARS":101.3918,"AUD":1.393495,"AWG":1.8,"AZN":1.700805,"BAM":1.735538,"BBD":2,"BDT":85.847145,"BGN":1.725558,"BHD":0.377021,"BIF":1998,"BMD":1,"BND":1.364775,"BOB":6.909207,"BRL":5.5301,"BSD":1,"BTC":0.000019659732,"BTN":75.492834,"BWP":11.714245,"BYN":2.543903,"BZD":2.01693,"CAD":1.265028,"CDF":2002,"CHF":0.919985,"CLF":0.030433,"CLP":839.75,"CNH":6.346791,"CNY":6.3448,"COP":3885.879717,"CRC":634.600505,"CUC":1,"CUP":25.75,"CVE":98.025,"CZK":22.44635,"DJF":178,"DKK":6.55233,"DOP":56.75,"DZD":138.860681,"EGP":15.7234,"ERN":15.000155,"ETB":48.2,"EUR":0.881158,"FJD":2.125,"FKP":0.75613,"GBP":0.75613,"GEL":3.105,"GGP":0.75613,"GHS":6.16,"GIP":0.75613,"GMD":52.525,"GNF":9352.5,"GTQ":7.734702,"GYD":209.457225,"HKD":7.79831,"HNL":24.159999,"HRK":6.629,"HTG":99.95031,"HUF":322.015595,"IDR":14324.7,"ILS":3.09802,"IMP":0.75613,"INR":75.432756,"IQD":1460.5,"IRR":42275,"ISK":129.9,"JEP":0.75613,"JMD":154.984235,"JOD":0.709,"JPY":113.6667,"KES":112.85,"KGS":84.797051,"KHR":4070,"KMF":434.625072,"KPW":900,"KRW":1172.478656,"KWD":0.302797,"KYD":0.833918,"KZT":437.116176,"LAK":10975,"LBP":1528.173805,"LKR":203.018068,"LRD":141.975008,"LSL":15.81,"LYD":4.605,"MAD":9.155,"MDL":17.596432,"MGA":3970,"MKD":54.687187,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.65,"MVR":15.45,"MWK":807.5,"MXN":20.93304,"MYR":4.2245,"MZN":63.875002,"NAD":15.81,"NGN":409.99,"NIO":35.225,"NOK":8.866545,"NPR":120.800464,"NZD":1.46722,"OMR":0.38502,"PAB":1,"PEN":4.078,"PGK":3.53,"PHP":50.270501,"PKR":177.225,"PLN":4.061524,"PYG":6804.103506,"QAR":3.641,"RON":4.3602,"RSD":103.605,"RUB":73.626,"RWF":1005,"SAR":3.751046,"SBD":8.077592,"SCR":12.791297,"SDG":437.5,"SEK":9.032462,"SGD":1.361705,"SHP":0.75613,"SLL":11129.99989,"SOS":584,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.995,"SVC":8.755413,"SYP":2512.5,"SZL":15.81,"THB":33.439999,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.687785,"TTD":6.80388,"TWD":27.729299,"TZS":2303,"UAH":27.278982,"UGX":3570.145093,"USD":1,"UYU":44.165459,"UZS":10800,"VES":4.6321,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":578.001841,"XAG":0.04449491,"XAU":0.00055993,"XCD":2.70255,"XDR":0.712861,"XOF":578.001841,"XPD":0.00053765,"XPF":105.150134,"XPT":0.00103951,"YER":250.274989,"ZAR":15.70995,"ZMW":17.310552,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T21:30:03.929Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T21:30:03.929Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2618.53 2000 2659.17
2618.53 1500 2659.17
2618.53 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672979,"AFN":96.25256,"ALL":107.164118,"AMD":493.797441,"ANG":1.803347,"AOA":564,"ARS":101.379556,"AUD":1.394434,"AWG":1.8,"AZN":1.700805,"BAM":1.735538,"BBD":2,"BDT":85.847145,"BGN":1.725558,"BHD":0.377023,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.535443,"BSD":1,"BTC":0.000019725709,"BTN":75.492834,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.265289,"CDF":2002.073813,"CHF":0.920571,"CLF":0.030424,"CLP":839.583333,"CNH":6.345933,"CNY":6.344717,"COP":3892.482435,"CRC":634.600505,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.450934,"DJF":178.107284,"DKK":6.556044,"DOP":56.764921,"DZD":138.954062,"EGP":15.720694,"ERN":15.000155,"ETB":48.225514,"EUR":0.881607,"FJD":2.124,"FKP":0.757352,"GBP":0.757352,"GEL":3.105,"GGP":0.757352,"GHS":6.171248,"GIP":0.757352,"GMD":52.4,"GNF":9442.648568,"GTQ":7.734702,"GYD":209.457225,"HKD":7.797792,"HNL":24.163309,"HRK":6.6342,"HTG":99.95031,"HUF":321.930539,"IDR":14328.255269,"ILS":3.098638,"IMP":0.757352,"INR":75.383488,"IQD":1460.129199,"IRR":42275,"ISK":129.923333,"JEP":0.757352,"JMD":154.984235,"JOD":0.709,"JPY":113.70768029,"KES":112.921142,"KGS":84.797051,"KHR":4072.655598,"KMF":434.625072,"KPW":900,"KRW":1173.27963,"KWD":0.302786,"KYD":0.833918,"KZT":437.116176,"LAK":10969.215102,"LBP":1528.939044,"LKR":203.018068,"LRD":141.975008,"LSL":15.79481,"LYD":4.603982,"MAD":9.20513,"MDL":17.638186,"MGA":3970.533375,"MKD":54.687187,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.533716,"MVR":15.45,"MWK":813.47013,"MXN":20.938009,"MYR":4.2245,"MZN":63.857001,"NAD":15.81,"NGN":410.744773,"NIO":35.240885,"NOK":8.880172,"NPR":120.800464,"NZD":1.468513,"OMR":0.384988,"PAB":1,"PEN":4.079574,"PGK":3.51997,"PHP":50.233652,"PKR":177.35,"PLN":4.066747,"PYG":6844.194629,"QAR":3.641,"RON":4.363648,"RSD":103.666821,"RUB":73.59491,"RWF":1024.160949,"SAR":3.751221,"SBD":8.080841,"SCR":12.939961,"SDG":437.5,"SEK":9.04078,"SGD":1.361213,"SHP":0.757352,"SLL":11129.99989,"SOS":580.889823,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.486085,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.674312,"TTD":6.80388,"TWD":27.725314,"TZS":2303,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.173256,"UZS":10793.255674,"VES":4.6321,"VND":22960.210138,"VUV":112.698305,"WST":2.587451,"XAF":578.295987,"XAG":0.04458858,"XAU":0.00056084,"XCD":2.70255,"XDR":0.712861,"XOF":578.295987,"XPD":0.00053873,"XPF":105.203645,"XPT":0.0010404,"YER":250.274989,"ZAR":15.71245,"ZMW":17.310552,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T22:00:03.627Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T22:00:03.627Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2618.53 2000 2659.17
2618.53 1500 2659.17
2618.53 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-312838'
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672979,"AFN":96.25256,"ALL":107.164118,"AMD":493.797441,"ANG":1.803347,"AOA":564,"ARS":101.379556,"AUD":1.394434,"AWG":1.8,"AZN":1.700805,"BAM":1.735538,"BBD":2,"BDT":85.847145,"BGN":1.725558,"BHD":0.377023,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.535443,"BSD":1,"BTC":0.000019725709,"BTN":75.492834,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.265289,"CDF":2002.073813,"CHF":0.920571,"CLF":0.030424,"CLP":839.583333,"CNH":6.345933,"CNY":6.344717,"COP":3892.482435,"CRC":634.600505,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.450934,"DJF":178.107284,"DKK":6.556044,"DOP":56.764921,"DZD":138.954062,"EGP":15.720694,"ERN":15.000155,"ETB":48.225514,"EUR":0.881607,"FJD":2.124,"FKP":0.757352,"GBP":0.757352,"GEL":3.105,"GGP":0.757352,"GHS":6.171248,"GIP":0.757352,"GMD":52.4,"GNF":9442.648568,"GTQ":7.734702,"GYD":209.457225,"HKD":7.797792,"HNL":24.163309,"HRK":6.6342,"HTG":99.95031,"HUF":321.930539,"IDR":14328.255269,"ILS":3.098638,"IMP":0.757352,"INR":75.383488,"IQD":1460.129199,"IRR":42275,"ISK":129.923333,"JEP":0.757352,"JMD":154.984235,"JOD":0.709,"JPY":113.70768029,"KES":112.921142,"KGS":84.797051,"KHR":4072.655598,"KMF":434.625072,"KPW":900,"KRW":1173.27963,"KWD":0.302786,"KYD":0.833918,"KZT":437.116176,"LAK":10969.215102,"LBP":1528.939044,"LKR":203.018068,"LRD":141.975008,"LSL":15.79481,"LYD":4.603982,"MAD":9.20513,"MDL":17.638186,"MGA":3970.533375,"MKD":54.687187,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.533716,"MVR":15.45,"MWK":813.47013,"MXN":20.938009,"MYR":4.2245,"MZN":63.857001,"NAD":15.81,"NGN":410.744773,"NIO":35.240885,"NOK":8.880172,"NPR":120.800464,"NZD":1.468513,"OMR":0.384988,"PAB":1,"PEN":4.079574,"PGK":3.51997,"PHP":50.233652,"PKR":177.35,"PLN":4.066747,"PYG":6844.194629,"QAR":3.641,"RON":4.363648,"RSD":103.666821,"RUB":73.59491,"RWF":1024.160949,"SAR":3.751221,"SBD":8.080841,"SCR":12.939961,"SDG":437.5,"SEK":9.04078,"SGD":1.361213,"SHP":0.757352,"SLL":11129.99989,"SOS":580.889823,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.486085,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.674312,"TTD":6.80388,"TWD":27.725314,"TZS":2303,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.173256,"UZS":10793.255674,"VES":4.6321,"VND":22960.210138,"VUV":112.698305,"WST":2.587451,"XAF":578.295987,"XAG":0.04458858,"XAU":0.00056084,"XCD":2.70255,"XDR":0.712861,"XOF":578.295987,"XPD":0.00053873,"XPF":105.203645,"XPT":0.0010404,"YER":250.274989,"ZAR":15.71245,"ZMW":17.310552,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T22:30:03.598Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T22:30:03.598Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2618.53 2000 2659.17
2618.53 1500 2659.17
2618.53 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672979,"AFN":96.25256,"ALL":107.164118,"AMD":493.797441,"ANG":1.803347,"AOA":564,"ARS":101.3817,"AUD":1.395501,"AWG":1.8,"AZN":1.700805,"BAM":1.735538,"BBD":2,"BDT":85.847145,"BGN":1.724255,"BHD":0.376989,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.533199,"BSD":1,"BTC":0.000019836061,"BTN":75.492834,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.265051,"CDF":2002.073813,"CHF":0.920753,"CLF":0.030424,"CLP":839.583333,"CNH":6.345298,"CNY":6.344717,"COP":3888.59998,"CRC":634.600505,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.4437,"DJF":178.107284,"DKK":6.556168,"DOP":56.764921,"DZD":138.972913,"EGP":15.7211,"ERN":15.000155,"ETB":48.225514,"EUR":0.88168,"FJD":2.124,"FKP":0.757237,"GBP":0.757237,"GEL":3.105,"GGP":0.757237,"GHS":6.171248,"GIP":0.757237,"GMD":52.4,"GNF":9442.648568,"GTQ":7.734702,"GYD":209.457225,"HKD":7.797618,"HNL":24.163309,"HRK":6.6354,"HTG":99.95031,"HUF":321.707386,"IDR":14347,"ILS":3.098638,"IMP":0.757237,"INR":75.37445,"IQD":1460.129199,"IRR":42275,"ISK":129.97,"JEP":0.757237,"JMD":154.984235,"JOD":0.709,"JPY":113.74572222,"KES":112.921142,"KGS":84.797051,"KHR":4072.655598,"KMF":434.625072,"KPW":900,"KRW":1173.103205,"KWD":0.302885,"KYD":0.833918,"KZT":437.116176,"LAK":10969.215102,"LBP":1528.939044,"LKR":203.018068,"LRD":141.975008,"LSL":15.79481,"LYD":4.603982,"MAD":9.20513,"MDL":17.638186,"MGA":3970.533375,"MKD":54.687187,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.653453,"MVR":15.45,"MWK":813.47013,"MXN":20.936802,"MYR":4.2245,"MZN":63.857001,"NAD":15.81,"NGN":410.744773,"NIO":35.240885,"NOK":8.888448,"NPR":120.800464,"NZD":1.469448,"OMR":0.385039,"PAB":1,"PEN":4.079574,"PGK":3.51997,"PHP":50.334996,"PKR":177.35,"PLN":4.066349,"PYG":6844.194629,"QAR":3.641,"RON":4.3637,"RSD":103.68,"RUB":73.562,"RWF":1024.160949,"SAR":3.751284,"SBD":8.080841,"SCR":12.762093,"SDG":437.5,"SEK":9.042618,"SGD":1.36174,"SHP":0.757237,"SLL":11129.99989,"SOS":580.889823,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.445,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.666375,"TTD":6.80388,"TWD":27.6552,"TZS":2303,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.173256,"UZS":10793.255674,"VES":4.6321,"VND":22930.525346,"VUV":112.698305,"WST":2.587451,"XAF":578.344115,"XAG":0.04456336,"XAU":0.00056084,"XCD":2.70255,"XDR":0.712861,"XOF":578.344115,"XPD":0.00053855,"XPF":105.212401,"XPT":0.00104168,"YER":250.274989,"ZAR":15.72007,"ZMW":17.310552,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T23:00:04.020Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T23:00:04.020Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2618.53 2000 2659.17
2618.53 1500 2659.17
2618.53 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-312838'
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672979,"AFN":96.25256,"ALL":107.164118,"AMD":493.797441,"ANG":1.803347,"AOA":564,"ARS":101.3817,"AUD":1.395501,"AWG":1.8,"AZN":1.700805,"BAM":1.735538,"BBD":2,"BDT":85.847145,"BGN":1.724255,"BHD":0.376989,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.533199,"BSD":1,"BTC":0.000019836061,"BTN":75.492834,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.265051,"CDF":2002.073813,"CHF":0.920753,"CLF":0.030424,"CLP":839.583333,"CNH":6.345298,"CNY":6.344717,"COP":3888.59998,"CRC":634.600505,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.4437,"DJF":178.107284,"DKK":6.556168,"DOP":56.764921,"DZD":138.972913,"EGP":15.7211,"ERN":15.000155,"ETB":48.225514,"EUR":0.88168,"FJD":2.124,"FKP":0.757237,"GBP":0.757237,"GEL":3.105,"GGP":0.757237,"GHS":6.171248,"GIP":0.757237,"GMD":52.4,"GNF":9442.648568,"GTQ":7.734702,"GYD":209.457225,"HKD":7.797618,"HNL":24.163309,"HRK":6.6354,"HTG":99.95031,"HUF":321.707386,"IDR":14347,"ILS":3.098638,"IMP":0.757237,"INR":75.37445,"IQD":1460.129199,"IRR":42275,"ISK":129.97,"JEP":0.757237,"JMD":154.984235,"JOD":0.709,"JPY":113.74572222,"KES":112.921142,"KGS":84.797051,"KHR":4072.655598,"KMF":434.625072,"KPW":900,"KRW":1173.103205,"KWD":0.302885,"KYD":0.833918,"KZT":437.116176,"LAK":10969.215102,"LBP":1528.939044,"LKR":203.018068,"LRD":141.975008,"LSL":15.79481,"LYD":4.603982,"MAD":9.20513,"MDL":17.638186,"MGA":3970.533375,"MKD":54.687187,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.653453,"MVR":15.45,"MWK":813.47013,"MXN":20.936802,"MYR":4.2245,"MZN":63.857001,"NAD":15.81,"NGN":410.744773,"NIO":35.240885,"NOK":8.888448,"NPR":120.800464,"NZD":1.469448,"OMR":0.385039,"PAB":1,"PEN":4.079574,"PGK":3.51997,"PHP":50.334996,"PKR":177.35,"PLN":4.066349,"PYG":6844.194629,"QAR":3.641,"RON":4.3637,"RSD":103.68,"RUB":73.562,"RWF":1024.160949,"SAR":3.751284,"SBD":8.080841,"SCR":12.762093,"SDG":437.5,"SEK":9.042618,"SGD":1.36174,"SHP":0.757237,"SLL":11129.99989,"SOS":580.889823,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.445,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.666375,"TTD":6.80388,"TWD":27.6552,"TZS":2303,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.173256,"UZS":10793.255674,"VES":4.6321,"VND":22930.525346,"VUV":112.698305,"WST":2.587451,"XAF":578.344115,"XAG":0.04456336,"XAU":0.00056084,"XCD":2.70255,"XDR":0.712861,"XOF":578.344115,"XPD":0.00053855,"XPF":105.212401,"XPT":0.00104168,"YER":250.274989,"ZAR":15.72007,"ZMW":17.310552,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T23:30:03.293Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-08T23:30:03.293Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2618.53 2000 2659.17
2618.53 1500 2659.17
2618.53 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672979,"AFN":96.25256,"ALL":107.164118,"AMD":493.797441,"ANG":1.803347,"AOA":564,"ARS":101.3827,"AUD":1.394943,"AWG":1.8,"AZN":1.700805,"BAM":1.735538,"BBD":2,"BDT":85.847145,"BGN":1.724345,"BHD":0.377017,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.533101,"BSD":1,"BTC":0.000019794561,"BTN":75.492834,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.265258,"CDF":2002.073813,"CHF":0.920242,"CLF":0.030424,"CLP":839.583333,"CNH":6.34553,"CNY":6.3447,"COP":3887.618937,"CRC":634.600505,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.4398,"DJF":178.107284,"DKK":6.554844,"DOP":56.764921,"DZD":138.959106,"EGP":15.7211,"ERN":15.000155,"ETB":48.225514,"EUR":0.8815,"FJD":2.125,"FKP":0.757056,"GBP":0.757056,"GEL":3.105,"GGP":0.757056,"GHS":6.171248,"GIP":0.757056,"GMD":52.4,"GNF":9442.648568,"GTQ":7.734702,"GYD":209.457225,"HKD":7.79805,"HNL":24.163309,"HRK":6.633,"HTG":99.95031,"HUF":321.67,"IDR":14347,"ILS":3.098638,"IMP":0.757056,"INR":75.383546,"IQD":1460.129199,"IRR":42275,"ISK":129.94,"JEP":0.757056,"JMD":154.984235,"JOD":0.709,"JPY":113.685,"KES":112.921142,"KGS":84.797051,"KHR":4072.655598,"KMF":434.625072,"KPW":900,"KRW":1172.65,"KWD":0.302875,"KYD":0.833918,"KZT":437.116176,"LAK":10969.215102,"LBP":1528.939044,"LKR":203.018068,"LRD":141.975008,"LSL":15.79481,"LYD":4.603982,"MAD":9.20513,"MDL":17.638186,"MGA":3970.533375,"MKD":54.334509,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.651878,"MVR":15.45,"MWK":813.47013,"MXN":20.940799,"MYR":4.2205,"MZN":63.857001,"NAD":15.81,"NGN":410.744773,"NIO":35.240885,"NOK":8.87701,"NPR":120.800464,"NZD":1.469076,"OMR":0.385013,"PAB":1,"PEN":4.079574,"PGK":3.51997,"PHP":50.334999,"PKR":177.35,"PLN":4.063983,"PYG":6844.194629,"QAR":3.641,"RON":4.3625,"RSD":103.708399,"RUB":73.561,"RWF":1024.160949,"SAR":3.751356,"SBD":8.080841,"SCR":12.761475,"SDG":437.5,"SEK":9.035385,"SGD":1.36163,"SHP":0.757056,"SLL":11129.99989,"SOS":580.889823,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.45,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.66513,"TTD":6.80388,"TWD":27.646101,"TZS":2300,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.145959,"UZS":10793.255674,"VES":4.6321,"VND":22930.525346,"VUV":112.698305,"WST":2.587451,"XAF":578.22607,"XAG":0.04453748,"XAU":0.00056063,"XCD":2.70255,"XDR":0.712861,"XOF":578.22607,"XPD":0.00053823,"XPF":105.190926,"XPT":0.00104059,"YER":250.274989,"ZAR":15.708933,"ZMW":17.310552,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T00:00:04.104Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T00:00:04.104Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2618.53 2000 2659.17
2618.53 1500 2659.17
2618.53 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-312838'
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672979,"AFN":96.25256,"ALL":107.164118,"AMD":493.797441,"ANG":1.803347,"AOA":564,"ARS":101.3827,"AUD":1.394943,"AWG":1.8,"AZN":1.700805,"BAM":1.735538,"BBD":2,"BDT":85.847145,"BGN":1.724345,"BHD":0.377017,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.533101,"BSD":1,"BTC":0.000019794561,"BTN":75.492834,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.265258,"CDF":2002.073813,"CHF":0.920242,"CLF":0.030424,"CLP":839.583333,"CNH":6.34553,"CNY":6.3447,"COP":3887.618937,"CRC":634.600505,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.4398,"DJF":178.107284,"DKK":6.554844,"DOP":56.764921,"DZD":138.959106,"EGP":15.7211,"ERN":15.000155,"ETB":48.225514,"EUR":0.8815,"FJD":2.125,"FKP":0.757056,"GBP":0.757056,"GEL":3.105,"GGP":0.757056,"GHS":6.171248,"GIP":0.757056,"GMD":52.4,"GNF":9442.648568,"GTQ":7.734702,"GYD":209.457225,"HKD":7.79805,"HNL":24.163309,"HRK":6.633,"HTG":99.95031,"HUF":321.67,"IDR":14347,"ILS":3.098638,"IMP":0.757056,"INR":75.383546,"IQD":1460.129199,"IRR":42275,"ISK":129.94,"JEP":0.757056,"JMD":154.984235,"JOD":0.709,"JPY":113.685,"KES":112.921142,"KGS":84.797051,"KHR":4072.655598,"KMF":434.625072,"KPW":900,"KRW":1172.65,"KWD":0.302875,"KYD":0.833918,"KZT":437.116176,"LAK":10969.215102,"LBP":1528.939044,"LKR":203.018068,"LRD":141.975008,"LSL":15.79481,"LYD":4.603982,"MAD":9.20513,"MDL":17.638186,"MGA":3970.533375,"MKD":54.334509,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.651878,"MVR":15.45,"MWK":813.47013,"MXN":20.940799,"MYR":4.2205,"MZN":63.857001,"NAD":15.81,"NGN":410.744773,"NIO":35.240885,"NOK":8.87701,"NPR":120.800464,"NZD":1.469076,"OMR":0.385013,"PAB":1,"PEN":4.079574,"PGK":3.51997,"PHP":50.334999,"PKR":177.35,"PLN":4.063983,"PYG":6844.194629,"QAR":3.641,"RON":4.3625,"RSD":103.708399,"RUB":73.561,"RWF":1024.160949,"SAR":3.751356,"SBD":8.080841,"SCR":12.761475,"SDG":437.5,"SEK":9.035385,"SGD":1.36163,"SHP":0.757056,"SLL":11129.99989,"SOS":580.889823,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.45,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.66513,"TTD":6.80388,"TWD":27.646101,"TZS":2300,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.145959,"UZS":10793.255674,"VES":4.6321,"VND":22930.525346,"VUV":112.698305,"WST":2.587451,"XAF":578.22607,"XAG":0.04453748,"XAU":0.00056063,"XCD":2.70255,"XDR":0.712861,"XOF":578.22607,"XPD":0.00053823,"XPF":105.190926,"XPT":0.00104059,"YER":250.274989,"ZAR":15.708933,"ZMW":17.310552,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T00:30:03.436Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T00:30:03.436Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2618.53 2000 2659.17
2618.53 1500 2659.17
2618.53 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672979,"AFN":96.25256,"ALL":107.164118,"AMD":493.797441,"ANG":1.803347,"AOA":564,"ARS":101.3801,"AUD":1.39665,"AWG":1.8,"AZN":1.700805,"BAM":1.735538,"BBD":2,"BDT":85.847145,"BGN":1.72433,"BHD":0.377056,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.5334,"BSD":1,"BTC":0.000019746327,"BTN":75.492834,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.265877,"CDF":2002.073813,"CHF":0.920861,"CLF":0.030424,"CLP":839.5,"CNH":6.34535,"CNY":6.3447,"COP":3888.902466,"CRC":634.600505,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.4522,"DJF":178.107284,"DKK":6.557389,"DOP":56.764921,"DZD":138.98,"EGP":15.7207,"ERN":15.000155,"ETB":48.225514,"EUR":0.881718,"FJD":2.125,"FKP":0.757309,"GBP":0.757309,"GEL":3.105,"GGP":0.757309,"GHS":6.171248,"GIP":0.757309,"GMD":52.4,"GNF":9442.648568,"GTQ":7.734702,"GYD":209.457225,"HKD":7.79775,"HNL":24.163309,"HRK":6.636,"HTG":99.95031,"HUF":322.04,"IDR":14312,"ILS":3.098638,"IMP":0.757309,"INR":75.420046,"IQD":1460.129199,"IRR":42275,"ISK":129.99,"JEP":0.757309,"JMD":154.984235,"JOD":0.709,"JPY":113.78266667,"KES":112.85,"KGS":84.797051,"KHR":4072.655598,"KMF":434.625072,"KPW":900,"KRW":1174.367769,"KWD":0.302879,"KYD":0.833918,"KZT":437.116176,"LAK":10969.215102,"LBP":1528.939044,"LKR":203.018068,"LRD":141.975008,"LSL":15.79481,"LYD":4.603982,"MAD":9.20513,"MDL":17.638186,"MGA":3970.533375,"MKD":54.334509,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.648869,"MVR":15.45,"MWK":813.47013,"MXN":20.947145,"MYR":4.216,"MZN":63.857001,"NAD":15.81,"NGN":409.99,"NIO":35.240885,"NOK":8.883502,"NPR":120.800464,"NZD":1.469529,"OMR":0.385018,"PAB":1,"PEN":4.079574,"PGK":3.51997,"PHP":50.2275,"PKR":177.35,"PLN":4.071175,"PYG":6844.194629,"QAR":3.641,"RON":4.364,"RSD":103.747997,"RUB":73.629,"RWF":1024.160949,"SAR":3.751576,"SBD":8.080841,"SCR":12.768397,"SDG":437.5,"SEK":9.0374,"SGD":1.361938,"SHP":0.757309,"SLL":11129.99989,"SOS":580.889823,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.37,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.6782,"TTD":6.80388,"TWD":27.710501,"TZS":2300,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.145959,"UZS":10793.255674,"VES":4.6321,"VND":22930.525346,"VUV":112.698305,"WST":2.587451,"XAF":578.368833,"XAG":0.04452661,"XAU":0.00056041,"XCD":2.70255,"XDR":0.712861,"XOF":578.368833,"XPD":0.00053693,"XPF":105.216898,"XPT":0.00104168,"YER":250.274989,"ZAR":15.742676,"ZMW":17.310552,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T01:00:04.820Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T01:00:04.820Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2618.53 2000 2659.17
2618.53 1500 2659.17
2618.53 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-312838'
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672979,"AFN":96.25256,"ALL":107.164118,"AMD":493.797441,"ANG":1.803347,"AOA":564,"ARS":101.3801,"AUD":1.39665,"AWG":1.8,"AZN":1.700805,"BAM":1.735538,"BBD":2,"BDT":85.847145,"BGN":1.72433,"BHD":0.377056,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.5334,"BSD":1,"BTC":0.000019746327,"BTN":75.492834,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.265877,"CDF":2002.073813,"CHF":0.920861,"CLF":0.030424,"CLP":839.5,"CNH":6.34535,"CNY":6.3447,"COP":3888.902466,"CRC":634.600505,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.4522,"DJF":178.107284,"DKK":6.557389,"DOP":56.764921,"DZD":138.98,"EGP":15.7207,"ERN":15.000155,"ETB":48.225514,"EUR":0.881718,"FJD":2.125,"FKP":0.757309,"GBP":0.757309,"GEL":3.105,"GGP":0.757309,"GHS":6.171248,"GIP":0.757309,"GMD":52.4,"GNF":9442.648568,"GTQ":7.734702,"GYD":209.457225,"HKD":7.79775,"HNL":24.163309,"HRK":6.636,"HTG":99.95031,"HUF":322.04,"IDR":14312,"ILS":3.098638,"IMP":0.757309,"INR":75.420046,"IQD":1460.129199,"IRR":42275,"ISK":129.99,"JEP":0.757309,"JMD":154.984235,"JOD":0.709,"JPY":113.78266667,"KES":112.85,"KGS":84.797051,"KHR":4072.655598,"KMF":434.625072,"KPW":900,"KRW":1174.367769,"KWD":0.302879,"KYD":0.833918,"KZT":437.116176,"LAK":10969.215102,"LBP":1528.939044,"LKR":203.018068,"LRD":141.975008,"LSL":15.79481,"LYD":4.603982,"MAD":9.20513,"MDL":17.638186,"MGA":3970.533375,"MKD":54.334509,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.648869,"MVR":15.45,"MWK":813.47013,"MXN":20.947145,"MYR":4.216,"MZN":63.857001,"NAD":15.81,"NGN":409.99,"NIO":35.240885,"NOK":8.883502,"NPR":120.800464,"NZD":1.469529,"OMR":0.385018,"PAB":1,"PEN":4.079574,"PGK":3.51997,"PHP":50.2275,"PKR":177.35,"PLN":4.071175,"PYG":6844.194629,"QAR":3.641,"RON":4.364,"RSD":103.747997,"RUB":73.629,"RWF":1024.160949,"SAR":3.751576,"SBD":8.080841,"SCR":12.768397,"SDG":437.5,"SEK":9.0374,"SGD":1.361938,"SHP":0.757309,"SLL":11129.99989,"SOS":580.889823,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.37,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.6782,"TTD":6.80388,"TWD":27.710501,"TZS":2300,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.145959,"UZS":10793.255674,"VES":4.6321,"VND":22930.525346,"VUV":112.698305,"WST":2.587451,"XAF":578.368833,"XAG":0.04452661,"XAU":0.00056041,"XCD":2.70255,"XDR":0.712861,"XOF":578.368833,"XPD":0.00053693,"XPF":105.216898,"XPT":0.00104168,"YER":250.274989,"ZAR":15.742676,"ZMW":17.310552,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T01:30:03.311Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T01:30:03.311Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2618.53 2000 2659.17
2618.53 1500 2659.17
2618.53 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672979,"AFN":96.25256,"ALL":107.164118,"AMD":493.797441,"ANG":1.803347,"AOA":564,"ARS":101.3854,"AUD":1.3961,"AWG":1.8,"AZN":1.700805,"BAM":1.735538,"BBD":2,"BDT":85.847145,"BGN":1.72498,"BHD":0.377056,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.533,"BSD":1,"BTC":0.000019858336,"BTN":75.492834,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.266718,"CDF":2002.073813,"CHF":0.921276,"CLF":0.030424,"CLP":839.5,"CNH":6.344175,"CNY":6.3457,"COP":3891.021191,"CRC":634.600505,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.4646,"DJF":178.107284,"DKK":6.56048,"DOP":56.764921,"DZD":138.996217,"EGP":15.7213,"ERN":15.000155,"ETB":48.225514,"EUR":0.882257,"FJD":2.125,"FKP":0.757546,"GBP":0.757546,"GEL":3.105,"GGP":0.757546,"GHS":6.171248,"GIP":0.757546,"GMD":52.4,"GNF":9442.648568,"GTQ":7.734702,"GYD":209.457225,"HKD":7.79825,"HNL":24.163309,"HRK":6.6383,"HTG":99.95031,"HUF":322.455,"IDR":14314.3,"ILS":3.098638,"IMP":0.757546,"INR":75.425,"IQD":1460.129199,"IRR":42275,"ISK":130.05,"JEP":0.757546,"JMD":154.984235,"JOD":0.709,"JPY":113.722,"KES":112.85,"KGS":84.797051,"KHR":4072.655598,"KMF":434.625072,"KPW":900,"KRW":1173.825514,"KWD":0.302862,"KYD":0.833918,"KZT":437.116176,"LAK":10969.215102,"LBP":1528.939044,"LKR":203.018068,"LRD":141.975008,"LSL":15.79481,"LYD":4.603982,"MAD":9.20513,"MDL":17.638186,"MGA":3970.533375,"MKD":54.334509,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.651634,"MVR":15.45,"MWK":813.47013,"MXN":20.949246,"MYR":4.218,"MZN":63.857001,"NAD":15.81,"NGN":409.99,"NIO":35.240885,"NOK":8.892598,"NPR":120.800464,"NZD":1.469995,"OMR":0.384995,"PAB":1,"PEN":4.079574,"PGK":3.51997,"PHP":50.251002,"PKR":177.35,"PLN":4.072392,"PYG":6844.194629,"QAR":3.641,"RON":4.3659,"RSD":103.721095,"RUB":73.5913,"RWF":1024.160949,"SAR":3.75161,"SBD":8.080841,"SCR":12.772602,"SDG":437.5,"SEK":9.046845,"SGD":1.36217,"SHP":0.757546,"SLL":11129.99989,"SOS":580.889823,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.378998,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.662765,"TTD":6.80388,"TWD":27.6995,"TZS":2300,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.145959,"UZS":10793.255674,"VES":4.6321,"VND":22938.417912,"VUV":112.698305,"WST":2.587451,"XAF":578.722951,"XAG":0.04464489,"XAU":0.00056039,"XCD":2.70255,"XDR":0.712861,"XOF":578.722951,"XPD":0.0005366,"XPF":105.281319,"XPT":0.00104276,"YER":250.274989,"ZAR":15.7376,"ZMW":17.310552,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T02:00:03.986Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T02:00:03.986Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2618.53 2000 2659.17
2618.53 1500 2659.17
2618.53 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-312838'
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672979,"AFN":96.25256,"ALL":107.164118,"AMD":493.797441,"ANG":1.803347,"AOA":564,"ARS":101.3854,"AUD":1.3961,"AWG":1.8,"AZN":1.700805,"BAM":1.735538,"BBD":2,"BDT":85.847145,"BGN":1.72498,"BHD":0.377056,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.533,"BSD":1,"BTC":0.000019858336,"BTN":75.492834,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.266718,"CDF":2002.073813,"CHF":0.921276,"CLF":0.030424,"CLP":839.5,"CNH":6.344175,"CNY":6.3457,"COP":3891.021191,"CRC":634.600505,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.4646,"DJF":178.107284,"DKK":6.56048,"DOP":56.764921,"DZD":138.996217,"EGP":15.7213,"ERN":15.000155,"ETB":48.225514,"EUR":0.882257,"FJD":2.125,"FKP":0.757546,"GBP":0.757546,"GEL":3.105,"GGP":0.757546,"GHS":6.171248,"GIP":0.757546,"GMD":52.4,"GNF":9442.648568,"GTQ":7.734702,"GYD":209.457225,"HKD":7.79825,"HNL":24.163309,"HRK":6.6383,"HTG":99.95031,"HUF":322.455,"IDR":14314.3,"ILS":3.098638,"IMP":0.757546,"INR":75.425,"IQD":1460.129199,"IRR":42275,"ISK":130.05,"JEP":0.757546,"JMD":154.984235,"JOD":0.709,"JPY":113.722,"KES":112.85,"KGS":84.797051,"KHR":4072.655598,"KMF":434.625072,"KPW":900,"KRW":1173.825514,"KWD":0.302862,"KYD":0.833918,"KZT":437.116176,"LAK":10969.215102,"LBP":1528.939044,"LKR":203.018068,"LRD":141.975008,"LSL":15.79481,"LYD":4.603982,"MAD":9.20513,"MDL":17.638186,"MGA":3970.533375,"MKD":54.334509,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.651634,"MVR":15.45,"MWK":813.47013,"MXN":20.949246,"MYR":4.218,"MZN":63.857001,"NAD":15.81,"NGN":409.99,"NIO":35.240885,"NOK":8.892598,"NPR":120.800464,"NZD":1.469995,"OMR":0.384995,"PAB":1,"PEN":4.079574,"PGK":3.51997,"PHP":50.251002,"PKR":177.35,"PLN":4.072392,"PYG":6844.194629,"QAR":3.641,"RON":4.3659,"RSD":103.721095,"RUB":73.5913,"RWF":1024.160949,"SAR":3.75161,"SBD":8.080841,"SCR":12.772602,"SDG":437.5,"SEK":9.046845,"SGD":1.36217,"SHP":0.757546,"SLL":11129.99989,"SOS":580.889823,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.378998,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.662765,"TTD":6.80388,"TWD":27.6995,"TZS":2300,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.145959,"UZS":10793.255674,"VES":4.6321,"VND":22938.417912,"VUV":112.698305,"WST":2.587451,"XAF":578.722951,"XAG":0.04464489,"XAU":0.00056039,"XCD":2.70255,"XDR":0.712861,"XOF":578.722951,"XPD":0.0005366,"XPF":105.281319,"XPT":0.00104276,"YER":250.274989,"ZAR":15.7376,"ZMW":17.310552,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T02:30:03.203Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T02:30:03.203Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2618.53 2000 2659.17
2618.53 1500 2659.17
2618.53 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672979,"AFN":97.372693,"ALL":106.787132,"AMD":490.957033,"ANG":1.803347,"AOA":564,"ARS":101.3764,"AUD":1.3961,"AWG":1.8,"AZN":1.700805,"BAM":1.725509,"BBD":2,"BDT":85.847145,"BGN":1.725945,"BHD":0.376957,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.533,"BSD":1,"BTC":0.000020037834,"BTN":75.058575,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.26553,"CDF":1990.630662,"CHF":0.9214,"CLF":0.030424,"CLP":839.5,"CNH":6.34315,"CNY":6.345,"COP":3891.172617,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.465233,"DJF":177.111784,"DKK":6.5611,"DOP":56.448283,"DZD":139.006,"EGP":15.719,"ERN":15.000155,"ETB":47.965033,"EUR":0.88234,"FJD":2.125,"FKP":0.757785,"GBP":0.757785,"GEL":3.105,"GGP":0.757785,"GHS":6.143205,"GIP":0.757785,"GMD":52.4,"GNF":9448.076935,"GTQ":7.734702,"GYD":209.457225,"HKD":7.79845,"HNL":24.037478,"HRK":6.6395,"HTG":99.376249,"HUF":322.367764,"IDR":14344.2,"ILS":3.098638,"IMP":0.757785,"INR":75.39384,"IQD":1451.484147,"IRR":42275,"ISK":130.06,"JEP":0.757785,"JMD":154.984235,"JOD":0.709,"JPY":113.732,"KES":112.32,"KGS":84.797051,"KHR":4051.087716,"KMF":434.625072,"KPW":900,"KRW":1173.415,"KWD":0.302819,"KYD":0.833918,"KZT":437.116176,"LAK":10902.831725,"LBP":1504.215714,"LKR":201.830624,"LRD":141.975008,"LSL":15.688852,"LYD":4.603982,"MAD":9.185164,"MDL":17.596432,"MGA":3970.533375,"MKD":54.372372,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.647818,"MVR":15.45,"MWK":812.752673,"MXN":20.933425,"MYR":4.2175,"MZN":63.857001,"NAD":15.81,"NGN":408.89,"NIO":35.049007,"NOK":8.882,"NPR":120.09386,"NZD":1.469335,"OMR":0.384941,"PAB":1,"PEN":4.057151,"PGK":3.51997,"PHP":50.276499,"PKR":176.71221,"PLN":4.072988,"PYG":6804.86874,"QAR":3.641,"RON":4.3667,"RSD":103.737726,"RUB":73.5542,"RWF":1030.975619,"SAR":3.751478,"SBD":8.080841,"SCR":12.774067,"SDG":437.5,"SEK":9.0437,"SGD":1.36275,"SHP":0.757785,"SLL":11129.99989,"SOS":575.489533,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.410001,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.6568,"TTD":6.80388,"TWD":27.6878,"TZS":2300,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.145959,"UZS":10793.255674,"VES":4.6321,"VND":22977.946029,"VUV":112.698305,"WST":2.587451,"XAF":578.77738,"XAG":0.04469477,"XAU":0.00056072,"XCD":2.70255,"XDR":0.712861,"XOF":578.77738,"XPD":0.00053625,"XPF":105.291221,"XPT":0.0010427,"YER":250.274989,"ZAR":15.7371,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T03:00:03.815Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T03:00:03.815Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2618.53 2000 2659.17
2618.53 1500 2659.17
2618.53 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-312838'
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672979,"AFN":97.372693,"ALL":106.787132,"AMD":490.957033,"ANG":1.803347,"AOA":564,"ARS":101.3764,"AUD":1.3961,"AWG":1.8,"AZN":1.700805,"BAM":1.725509,"BBD":2,"BDT":85.847145,"BGN":1.725945,"BHD":0.376957,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.533,"BSD":1,"BTC":0.000020037834,"BTN":75.058575,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.26553,"CDF":1990.630662,"CHF":0.9214,"CLF":0.030424,"CLP":839.5,"CNH":6.34315,"CNY":6.345,"COP":3891.172617,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.465233,"DJF":177.111784,"DKK":6.5611,"DOP":56.448283,"DZD":139.006,"EGP":15.719,"ERN":15.000155,"ETB":47.965033,"EUR":0.88234,"FJD":2.125,"FKP":0.757785,"GBP":0.757785,"GEL":3.105,"GGP":0.757785,"GHS":6.143205,"GIP":0.757785,"GMD":52.4,"GNF":9448.076935,"GTQ":7.734702,"GYD":209.457225,"HKD":7.79845,"HNL":24.037478,"HRK":6.6395,"HTG":99.376249,"HUF":322.367764,"IDR":14344.2,"ILS":3.098638,"IMP":0.757785,"INR":75.39384,"IQD":1451.484147,"IRR":42275,"ISK":130.06,"JEP":0.757785,"JMD":154.984235,"JOD":0.709,"JPY":113.732,"KES":112.32,"KGS":84.797051,"KHR":4051.087716,"KMF":434.625072,"KPW":900,"KRW":1173.415,"KWD":0.302819,"KYD":0.833918,"KZT":437.116176,"LAK":10902.831725,"LBP":1504.215714,"LKR":201.830624,"LRD":141.975008,"LSL":15.688852,"LYD":4.603982,"MAD":9.185164,"MDL":17.596432,"MGA":3970.533375,"MKD":54.372372,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.647818,"MVR":15.45,"MWK":812.752673,"MXN":20.933425,"MYR":4.2175,"MZN":63.857001,"NAD":15.81,"NGN":408.89,"NIO":35.049007,"NOK":8.882,"NPR":120.09386,"NZD":1.469335,"OMR":0.384941,"PAB":1,"PEN":4.057151,"PGK":3.51997,"PHP":50.276499,"PKR":176.71221,"PLN":4.072988,"PYG":6804.86874,"QAR":3.641,"RON":4.3667,"RSD":103.737726,"RUB":73.5542,"RWF":1030.975619,"SAR":3.751478,"SBD":8.080841,"SCR":12.774067,"SDG":437.5,"SEK":9.0437,"SGD":1.36275,"SHP":0.757785,"SLL":11129.99989,"SOS":575.489533,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.410001,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.6568,"TTD":6.80388,"TWD":27.6878,"TZS":2300,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.145959,"UZS":10793.255674,"VES":4.6321,"VND":22977.946029,"VUV":112.698305,"WST":2.587451,"XAF":578.77738,"XAG":0.04469477,"XAU":0.00056072,"XCD":2.70255,"XDR":0.712861,"XOF":578.77738,"XPD":0.00053625,"XPF":105.291221,"XPT":0.0010427,"YER":250.274989,"ZAR":15.7371,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T03:30:03.295Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T03:30:03.295Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2618.53 2000 2659.17
2618.53 1500 2659.17
2618.53 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672979,"AFN":97.372693,"ALL":106.787132,"AMD":490.957033,"ANG":1.803347,"AOA":564,"ARS":101.3805,"AUD":1.395511,"AWG":1.8,"AZN":1.700805,"BAM":1.725509,"BBD":2,"BDT":85.847145,"BGN":1.72554,"BHD":0.377057,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.533,"BSD":1,"BTC":0.000020134051,"BTN":75.058575,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.266288,"CDF":1990.630662,"CHF":0.920748,"CLF":0.030424,"CLP":839.5,"CNH":6.342697,"CNY":6.3445,"COP":3891.095187,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.4605,"DJF":177.111784,"DKK":6.560395,"DOP":56.448283,"DZD":139.011578,"EGP":15.7168,"ERN":15.000155,"ETB":47.965033,"EUR":0.88234,"FJD":2.125,"FKP":0.75725,"GBP":0.75725,"GEL":3.105,"GGP":0.75725,"GHS":6.143205,"GIP":0.75725,"GMD":52.4,"GNF":9448.076935,"GTQ":7.734702,"GYD":209.457225,"HKD":7.797974,"HNL":24.037478,"HRK":6.6407,"HTG":99.376249,"HUF":322.287,"IDR":14352.333514,"ILS":3.098638,"IMP":0.75725,"INR":75.458507,"IQD":1451.484147,"IRR":42275,"ISK":130.04,"JEP":0.75725,"JMD":154.984235,"JOD":0.709,"JPY":113.65877778,"KES":112.32,"KGS":84.797051,"KHR":4051.087716,"KMF":434.625072,"KPW":900,"KRW":1173.826662,"KWD":0.302855,"KYD":0.833918,"KZT":437.116176,"LAK":10902.831725,"LBP":1504.215714,"LKR":201.830624,"LRD":141.975008,"LSL":15.688852,"LYD":4.603982,"MAD":9.185164,"MDL":17.596432,"MGA":3970.533375,"MKD":54.372372,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.379999,"MVR":15.45,"MWK":812.752673,"MXN":20.936746,"MYR":4.211,"MZN":63.857001,"NAD":15.81,"NGN":408.89,"NIO":35.049007,"NOK":8.8795,"NPR":120.09386,"NZD":1.469057,"OMR":0.38499,"PAB":1,"PEN":4.057151,"PGK":3.51997,"PHP":50.299251,"PKR":176.71221,"PLN":4.072423,"PYG":6804.86874,"QAR":3.641,"RON":4.3669,"RSD":103.797298,"RUB":73.5854,"RWF":1030.975619,"SAR":3.751278,"SBD":8.080841,"SCR":12.775645,"SDG":437.5,"SEK":9.0428,"SGD":1.363232,"SHP":0.75725,"SLL":11129.99989,"SOS":575.489533,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.434503,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.6471,"TTD":6.80388,"TWD":27.695,"TZS":2300,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10793.255674,"VES":4.6321,"VND":22959.479247,"VUV":112.698305,"WST":2.587451,"XAF":578.777087,"XAG":0.04461501,"XAU":0.00056054,"XCD":2.70255,"XDR":0.712861,"XOF":578.777087,"XPD":0.00053434,"XPF":105.291167,"XPT":0.00104168,"YER":250.274989,"ZAR":15.7322,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T04:00:04.153Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T04:00:04.153Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2618.53 2000 2659.17
2618.53 1500 2659.17
2618.53 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-312838'
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672979,"AFN":97.372693,"ALL":106.787132,"AMD":490.957033,"ANG":1.803347,"AOA":564,"ARS":101.3805,"AUD":1.395511,"AWG":1.8,"AZN":1.700805,"BAM":1.725509,"BBD":2,"BDT":85.847145,"BGN":1.72554,"BHD":0.377057,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.533,"BSD":1,"BTC":0.000020134051,"BTN":75.058575,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.266288,"CDF":1990.630662,"CHF":0.920748,"CLF":0.030424,"CLP":839.5,"CNH":6.342697,"CNY":6.3445,"COP":3891.095187,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.4605,"DJF":177.111784,"DKK":6.560395,"DOP":56.448283,"DZD":139.011578,"EGP":15.7168,"ERN":15.000155,"ETB":47.965033,"EUR":0.88234,"FJD":2.125,"FKP":0.75725,"GBP":0.75725,"GEL":3.105,"GGP":0.75725,"GHS":6.143205,"GIP":0.75725,"GMD":52.4,"GNF":9448.076935,"GTQ":7.734702,"GYD":209.457225,"HKD":7.797974,"HNL":24.037478,"HRK":6.6407,"HTG":99.376249,"HUF":322.287,"IDR":14352.333514,"ILS":3.098638,"IMP":0.75725,"INR":75.458507,"IQD":1451.484147,"IRR":42275,"ISK":130.04,"JEP":0.75725,"JMD":154.984235,"JOD":0.709,"JPY":113.65877778,"KES":112.32,"KGS":84.797051,"KHR":4051.087716,"KMF":434.625072,"KPW":900,"KRW":1173.826662,"KWD":0.302855,"KYD":0.833918,"KZT":437.116176,"LAK":10902.831725,"LBP":1504.215714,"LKR":201.830624,"LRD":141.975008,"LSL":15.688852,"LYD":4.603982,"MAD":9.185164,"MDL":17.596432,"MGA":3970.533375,"MKD":54.372372,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.379999,"MVR":15.45,"MWK":812.752673,"MXN":20.936746,"MYR":4.211,"MZN":63.857001,"NAD":15.81,"NGN":408.89,"NIO":35.049007,"NOK":8.8795,"NPR":120.09386,"NZD":1.469057,"OMR":0.38499,"PAB":1,"PEN":4.057151,"PGK":3.51997,"PHP":50.299251,"PKR":176.71221,"PLN":4.072423,"PYG":6804.86874,"QAR":3.641,"RON":4.3669,"RSD":103.797298,"RUB":73.5854,"RWF":1030.975619,"SAR":3.751278,"SBD":8.080841,"SCR":12.775645,"SDG":437.5,"SEK":9.0428,"SGD":1.363232,"SHP":0.75725,"SLL":11129.99989,"SOS":575.489533,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.434503,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.6471,"TTD":6.80388,"TWD":27.695,"TZS":2300,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10793.255674,"VES":4.6321,"VND":22959.479247,"VUV":112.698305,"WST":2.587451,"XAF":578.777087,"XAG":0.04461501,"XAU":0.00056054,"XCD":2.70255,"XDR":0.712861,"XOF":578.777087,"XPD":0.00053434,"XPF":105.291167,"XPT":0.00104168,"YER":250.274989,"ZAR":15.7322,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T04:30:04.237Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T04:30:04.237Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2618.53 2000 2659.17
2618.53 1500 2659.17
2618.53 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672979,"AFN":97.372693,"ALL":106.787132,"AMD":490.957033,"ANG":1.803347,"AOA":564,"ARS":101.382655,"AUD":1.393923,"AWG":1.8,"AZN":1.700805,"BAM":1.725509,"BBD":2,"BDT":85.847145,"BGN":1.72572,"BHD":0.377056,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.5336,"BSD":1,"BTC":0.000020084834,"BTN":75.058575,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.266874,"CDF":1990.630662,"CHF":0.920405,"CLF":0.030424,"CLP":839.5,"CNH":6.340583,"CNY":6.3439,"COP":3889.96154,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.4618,"DJF":177.111784,"DKK":6.55955,"DOP":56.448283,"DZD":138.99685,"EGP":15.7201,"ERN":15.000155,"ETB":47.965033,"EUR":0.882093,"FJD":2.125,"FKP":0.756962,"GBP":0.756962,"GEL":3.105,"GGP":0.756962,"GHS":6.143205,"GIP":0.756962,"GMD":52.4,"GNF":9448.076935,"GTQ":7.734702,"GYD":209.457225,"HKD":7.797915,"HNL":24.037478,"HRK":6.6377,"HTG":99.376249,"HUF":322.25,"IDR":14357.776489,"ILS":3.098638,"IMP":0.756962,"INR":75.51116,"IQD":1451.484147,"IRR":42275,"ISK":130.03,"JEP":0.756962,"JMD":154.984235,"JOD":0.709,"JPY":113.6024,"KES":112.32,"KGS":84.797051,"KHR":4051.087716,"KMF":434.625072,"KPW":900,"KRW":1173.750556,"KWD":0.30276,"KYD":0.833918,"KZT":437.116176,"LAK":10902.831725,"LBP":1504.215714,"LKR":201.830624,"LRD":141.975008,"LSL":15.688852,"LYD":4.603982,"MAD":9.185164,"MDL":17.596432,"MGA":3970.533375,"MKD":54.372372,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.849999,"MVR":15.45,"MWK":812.752673,"MXN":20.9373,"MYR":4.21,"MZN":63.857001,"NAD":15.81,"NGN":408.89,"NIO":35.049007,"NOK":8.878473,"NPR":120.09386,"NZD":1.467804,"OMR":0.385021,"PAB":1,"PEN":4.057151,"PGK":3.51997,"PHP":50.3155,"PKR":176.71221,"PLN":4.07147,"PYG":6804.86874,"QAR":3.641,"RON":4.3659,"RSD":103.724084,"RUB":73.5698,"RWF":1030.975619,"SAR":3.751551,"SBD":8.080841,"SCR":12.775249,"SDG":437.5,"SEK":9.0399,"SGD":1.36257,"SHP":0.756962,"SLL":11129.99989,"SOS":575.489533,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.415001,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.6516,"TTD":6.80388,"TWD":27.6975,"TZS":2300,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10793.255674,"VES":4.6321,"VND":22951.577019,"VUV":112.698305,"WST":2.587451,"XAF":578.615171,"XAG":0.04458323,"XAU":0.00055991,"XCD":2.70255,"XDR":0.712861,"XOF":578.615171,"XPD":0.00053465,"XPF":105.261711,"XPT":0.00104156,"YER":250.274989,"ZAR":15.72765,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T05:00:04.227Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T05:00:04.227Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2618.53 2000 2659.17
2618.53 1500 2659.17
2618.53 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-312838'
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672979,"AFN":97.372693,"ALL":106.787132,"AMD":490.957033,"ANG":1.803347,"AOA":564,"ARS":101.382655,"AUD":1.393923,"AWG":1.8,"AZN":1.700805,"BAM":1.725509,"BBD":2,"BDT":85.847145,"BGN":1.72572,"BHD":0.377056,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.5336,"BSD":1,"BTC":0.000020084834,"BTN":75.058575,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.266874,"CDF":1990.630662,"CHF":0.920405,"CLF":0.030424,"CLP":839.5,"CNH":6.340583,"CNY":6.3439,"COP":3889.96154,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.4618,"DJF":177.111784,"DKK":6.55955,"DOP":56.448283,"DZD":138.99685,"EGP":15.7201,"ERN":15.000155,"ETB":47.965033,"EUR":0.882093,"FJD":2.125,"FKP":0.756962,"GBP":0.756962,"GEL":3.105,"GGP":0.756962,"GHS":6.143205,"GIP":0.756962,"GMD":52.4,"GNF":9448.076935,"GTQ":7.734702,"GYD":209.457225,"HKD":7.797915,"HNL":24.037478,"HRK":6.6377,"HTG":99.376249,"HUF":322.25,"IDR":14357.776489,"ILS":3.098638,"IMP":0.756962,"INR":75.51116,"IQD":1451.484147,"IRR":42275,"ISK":130.03,"JEP":0.756962,"JMD":154.984235,"JOD":0.709,"JPY":113.6024,"KES":112.32,"KGS":84.797051,"KHR":4051.087716,"KMF":434.625072,"KPW":900,"KRW":1173.750556,"KWD":0.30276,"KYD":0.833918,"KZT":437.116176,"LAK":10902.831725,"LBP":1504.215714,"LKR":201.830624,"LRD":141.975008,"LSL":15.688852,"LYD":4.603982,"MAD":9.185164,"MDL":17.596432,"MGA":3970.533375,"MKD":54.372372,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.849999,"MVR":15.45,"MWK":812.752673,"MXN":20.9373,"MYR":4.21,"MZN":63.857001,"NAD":15.81,"NGN":408.89,"NIO":35.049007,"NOK":8.878473,"NPR":120.09386,"NZD":1.467804,"OMR":0.385021,"PAB":1,"PEN":4.057151,"PGK":3.51997,"PHP":50.3155,"PKR":176.71221,"PLN":4.07147,"PYG":6804.86874,"QAR":3.641,"RON":4.3659,"RSD":103.724084,"RUB":73.5698,"RWF":1030.975619,"SAR":3.751551,"SBD":8.080841,"SCR":12.775249,"SDG":437.5,"SEK":9.0399,"SGD":1.36257,"SHP":0.756962,"SLL":11129.99989,"SOS":575.489533,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.415001,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.6516,"TTD":6.80388,"TWD":27.6975,"TZS":2300,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10793.255674,"VES":4.6321,"VND":22951.577019,"VUV":112.698305,"WST":2.587451,"XAF":578.615171,"XAG":0.04458323,"XAU":0.00055991,"XCD":2.70255,"XDR":0.712861,"XOF":578.615171,"XPD":0.00053465,"XPF":105.261711,"XPT":0.00104156,"YER":250.274989,"ZAR":15.72765,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T05:05:03.840Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T05:05:03.840Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2618.53 2000 2659.17
2618.53 1500 2659.17
2618.53 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672979,"AFN":97.372693,"ALL":106.787132,"AMD":490.957033,"ANG":1.803347,"AOA":564,"ARS":101.382655,"AUD":1.393923,"AWG":1.8,"AZN":1.700805,"BAM":1.725509,"BBD":2,"BDT":85.847145,"BGN":1.72572,"BHD":0.377056,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.5336,"BSD":1,"BTC":0.000020084834,"BTN":75.058575,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.266874,"CDF":1990.630662,"CHF":0.920405,"CLF":0.030424,"CLP":839.5,"CNH":6.340583,"CNY":6.3439,"COP":3889.96154,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.4618,"DJF":177.111784,"DKK":6.55955,"DOP":56.448283,"DZD":138.99685,"EGP":15.7201,"ERN":15.000155,"ETB":47.965033,"EUR":0.882093,"FJD":2.125,"FKP":0.756962,"GBP":0.756962,"GEL":3.105,"GGP":0.756962,"GHS":6.143205,"GIP":0.756962,"GMD":52.4,"GNF":9448.076935,"GTQ":7.734702,"GYD":209.457225,"HKD":7.797915,"HNL":24.037478,"HRK":6.6377,"HTG":99.376249,"HUF":322.25,"IDR":14357.776489,"ILS":3.098638,"IMP":0.756962,"INR":75.51116,"IQD":1451.484147,"IRR":42275,"ISK":130.03,"JEP":0.756962,"JMD":154.984235,"JOD":0.709,"JPY":113.6024,"KES":112.32,"KGS":84.797051,"KHR":4051.087716,"KMF":434.625072,"KPW":900,"KRW":1173.750556,"KWD":0.30276,"KYD":0.833918,"KZT":437.116176,"LAK":10902.831725,"LBP":1504.215714,"LKR":201.830624,"LRD":141.975008,"LSL":15.688852,"LYD":4.603982,"MAD":9.185164,"MDL":17.596432,"MGA":3970.533375,"MKD":54.372372,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.849999,"MVR":15.45,"MWK":812.752673,"MXN":20.9373,"MYR":4.21,"MZN":63.857001,"NAD":15.81,"NGN":408.89,"NIO":35.049007,"NOK":8.878473,"NPR":120.09386,"NZD":1.467804,"OMR":0.385021,"PAB":1,"PEN":4.057151,"PGK":3.51997,"PHP":50.3155,"PKR":176.71221,"PLN":4.07147,"PYG":6804.86874,"QAR":3.641,"RON":4.3659,"RSD":103.724084,"RUB":73.5698,"RWF":1030.975619,"SAR":3.751551,"SBD":8.080841,"SCR":12.775249,"SDG":437.5,"SEK":9.0399,"SGD":1.36257,"SHP":0.756962,"SLL":11129.99989,"SOS":575.489533,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.415001,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.6516,"TTD":6.80388,"TWD":27.6975,"TZS":2300,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10793.255674,"VES":4.6321,"VND":22951.577019,"VUV":112.698305,"WST":2.587451,"XAF":578.615171,"XAG":0.04458323,"XAU":0.00055991,"XCD":2.70255,"XDR":0.712861,"XOF":578.615171,"XPD":0.00053465,"XPF":105.261711,"XPT":0.00104156,"YER":250.274989,"ZAR":15.72765,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T05:30:03.754Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T05:30:03.754Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2717.24 2000 2659.17
2717.24 1500 2659.17
2717.24 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-312838'
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672979,"AFN":97.372693,"ALL":106.787132,"AMD":490.957033,"ANG":1.803347,"AOA":564,"ARS":101.3765,"AUD":1.393425,"AWG":1.8,"AZN":1.700805,"BAM":1.725509,"BBD":2,"BDT":85.847145,"BGN":1.72587,"BHD":0.376992,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.5335,"BSD":1,"BTC":0.00002005564,"BTN":75.058575,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.266909,"CDF":1990.630662,"CHF":0.921038,"CLF":0.030424,"CLP":839.5,"CNH":6.341845,"CNY":6.3445,"COP":3893.293817,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.476153,"DJF":177.111784,"DKK":6.565008,"DOP":56.448283,"DZD":139.008309,"EGP":15.7119,"ERN":15.000155,"ETB":47.965033,"EUR":0.882867,"FJD":2.125,"FKP":0.757131,"GBP":0.757131,"GEL":3.105,"GGP":0.757131,"GHS":6.143205,"GIP":0.757131,"GMD":52.4,"GNF":9448.076935,"GTQ":7.734702,"GYD":209.457225,"HKD":7.797935,"HNL":24.037478,"HRK":6.6424,"HTG":99.376249,"HUF":322.613946,"IDR":14357,"ILS":3.098638,"IMP":0.757131,"INR":75.495001,"IQD":1451.484147,"IRR":42275,"ISK":130.14,"JEP":0.757131,"JMD":154.984235,"JOD":0.709,"JPY":113.63333333,"KES":112.9,"KGS":84.797051,"KHR":4051.087716,"KMF":434.625072,"KPW":900,"KRW":1173.454561,"KWD":0.302805,"KYD":0.833918,"KZT":437.116176,"LAK":10902.831725,"LBP":1504.215714,"LKR":201.830624,"LRD":141.975008,"LSL":15.688852,"LYD":4.603982,"MAD":9.185164,"MDL":17.596432,"MGA":3970.533375,"MKD":54.372372,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.649998,"MVR":15.45,"MWK":812.752673,"MXN":20.936899,"MYR":4.212,"MZN":63.857001,"NAD":15.81,"NGN":408.89,"NIO":35.049007,"NOK":8.88647,"NPR":120.09386,"NZD":1.467851,"OMR":0.385008,"PAB":1,"PEN":4.057151,"PGK":3.51997,"PHP":50.351503,"PKR":176.71221,"PLN":4.072685,"PYG":6804.86874,"QAR":3.641,"RON":4.3694,"RSD":103.800343,"RUB":73.5672,"RWF":1030.975619,"SAR":3.750912,"SBD":8.080841,"SCR":12.775249,"SDG":437.5,"SEK":9.047962,"SGD":1.362825,"SHP":0.757131,"SLL":11129.99989,"SOS":575.489533,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.44,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.6737,"TTD":6.80388,"TWD":27.696329,"TZS":2300,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10793.255674,"VES":4.6321,"VND":22951.577019,"VUV":112.698305,"WST":2.587451,"XAF":579.122671,"XAG":0.04454347,"XAU":0.00055994,"XCD":2.70255,"XDR":0.712861,"XOF":579.122671,"XPD":0.00053607,"XPF":105.354036,"XPT":0.00104039,"YER":250.274989,"ZAR":15.72758,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T06:00:04.531Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T06:00:04.531Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2717.24 2000 2659.17
2717.24 1500 2659.17
2717.24 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672979,"AFN":97.372693,"ALL":106.787132,"AMD":490.957033,"ANG":1.803347,"AOA":564,"ARS":101.3765,"AUD":1.393425,"AWG":1.8,"AZN":1.700805,"BAM":1.725509,"BBD":2,"BDT":85.847145,"BGN":1.72587,"BHD":0.376992,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.5335,"BSD":1,"BTC":0.00002005564,"BTN":75.058575,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.266909,"CDF":1990.630662,"CHF":0.921038,"CLF":0.030424,"CLP":839.5,"CNH":6.341845,"CNY":6.3445,"COP":3893.293817,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.476153,"DJF":177.111784,"DKK":6.565008,"DOP":56.448283,"DZD":139.008309,"EGP":15.7119,"ERN":15.000155,"ETB":47.965033,"EUR":0.882867,"FJD":2.125,"FKP":0.757131,"GBP":0.757131,"GEL":3.105,"GGP":0.757131,"GHS":6.143205,"GIP":0.757131,"GMD":52.4,"GNF":9448.076935,"GTQ":7.734702,"GYD":209.457225,"HKD":7.797935,"HNL":24.037478,"HRK":6.6424,"HTG":99.376249,"HUF":322.613946,"IDR":14357,"ILS":3.098638,"IMP":0.757131,"INR":75.495001,"IQD":1451.484147,"IRR":42275,"ISK":130.14,"JEP":0.757131,"JMD":154.984235,"JOD":0.709,"JPY":113.63333333,"KES":112.9,"KGS":84.797051,"KHR":4051.087716,"KMF":434.625072,"KPW":900,"KRW":1173.454561,"KWD":0.302805,"KYD":0.833918,"KZT":437.116176,"LAK":10902.831725,"LBP":1504.215714,"LKR":201.830624,"LRD":141.975008,"LSL":15.688852,"LYD":4.603982,"MAD":9.185164,"MDL":17.596432,"MGA":3970.533375,"MKD":54.372372,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.649998,"MVR":15.45,"MWK":812.752673,"MXN":20.936899,"MYR":4.212,"MZN":63.857001,"NAD":15.81,"NGN":408.89,"NIO":35.049007,"NOK":8.88647,"NPR":120.09386,"NZD":1.467851,"OMR":0.385008,"PAB":1,"PEN":4.057151,"PGK":3.51997,"PHP":50.351503,"PKR":176.71221,"PLN":4.072685,"PYG":6804.86874,"QAR":3.641,"RON":4.3694,"RSD":103.800343,"RUB":73.5672,"RWF":1030.975619,"SAR":3.750912,"SBD":8.080841,"SCR":12.775249,"SDG":437.5,"SEK":9.047962,"SGD":1.362825,"SHP":0.757131,"SLL":11129.99989,"SOS":575.489533,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.44,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.6737,"TTD":6.80388,"TWD":27.696329,"TZS":2300,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10793.255674,"VES":4.6321,"VND":22951.577019,"VUV":112.698305,"WST":2.587451,"XAF":579.122671,"XAG":0.04454347,"XAU":0.00055994,"XCD":2.70255,"XDR":0.712861,"XOF":579.122671,"XPD":0.00053607,"XPF":105.354036,"XPT":0.00104039,"YER":250.274989,"ZAR":15.72758,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T06:30:18.609Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T06:30:18.609Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2717.24 2000 2659.17
2717.24 1500 2659.17
2717.24 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-312838'
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672979,"AFN":97.372693,"ALL":106.787132,"AMD":490.957033,"ANG":1.803347,"AOA":564,"ARS":101.3755,"AUD":1.393119,"AWG":1.8,"AZN":1.700805,"BAM":1.725509,"BBD":2,"BDT":85.847145,"BGN":1.727198,"BHD":0.377034,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.5331,"BSD":1,"BTC":0.000020148524,"BTN":75.058575,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.266236,"CDF":1990.630662,"CHF":0.920974,"CLF":0.030424,"CLP":839.5,"CNH":6.341961,"CNY":6.3445,"COP":3892.913143,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.471574,"DJF":177.111784,"DKK":6.564347,"DOP":56.448283,"DZD":139.004664,"EGP":15.709,"ERN":15.000155,"ETB":47.965033,"EUR":0.882742,"FJD":2.125,"FKP":0.75725,"GBP":0.75725,"GEL":3.105,"GGP":0.75725,"GHS":6.143205,"GIP":0.75725,"GMD":52.4,"GNF":9448.076935,"GTQ":7.734702,"GYD":209.457225,"HKD":7.798238,"HNL":24.037478,"HRK":6.6418,"HTG":99.376249,"HUF":322.137309,"IDR":14365.118166,"ILS":3.102228,"IMP":0.75725,"INR":75.506494,"IQD":1451.484147,"IRR":42275,"ISK":130.12,"JEP":0.75725,"JMD":154.984235,"JOD":0.709,"JPY":113.66171429,"KES":112.9,"KGS":84.797051,"KHR":4051.087716,"KMF":434.625072,"KPW":900,"KRW":1174.8,"KWD":0.3028,"KYD":0.833918,"KZT":437.116176,"LAK":10902.831725,"LBP":1504.215714,"LKR":201.830624,"LRD":141.975008,"LSL":15.688852,"LYD":4.603982,"MAD":9.185164,"MDL":17.596432,"MGA":3970.533375,"MKD":54.372372,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.05,"MVR":15.45,"MWK":812.752673,"MXN":20.946002,"MYR":4.216,"MZN":63.857001,"NAD":15.81,"NGN":408.89,"NIO":35.049007,"NOK":8.881518,"NPR":120.09386,"NZD":1.467031,"OMR":0.38501,"PAB":1,"PEN":4.057151,"PGK":3.51997,"PHP":50.383503,"PKR":176.71221,"PLN":4.072634,"PYG":6804.86874,"QAR":3.641,"RON":4.3689,"RSD":103.795513,"RUB":73.591667,"RWF":1030.975619,"SAR":3.751308,"SBD":8.080841,"SCR":12.775249,"SDG":437.5,"SEK":9.043314,"SGD":1.363118,"SHP":0.75725,"SLL":11129.99989,"SOS":575.489533,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.442498,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.726637,"TTD":6.80388,"TWD":27.696201,"TZS":2300,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10793.255674,"VES":4.6321,"VND":22964.751835,"VUV":112.698305,"WST":2.587451,"XAF":579.040933,"XAG":0.04471975,"XAU":0.00056026,"XCD":2.70255,"XDR":0.712861,"XOF":579.040933,"XPD":0.00053744,"XPF":105.339166,"XPT":0.00104359,"YER":250.274989,"ZAR":15.728705,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T07:00:15.380Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T07:00:15.380Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2717.24 2000 2659.17
2717.24 1500 2659.17
2717.24 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672979,"AFN":97.372693,"ALL":106.787132,"AMD":490.957033,"ANG":1.803347,"AOA":564,"ARS":101.3755,"AUD":1.393119,"AWG":1.8,"AZN":1.700805,"BAM":1.725509,"BBD":2,"BDT":85.847145,"BGN":1.727198,"BHD":0.377034,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.5331,"BSD":1,"BTC":0.000020148524,"BTN":75.058575,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.266236,"CDF":1990.630662,"CHF":0.920974,"CLF":0.030424,"CLP":839.5,"CNH":6.341961,"CNY":6.3445,"COP":3892.913143,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.471574,"DJF":177.111784,"DKK":6.564347,"DOP":56.448283,"DZD":139.004664,"EGP":15.709,"ERN":15.000155,"ETB":47.965033,"EUR":0.882742,"FJD":2.125,"FKP":0.75725,"GBP":0.75725,"GEL":3.105,"GGP":0.75725,"GHS":6.143205,"GIP":0.75725,"GMD":52.4,"GNF":9448.076935,"GTQ":7.734702,"GYD":209.457225,"HKD":7.798238,"HNL":24.037478,"HRK":6.6418,"HTG":99.376249,"HUF":322.137309,"IDR":14365.118166,"ILS":3.102228,"IMP":0.75725,"INR":75.506494,"IQD":1451.484147,"IRR":42275,"ISK":130.12,"JEP":0.75725,"JMD":154.984235,"JOD":0.709,"JPY":113.66171429,"KES":112.9,"KGS":84.797051,"KHR":4051.087716,"KMF":434.625072,"KPW":900,"KRW":1174.8,"KWD":0.3028,"KYD":0.833918,"KZT":437.116176,"LAK":10902.831725,"LBP":1504.215714,"LKR":201.830624,"LRD":141.975008,"LSL":15.688852,"LYD":4.603982,"MAD":9.185164,"MDL":17.596432,"MGA":3970.533375,"MKD":54.372372,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.05,"MVR":15.45,"MWK":812.752673,"MXN":20.946002,"MYR":4.216,"MZN":63.857001,"NAD":15.81,"NGN":408.89,"NIO":35.049007,"NOK":8.881518,"NPR":120.09386,"NZD":1.467031,"OMR":0.38501,"PAB":1,"PEN":4.057151,"PGK":3.51997,"PHP":50.383503,"PKR":176.71221,"PLN":4.072634,"PYG":6804.86874,"QAR":3.641,"RON":4.3689,"RSD":103.795513,"RUB":73.591667,"RWF":1030.975619,"SAR":3.751308,"SBD":8.080841,"SCR":12.775249,"SDG":437.5,"SEK":9.043314,"SGD":1.363118,"SHP":0.75725,"SLL":11129.99989,"SOS":575.489533,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.442498,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.726637,"TTD":6.80388,"TWD":27.696201,"TZS":2300,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10793.255674,"VES":4.6321,"VND":22964.751835,"VUV":112.698305,"WST":2.587451,"XAF":579.040933,"XAG":0.04471975,"XAU":0.00056026,"XCD":2.70255,"XDR":0.712861,"XOF":579.040933,"XPD":0.00053744,"XPF":105.339166,"XPT":0.00104359,"YER":250.274989,"ZAR":15.728705,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T07:30:02.937Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T07:30:02.937Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2717.24 2000 2659.17
2717.24 1500 2659.17
2717.24 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-312838'
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672973,"AFN":97.372693,"ALL":106.787132,"AMD":490.957033,"ANG":1.803347,"AOA":564,"ARS":101.3827,"AUD":1.39508,"AWG":1.8,"AZN":1.700805,"BAM":1.725509,"BBD":2,"BDT":85.847145,"BGN":1.726105,"BHD":0.377075,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.5327,"BSD":1,"BTC":0.000019922637,"BTN":75.058575,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.266425,"CDF":1990.630662,"CHF":0.920879,"CLF":0.030424,"CLP":839.5,"CNH":6.342008,"CNY":6.3435,"COP":3895.795052,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.471838,"DJF":177.111784,"DKK":6.568991,"DOP":56.448283,"DZD":139.087558,"EGP":15.7439,"ERN":15.000155,"ETB":47.965033,"EUR":0.883396,"FJD":2.125,"FKP":0.757547,"GBP":0.757547,"GEL":3.105,"GGP":0.757547,"GHS":6.143205,"GIP":0.757547,"GMD":52.4,"GNF":9448.076935,"GTQ":7.734702,"GYD":209.457225,"HKD":7.79788,"HNL":24.037478,"HRK":6.649,"HTG":99.376249,"HUF":322.338331,"IDR":14362.9,"ILS":3.110258,"IMP":0.757547,"INR":75.507508,"IQD":1451.484147,"IRR":42275,"ISK":130.22,"JEP":0.757547,"JMD":154.984235,"JOD":0.709,"JPY":113.49065789,"KES":112.95,"KGS":84.797051,"KHR":4051.087716,"KMF":434.625072,"KPW":900,"KRW":1175.025499,"KWD":0.302827,"KYD":0.833918,"KZT":437.116176,"LAK":10902.831725,"LBP":1504.215714,"LKR":201.830624,"LRD":141.975008,"LSL":15.688852,"LYD":4.603982,"MAD":9.185164,"MDL":17.66013,"MGA":3970.533375,"MKD":54.436463,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.052648,"MVR":15.45,"MWK":812.752673,"MXN":20.929497,"MYR":4.2165,"MZN":63.857001,"NAD":15.81,"NGN":408.89,"NIO":35.049007,"NOK":8.896951,"NPR":120.09386,"NZD":1.467545,"OMR":0.385062,"PAB":1,"PEN":4.057151,"PGK":3.51997,"PHP":50.349501,"PKR":176.71221,"PLN":4.063493,"PYG":6804.86874,"QAR":3.641,"RON":4.3718,"RSD":103.856952,"RUB":73.608333,"RWF":1030.975619,"SAR":3.751303,"SBD":8.080841,"SCR":12.775249,"SDG":437.5,"SEK":9.04813,"SGD":1.363726,"SHP":0.757547,"SLL":11129.99989,"SOS":575.489533,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.47,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.75498,"TTD":6.80388,"TWD":27.700501,"TZS":2300,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10793.255674,"VES":4.6321,"VND":22988.510607,"VUV":112.698305,"WST":2.587451,"XAF":579.469877,"XAG":0.04474176,"XAU":0.00055985,"XCD":2.70255,"XDR":0.712861,"XOF":579.469877,"XPD":0.00053929,"XPF":105.4172,"XPT":0.00104439,"YER":250.274989,"ZAR":15.715735,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T08:00:03.800Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T08:00:03.800Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2717.24 2000 2659.17
2717.24 1500 2659.17
2717.24 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672973,"AFN":97.372693,"ALL":106.787132,"AMD":490.957033,"ANG":1.803347,"AOA":564,"ARS":101.3827,"AUD":1.39508,"AWG":1.8,"AZN":1.700805,"BAM":1.725509,"BBD":2,"BDT":85.847145,"BGN":1.726105,"BHD":0.377075,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.5327,"BSD":1,"BTC":0.000019922637,"BTN":75.058575,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.266425,"CDF":1990.630662,"CHF":0.920879,"CLF":0.030424,"CLP":839.5,"CNH":6.342008,"CNY":6.3435,"COP":3895.795052,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.471838,"DJF":177.111784,"DKK":6.568991,"DOP":56.448283,"DZD":139.087558,"EGP":15.7439,"ERN":15.000155,"ETB":47.965033,"EUR":0.883396,"FJD":2.125,"FKP":0.757547,"GBP":0.757547,"GEL":3.105,"GGP":0.757547,"GHS":6.143205,"GIP":0.757547,"GMD":52.4,"GNF":9448.076935,"GTQ":7.734702,"GYD":209.457225,"HKD":7.79788,"HNL":24.037478,"HRK":6.649,"HTG":99.376249,"HUF":322.338331,"IDR":14362.9,"ILS":3.110258,"IMP":0.757547,"INR":75.507508,"IQD":1451.484147,"IRR":42275,"ISK":130.22,"JEP":0.757547,"JMD":154.984235,"JOD":0.709,"JPY":113.49065789,"KES":112.95,"KGS":84.797051,"KHR":4051.087716,"KMF":434.625072,"KPW":900,"KRW":1175.025499,"KWD":0.302827,"KYD":0.833918,"KZT":437.116176,"LAK":10902.831725,"LBP":1504.215714,"LKR":201.830624,"LRD":141.975008,"LSL":15.688852,"LYD":4.603982,"MAD":9.185164,"MDL":17.66013,"MGA":3970.533375,"MKD":54.436463,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.052648,"MVR":15.45,"MWK":812.752673,"MXN":20.929497,"MYR":4.2165,"MZN":63.857001,"NAD":15.81,"NGN":408.89,"NIO":35.049007,"NOK":8.896951,"NPR":120.09386,"NZD":1.467545,"OMR":0.385062,"PAB":1,"PEN":4.057151,"PGK":3.51997,"PHP":50.349501,"PKR":176.71221,"PLN":4.063493,"PYG":6804.86874,"QAR":3.641,"RON":4.3718,"RSD":103.856952,"RUB":73.608333,"RWF":1030.975619,"SAR":3.751303,"SBD":8.080841,"SCR":12.775249,"SDG":437.5,"SEK":9.04813,"SGD":1.363726,"SHP":0.757547,"SLL":11129.99989,"SOS":575.489533,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.47,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.75498,"TTD":6.80388,"TWD":27.700501,"TZS":2300,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10793.255674,"VES":4.6321,"VND":22988.510607,"VUV":112.698305,"WST":2.587451,"XAF":579.469877,"XAG":0.04474176,"XAU":0.00055985,"XCD":2.70255,"XDR":0.712861,"XOF":579.469877,"XPD":0.00053929,"XPF":105.4172,"XPT":0.00104439,"YER":250.274989,"ZAR":15.715735,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T08:30:02.942Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T08:30:02.942Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2717.24 2000 2659.17
2717.24 1500 2659.17
2717.24 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-312838'
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672973,"AFN":97.372693,"ALL":106.787132,"AMD":490.957033,"ANG":1.803347,"AOA":564,"ARS":101.389,"AUD":1.395807,"AWG":1.8,"AZN":1.700805,"BAM":1.725509,"BBD":2,"BDT":85.847145,"BGN":1.72823,"BHD":0.377015,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.533199,"BSD":1,"BTC":0.000020184731,"BTN":75.058575,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.26705,"CDF":1990.630662,"CHF":0.9208,"CLF":0.030424,"CLP":839.5,"CNH":6.345157,"CNY":6.3462,"COP":3895.18798,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.48,"DJF":177.111784,"DKK":6.567695,"DOP":56.448283,"DZD":138.8,"EGP":15.7091,"ERN":15.000155,"ETB":47.965033,"EUR":0.883197,"FJD":2.125,"FKP":0.757197,"GBP":0.757197,"GEL":3.105,"GGP":0.757197,"GHS":6.143205,"GIP":0.757197,"GMD":52.4,"GNF":9448.076935,"GTQ":7.734702,"GYD":209.457225,"HKD":7.79805,"HNL":24.037478,"HRK":6.6471,"HTG":99.376249,"HUF":322.252529,"IDR":14376.289251,"ILS":3.105577,"IMP":0.757197,"INR":75.530499,"IQD":1451.484147,"IRR":42275,"ISK":130.19,"JEP":0.757197,"JMD":154.984235,"JOD":0.709,"JPY":113.4495,"KES":112.9,"KGS":84.797051,"KHR":4051.087716,"KMF":434.625072,"KPW":900,"KRW":1176.071652,"KWD":0.302803,"KYD":0.833918,"KZT":437.116176,"LAK":10902.831725,"LBP":1504.215714,"LKR":201.830624,"LRD":141.975008,"LSL":15.688852,"LYD":4.603982,"MAD":9.185164,"MDL":17.66013,"MGA":3970.533375,"MKD":54.447787,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.051317,"MVR":15.45,"MWK":812.752673,"MXN":20.964049,"MYR":4.2165,"MZN":63.857001,"NAD":15.81,"NGN":408.89,"NIO":35.049007,"NOK":8.930127,"NPR":120.09386,"NZD":1.468262,"OMR":0.385032,"PAB":1,"PEN":4.057151,"PGK":3.51997,"PHP":50.393001,"PKR":176.71221,"PLN":4.07679,"PYG":6804.86874,"QAR":3.641,"RON":4.37105,"RSD":103.85,"RUB":73.7055,"RWF":1030.975619,"SAR":3.751204,"SBD":8.080841,"SCR":13.577111,"SDG":437.5,"SEK":9.064775,"SGD":1.364119,"SHP":0.757197,"SLL":11129.99989,"SOS":575.489533,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.43,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.7636,"TTD":6.80388,"TWD":27.6995,"TZS":2300,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10793.255674,"VES":4.6321,"VND":22977.946029,"VUV":112.698305,"WST":2.587451,"XAF":579.339374,"XAG":0.04476279,"XAU":0.00056039,"XCD":2.70255,"XDR":0.712861,"XOF":579.339374,"XPD":0.00053981,"XPF":105.393458,"XPT":0.00104933,"YER":250.274989,"ZAR":15.72695,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T09:00:03.251Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T09:00:03.251Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2717.24 2000 2659.17
2717.24 1500 2659.17
2717.24 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-312838'
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672973,"AFN":97.372693,"ALL":106.787132,"AMD":490.957033,"ANG":1.803347,"AOA":564,"ARS":101.389,"AUD":1.395807,"AWG":1.8,"AZN":1.700805,"BAM":1.725509,"BBD":2,"BDT":85.847145,"BGN":1.72823,"BHD":0.377015,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.533199,"BSD":1,"BTC":0.000020184731,"BTN":75.058575,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.26705,"CDF":1990.630662,"CHF":0.9208,"CLF":0.030424,"CLP":839.5,"CNH":6.345157,"CNY":6.3462,"COP":3895.18798,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.48,"DJF":177.111784,"DKK":6.567695,"DOP":56.448283,"DZD":138.8,"EGP":15.7091,"ERN":15.000155,"ETB":47.965033,"EUR":0.883197,"FJD":2.125,"FKP":0.757197,"GBP":0.757197,"GEL":3.105,"GGP":0.757197,"GHS":6.143205,"GIP":0.757197,"GMD":52.4,"GNF":9448.076935,"GTQ":7.734702,"GYD":209.457225,"HKD":7.79805,"HNL":24.037478,"HRK":6.6471,"HTG":99.376249,"HUF":322.252529,"IDR":14376.289251,"ILS":3.105577,"IMP":0.757197,"INR":75.530499,"IQD":1451.484147,"IRR":42275,"ISK":130.19,"JEP":0.757197,"JMD":154.984235,"JOD":0.709,"JPY":113.4495,"KES":112.9,"KGS":84.797051,"KHR":4051.087716,"KMF":434.625072,"KPW":900,"KRW":1176.071652,"KWD":0.302803,"KYD":0.833918,"KZT":437.116176,"LAK":10902.831725,"LBP":1504.215714,"LKR":201.830624,"LRD":141.975008,"LSL":15.688852,"LYD":4.603982,"MAD":9.185164,"MDL":17.66013,"MGA":3970.533375,"MKD":54.447787,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.051317,"MVR":15.45,"MWK":812.752673,"MXN":20.964049,"MYR":4.2165,"MZN":63.857001,"NAD":15.81,"NGN":408.89,"NIO":35.049007,"NOK":8.930127,"NPR":120.09386,"NZD":1.468262,"OMR":0.385032,"PAB":1,"PEN":4.057151,"PGK":3.51997,"PHP":50.393001,"PKR":176.71221,"PLN":4.07679,"PYG":6804.86874,"QAR":3.641,"RON":4.37105,"RSD":103.85,"RUB":73.7055,"RWF":1030.975619,"SAR":3.751204,"SBD":8.080841,"SCR":13.577111,"SDG":437.5,"SEK":9.064775,"SGD":1.364119,"SHP":0.757197,"SLL":11129.99989,"SOS":575.489533,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.43,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.7636,"TTD":6.80388,"TWD":27.6995,"TZS":2300,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10793.255674,"VES":4.6321,"VND":22977.946029,"VUV":112.698305,"WST":2.587451,"XAF":579.339374,"XAG":0.04476279,"XAU":0.00056039,"XCD":2.70255,"XDR":0.712861,"XOF":579.339374,"XPD":0.00053981,"XPF":105.393458,"XPT":0.00104933,"YER":250.274989,"ZAR":15.72695,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T09:30:03.909Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T09:30:03.909Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2717.24 2000 2659.17
2717.24 1500 2659.17
2717.24 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672973,"AFN":97.372693,"ALL":106.787132,"AMD":490.957033,"ANG":1.803347,"AOA":564,"ARS":101.3773,"AUD":1.396318,"AWG":1.8,"AZN":1.700805,"BAM":1.725509,"BBD":2,"BDT":85.847145,"BGN":1.727788,"BHD":0.376977,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.5336,"BSD":1,"BTC":0.000020313666,"BTN":75.058575,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.267858,"CDF":1990.630662,"CHF":0.92174,"CLF":0.030424,"CLP":839.5,"CNH":6.348628,"CNY":6.3473,"COP":3895.491492,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.482092,"DJF":177.111784,"DKK":6.569464,"DOP":56.448283,"DZD":139.069974,"EGP":15.705794,"ERN":15.000155,"ETB":47.965033,"EUR":0.88346,"FJD":2.125,"FKP":0.757287,"GBP":0.757287,"GEL":3.105,"GGP":0.757287,"GHS":6.143205,"GIP":0.757287,"GMD":52.4,"GNF":9448.076935,"GTQ":7.734702,"GYD":209.457225,"HKD":7.797165,"HNL":24.037478,"HRK":6.648,"HTG":99.376249,"HUF":323.219394,"IDR":14426.55,"ILS":3.10428,"IMP":0.757287,"INR":75.532751,"IQD":1451.484147,"IRR":42275,"ISK":130.21,"JEP":0.757287,"JMD":154.984235,"JOD":0.709,"JPY":113.5585,"KES":112.95,"KGS":84.798098,"KHR":4051.087716,"KMF":434.625072,"KPW":900,"KRW":1175.432295,"KWD":0.302824,"KYD":0.833918,"KZT":437.116176,"LAK":10902.831725,"LBP":1504.215714,"LKR":201.830624,"LRD":141.975008,"LSL":15.688852,"LYD":4.603982,"MAD":9.185164,"MDL":17.66013,"MGA":3970.533375,"MKD":54.428287,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.430002,"MVR":15.45,"MWK":812.752673,"MXN":20.972901,"MYR":4.2165,"MZN":63.83,"NAD":15.81,"NGN":408.89,"NIO":35.049007,"NOK":8.938325,"NPR":120.09386,"NZD":1.470242,"OMR":0.384999,"PAB":1,"PEN":4.057151,"PGK":3.51997,"PHP":50.386251,"PKR":176.71221,"PLN":4.082661,"PYG":6804.86874,"QAR":3.641,"RON":4.3725,"RSD":103.86519,"RUB":73.7001,"RWF":1030.975619,"SAR":3.751551,"SBD":8.080841,"SCR":13.619578,"SDG":437.5,"SEK":9.054126,"SGD":1.36417,"SHP":0.757287,"SLL":11132.50012,"SOS":575.489533,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.48,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.755695,"TTD":6.80388,"TWD":27.7122,"TZS":2300,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10793.255674,"VES":4.6321,"VND":22988.510607,"VUV":112.698305,"WST":2.587451,"XAF":579.511732,"XAG":0.04478484,"XAU":0.00056079,"XCD":2.70255,"XDR":0.712183,"XOF":579.511732,"XPD":0.00054306,"XPF":105.424814,"XPT":0.00105264,"YER":250.274989,"ZAR":15.78785,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T10:00:03.449Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T10:00:03.449Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2717.24 2000 2659.17
2717.24 1500 2659.17
2717.24 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-312838'
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672973,"AFN":97.372693,"ALL":106.787132,"AMD":490.957033,"ANG":1.803347,"AOA":564,"ARS":101.3773,"AUD":1.396318,"AWG":1.8,"AZN":1.700805,"BAM":1.725509,"BBD":2,"BDT":85.847145,"BGN":1.727788,"BHD":0.376977,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.5336,"BSD":1,"BTC":0.000020313666,"BTN":75.058575,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.267858,"CDF":1990.630662,"CHF":0.92174,"CLF":0.030424,"CLP":839.5,"CNH":6.348628,"CNY":6.3473,"COP":3895.491492,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.482092,"DJF":177.111784,"DKK":6.569464,"DOP":56.448283,"DZD":139.069974,"EGP":15.705794,"ERN":15.000155,"ETB":47.965033,"EUR":0.88346,"FJD":2.125,"FKP":0.757287,"GBP":0.757287,"GEL":3.105,"GGP":0.757287,"GHS":6.143205,"GIP":0.757287,"GMD":52.4,"GNF":9448.076935,"GTQ":7.734702,"GYD":209.457225,"HKD":7.797165,"HNL":24.037478,"HRK":6.648,"HTG":99.376249,"HUF":323.219394,"IDR":14426.55,"ILS":3.10428,"IMP":0.757287,"INR":75.532751,"IQD":1451.484147,"IRR":42275,"ISK":130.21,"JEP":0.757287,"JMD":154.984235,"JOD":0.709,"JPY":113.5585,"KES":112.95,"KGS":84.798098,"KHR":4051.087716,"KMF":434.625072,"KPW":900,"KRW":1175.432295,"KWD":0.302824,"KYD":0.833918,"KZT":437.116176,"LAK":10902.831725,"LBP":1504.215714,"LKR":201.830624,"LRD":141.975008,"LSL":15.688852,"LYD":4.603982,"MAD":9.185164,"MDL":17.66013,"MGA":3970.533375,"MKD":54.428287,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.430002,"MVR":15.45,"MWK":812.752673,"MXN":20.972901,"MYR":4.2165,"MZN":63.83,"NAD":15.81,"NGN":408.89,"NIO":35.049007,"NOK":8.938325,"NPR":120.09386,"NZD":1.470242,"OMR":0.384999,"PAB":1,"PEN":4.057151,"PGK":3.51997,"PHP":50.386251,"PKR":176.71221,"PLN":4.082661,"PYG":6804.86874,"QAR":3.641,"RON":4.3725,"RSD":103.86519,"RUB":73.7001,"RWF":1030.975619,"SAR":3.751551,"SBD":8.080841,"SCR":13.619578,"SDG":437.5,"SEK":9.054126,"SGD":1.36417,"SHP":0.757287,"SLL":11132.50012,"SOS":575.489533,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.48,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.755695,"TTD":6.80388,"TWD":27.7122,"TZS":2300,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10793.255674,"VES":4.6321,"VND":22988.510607,"VUV":112.698305,"WST":2.587451,"XAF":579.511732,"XAG":0.04478484,"XAU":0.00056079,"XCD":2.70255,"XDR":0.712183,"XOF":579.511732,"XPD":0.00054306,"XPF":105.424814,"XPT":0.00105264,"YER":250.274989,"ZAR":15.78785,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T10:30:03.694Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T10:30:03.694Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2717.24 2000 2659.17
2717.24 1500 2659.17
2717.24 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672973,"AFN":97.372693,"ALL":106.787132,"AMD":490.957033,"ANG":1.803347,"AOA":564,"ARS":101.3831,"AUD":1.397357,"AWG":1.8,"AZN":1.700805,"BAM":1.725509,"BBD":2,"BDT":85.847145,"BGN":1.727968,"BHD":0.377017,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.533401,"BSD":1,"BTC":0.00002024202,"BTN":75.058575,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.267686,"CDF":1990.630662,"CHF":0.92221,"CLF":0.030424,"CLP":839.92,"CNH":6.346697,"CNY":6.3479,"COP":3898.377221,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.464425,"DJF":177.111784,"DKK":6.572597,"DOP":56.448283,"DZD":138.889978,"EGP":15.704,"ERN":15.000155,"ETB":47.965033,"EUR":0.883871,"FJD":2.125,"FKP":0.758242,"GBP":0.758242,"GEL":3.105,"GGP":0.758242,"GHS":6.143205,"GIP":0.758242,"GMD":52.4,"GNF":9448.076935,"GTQ":7.734702,"GYD":209.457225,"HKD":7.796375,"HNL":24.037478,"HRK":6.653,"HTG":99.376249,"HUF":323.625,"IDR":14378.781061,"ILS":3.103737,"IMP":0.758242,"INR":75.575504,"IQD":1451.484147,"IRR":42275,"ISK":130.28,"JEP":0.758242,"JMD":154.984235,"JOD":0.709,"JPY":113.532,"KES":112.95,"KGS":84.798098,"KHR":4051.087716,"KMF":434.625072,"KPW":900,"KRW":1176.247824,"KWD":0.30285,"KYD":0.833918,"KZT":437.116176,"LAK":10902.831725,"LBP":1504.215714,"LKR":201.830624,"LRD":141.975008,"LSL":15.688852,"LYD":4.603982,"MAD":9.185164,"MDL":17.66013,"MGA":3970.533375,"MKD":54.479562,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.530002,"MVR":15.45,"MWK":812.752673,"MXN":20.96995,"MYR":4.2165,"MZN":63.83,"NAD":15.81,"NGN":408.89,"NIO":35.049007,"NOK":8.951615,"NPR":120.09386,"NZD":1.470394,"OMR":0.384999,"PAB":1,"PEN":4.057151,"PGK":3.51997,"PHP":50.436494,"PKR":176.71221,"PLN":4.073451,"PYG":6804.86874,"QAR":3.641,"RON":4.37445,"RSD":103.936551,"RUB":73.68525,"RWF":1030.975619,"SAR":3.751392,"SBD":8.080841,"SCR":13.619447,"SDG":437.5,"SEK":9.06109,"SGD":1.364698,"SHP":0.758242,"SLL":11132.50012,"SOS":575.489533,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.466789,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.768827,"TTD":6.80388,"TWD":27.7155,"TZS":2300,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10793.255674,"VES":4.6321,"VND":22988.510607,"VUV":112.698305,"WST":2.587451,"XAF":579.781158,"XAG":0.04481696,"XAU":0.00056086,"XCD":2.70255,"XDR":0.712183,"XOF":579.781158,"XPD":0.00054416,"XPF":105.473828,"XPT":0.0010543,"YER":250.274989,"ZAR":15.79907,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T11:00:03.904Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T11:00:03.904Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2717.24 2000 2659.17
2717.24 1500 2659.17
2717.24 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-312838'
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672973,"AFN":97.372693,"ALL":106.787132,"AMD":490.957033,"ANG":1.803347,"AOA":564,"ARS":101.3831,"AUD":1.397357,"AWG":1.8,"AZN":1.700805,"BAM":1.725509,"BBD":2,"BDT":85.847145,"BGN":1.727968,"BHD":0.377017,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.533401,"BSD":1,"BTC":0.00002024202,"BTN":75.058575,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.267686,"CDF":1990.630662,"CHF":0.92221,"CLF":0.030424,"CLP":839.92,"CNH":6.346697,"CNY":6.3479,"COP":3898.377221,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.464425,"DJF":177.111784,"DKK":6.572597,"DOP":56.448283,"DZD":138.889978,"EGP":15.704,"ERN":15.000155,"ETB":47.965033,"EUR":0.883871,"FJD":2.125,"FKP":0.758242,"GBP":0.758242,"GEL":3.105,"GGP":0.758242,"GHS":6.143205,"GIP":0.758242,"GMD":52.4,"GNF":9448.076935,"GTQ":7.734702,"GYD":209.457225,"HKD":7.796375,"HNL":24.037478,"HRK":6.653,"HTG":99.376249,"HUF":323.625,"IDR":14378.781061,"ILS":3.103737,"IMP":0.758242,"INR":75.575504,"IQD":1451.484147,"IRR":42275,"ISK":130.28,"JEP":0.758242,"JMD":154.984235,"JOD":0.709,"JPY":113.532,"KES":112.95,"KGS":84.798098,"KHR":4051.087716,"KMF":434.625072,"KPW":900,"KRW":1176.247824,"KWD":0.30285,"KYD":0.833918,"KZT":437.116176,"LAK":10902.831725,"LBP":1504.215714,"LKR":201.830624,"LRD":141.975008,"LSL":15.688852,"LYD":4.603982,"MAD":9.185164,"MDL":17.66013,"MGA":3970.533375,"MKD":54.479562,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.530002,"MVR":15.45,"MWK":812.752673,"MXN":20.96995,"MYR":4.2165,"MZN":63.83,"NAD":15.81,"NGN":408.89,"NIO":35.049007,"NOK":8.951615,"NPR":120.09386,"NZD":1.470394,"OMR":0.384999,"PAB":1,"PEN":4.057151,"PGK":3.51997,"PHP":50.436494,"PKR":176.71221,"PLN":4.073451,"PYG":6804.86874,"QAR":3.641,"RON":4.37445,"RSD":103.936551,"RUB":73.68525,"RWF":1030.975619,"SAR":3.751392,"SBD":8.080841,"SCR":13.619447,"SDG":437.5,"SEK":9.06109,"SGD":1.364698,"SHP":0.758242,"SLL":11132.50012,"SOS":575.489533,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.466789,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.768827,"TTD":6.80388,"TWD":27.7155,"TZS":2300,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10793.255674,"VES":4.6321,"VND":22988.510607,"VUV":112.698305,"WST":2.587451,"XAF":579.781158,"XAG":0.04481696,"XAU":0.00056086,"XCD":2.70255,"XDR":0.712183,"XOF":579.781158,"XPD":0.00054416,"XPF":105.473828,"XPT":0.0010543,"YER":250.274989,"ZAR":15.79907,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T11:30:03.364Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T11:30:03.364Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2717.24 2000 2659.17
2717.24 1500 2659.17
2717.24 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672973,"AFN":97.372693,"ALL":106.787132,"AMD":490.957033,"ANG":1.803347,"AOA":564,"ARS":101.3792,"AUD":1.400424,"AWG":1.8,"AZN":1.700805,"BAM":1.725509,"BBD":2,"BDT":85.847145,"BGN":1.728258,"BHD":0.377028,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.533199,"BSD":1,"BTC":0.000020287118,"BTN":75.058575,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.268282,"CDF":1990.630662,"CHF":0.922411,"CLF":0.030335,"CLP":835.65,"CNH":6.377271,"CNY":6.3729,"COP":3896.857884,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.499201,"DJF":177.111784,"DKK":6.57085,"DOP":56.448283,"DZD":138.804229,"EGP":15.7144,"ERN":15.000155,"ETB":47.965033,"EUR":0.883636,"FJD":2.125,"FKP":0.758397,"GBP":0.758397,"GEL":3.105,"GGP":0.758397,"GHS":6.143205,"GIP":0.758397,"GMD":52.4,"GNF":9448.076935,"GTQ":7.734702,"GYD":209.457225,"HKD":7.796635,"HNL":24.037478,"HRK":6.65,"HTG":99.376249,"HUF":323.46431,"IDR":14378.75,"ILS":3.10477,"IMP":0.758397,"INR":75.733278,"IQD":1451.484147,"IRR":42275,"ISK":130.25,"JEP":0.758397,"JMD":154.984235,"JOD":0.709,"JPY":113.50179078,"KES":112.9,"KGS":84.798098,"KHR":4051.087716,"KMF":434.625072,"KPW":900,"KRW":1178.788703,"KWD":0.30286,"KYD":0.833918,"KZT":437.116176,"LAK":10902.831725,"LBP":1504.215714,"LKR":201.830624,"LRD":141.975008,"LSL":15.688852,"LYD":4.603982,"MAD":9.185164,"MDL":17.66013,"MGA":3970.533375,"MKD":54.455234,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.649998,"MVR":15.45,"MWK":812.752673,"MXN":20.998667,"MYR":4.2165,"MZN":63.83,"NAD":15.81,"NGN":408.89,"NIO":35.049007,"NOK":8.971048,"NPR":120.09386,"NZD":1.473134,"OMR":0.384999,"PAB":1,"PEN":4.057151,"PGK":3.51997,"PHP":50.461752,"PKR":176.71221,"PLN":4.077307,"PYG":6804.86874,"QAR":3.641,"RON":4.37335,"RSD":103.895929,"RUB":73.693833,"RWF":1030.975619,"SAR":3.751358,"SBD":8.080841,"SCR":13.61921,"SDG":437.5,"SEK":9.06477,"SGD":1.36579,"SHP":0.758397,"SLL":11132.50012,"SOS":575.489533,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.538712,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.795691,"TTD":6.80388,"TWD":27.761499,"TZS":2300,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10793.255674,"VES":4.6321,"VND":22988.510607,"VUV":112.698305,"WST":2.587451,"XAF":579.626896,"XAG":0.04493679,"XAU":0.0005617,"XCD":2.70255,"XDR":0.712183,"XOF":579.626896,"XPD":0.00054613,"XPF":105.445764,"XPT":0.00105989,"YER":250.274989,"ZAR":15.889722,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T12:00:03.672Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T12:00:03.672Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2717.24 2000 2659.17
2717.24 1500 2659.17
2717.24 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-312838'
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672973,"AFN":97.372693,"ALL":106.787132,"AMD":490.957033,"ANG":1.803347,"AOA":564,"ARS":101.3792,"AUD":1.400424,"AWG":1.8,"AZN":1.700805,"BAM":1.725509,"BBD":2,"BDT":85.847145,"BGN":1.728258,"BHD":0.377028,"BIF":1995.664976,"BMD":1,"BND":1.365242,"BOB":6.909207,"BRL":5.533199,"BSD":1,"BTC":0.000020287118,"BTN":75.058575,"BWP":11.689376,"BYN":2.543903,"BZD":2.01693,"CAD":1.268282,"CDF":1990.630662,"CHF":0.922411,"CLF":0.030335,"CLP":835.65,"CNH":6.377271,"CNY":6.3729,"COP":3896.857884,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.499201,"DJF":177.111784,"DKK":6.57085,"DOP":56.448283,"DZD":138.804229,"EGP":15.7144,"ERN":15.000155,"ETB":47.965033,"EUR":0.883636,"FJD":2.125,"FKP":0.758397,"GBP":0.758397,"GEL":3.105,"GGP":0.758397,"GHS":6.143205,"GIP":0.758397,"GMD":52.4,"GNF":9448.076935,"GTQ":7.734702,"GYD":209.457225,"HKD":7.796635,"HNL":24.037478,"HRK":6.65,"HTG":99.376249,"HUF":323.46431,"IDR":14378.75,"ILS":3.10477,"IMP":0.758397,"INR":75.733278,"IQD":1451.484147,"IRR":42275,"ISK":130.25,"JEP":0.758397,"JMD":154.984235,"JOD":0.709,"JPY":113.50179078,"KES":112.9,"KGS":84.798098,"KHR":4051.087716,"KMF":434.625072,"KPW":900,"KRW":1178.788703,"KWD":0.30286,"KYD":0.833918,"KZT":437.116176,"LAK":10902.831725,"LBP":1504.215714,"LKR":201.830624,"LRD":141.975008,"LSL":15.688852,"LYD":4.603982,"MAD":9.185164,"MDL":17.66013,"MGA":3970.533375,"MKD":54.455234,"MMK":1781.048689,"MNT":2858.209306,"MOP":8.03599,"MRO":356.999828,"MRU":36.325,"MUR":43.649998,"MVR":15.45,"MWK":812.752673,"MXN":20.998667,"MYR":4.2165,"MZN":63.83,"NAD":15.81,"NGN":408.89,"NIO":35.049007,"NOK":8.971048,"NPR":120.09386,"NZD":1.473134,"OMR":0.384999,"PAB":1,"PEN":4.057151,"PGK":3.51997,"PHP":50.461752,"PKR":176.71221,"PLN":4.077307,"PYG":6804.86874,"QAR":3.641,"RON":4.37335,"RSD":103.895929,"RUB":73.693833,"RWF":1030.975619,"SAR":3.751358,"SBD":8.080841,"SCR":13.61921,"SDG":437.5,"SEK":9.06477,"SGD":1.36579,"SHP":0.758397,"SLL":11132.50012,"SOS":575.489533,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.755413,"SYP":2512.5,"SZL":15.791771,"THB":33.538712,"TJS":11.296902,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.795691,"TTD":6.80388,"TWD":27.761499,"TZS":2300,"UAH":27.202222,"UGX":3570.145093,"USD":1,"UYU":44.20451,"UZS":10793.255674,"VES":4.6321,"VND":22988.510607,"VUV":112.698305,"WST":2.587451,"XAF":579.626896,"XAG":0.04493679,"XAU":0.0005617,"XCD":2.70255,"XDR":0.712183,"XOF":579.626896,"XPD":0.00054613,"XPF":105.445764,"XPT":0.00105989,"YER":250.274989,"ZAR":15.889722,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T12:30:03.630Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T12:30:03.630Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2717.24 2000 2659.17
2717.24 1500 2659.17
2717.24 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672973,"AFN":97.372693,"ALL":107.034241,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.3827,"AUD":1.400187,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.729098,"BHD":0.376987,"BIF":1994.142167,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.524107,"BSD":1,"BTC":0.000020214929,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.26936,"CDF":2002.065675,"CHF":0.923981,"CLF":0.030274,"CLP":835.35,"CNH":6.37674,"CNY":6.3729,"COP":3896.479957,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.4925,"DJF":178.129668,"DKK":6.57496,"DOP":56.739709,"DZD":138.83,"EGP":15.7161,"ERN":15.000155,"ETB":47.965033,"EUR":0.884216,"FJD":2.125,"FKP":0.75811,"GBP":0.75811,"GEL":3.105,"GGP":0.75811,"GHS":6.178616,"GIP":0.75811,"GMD":52.4,"GNF":9506.197058,"GTQ":7.734543,"GYD":209.319251,"HKD":7.79645,"HNL":24.18415,"HRK":6.6586,"HTG":99.942078,"HUF":323.449039,"IDR":14365.95,"ILS":3.103714,"IMP":0.75811,"INR":75.587993,"IQD":1459.844088,"IRR":42275,"ISK":130.34,"JEP":0.75811,"JMD":154.793867,"JOD":0.709,"JPY":113.43275,"KES":112.93,"KGS":84.798098,"KHR":4074.167294,"KMF":434.625072,"KPW":900,"KRW":1176.548787,"KWD":0.30286,"KYD":0.833834,"KZT":436.35442,"LAK":10968.243034,"LBP":1512.956375,"LKR":202.616401,"LRD":141.975008,"LSL":15.899313,"LYD":4.602837,"MAD":9.245106,"MDL":17.67053,"MGA":3973.598622,"MKD":54.486302,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.65,"MVR":15.45,"MWK":817.432373,"MXN":21.039498,"MYR":4.2165,"MZN":63.83,"NAD":15.81,"NGN":411.24,"NIO":35.250481,"NOK":8.962005,"NPR":120.832445,"NZD":1.473561,"OMR":0.384999,"PAB":1,"PEN":4.07773,"PGK":3.513087,"PHP":50.428358,"PKR":177.677084,"PLN":4.072724,"PYG":6834.96197,"QAR":3.641,"RON":4.3759,"RSD":103.977,"RUB":73.665833,"RWF":1036.98264,"SAR":3.751519,"SBD":8.080841,"SCR":13.619748,"SDG":437.5,"SEK":9.064785,"SGD":1.365203,"SHP":0.75811,"SLL":11132.50012,"SOS":578.847295,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.754929,"SYP":2512.5,"SZL":15.899312,"THB":33.532497,"TJS":11.301557,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.785125,"TTD":6.803379,"TWD":27.722499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.175437,"UZS":10802.085477,"VES":4.6321,"VND":22988.510607,"VUV":112.698305,"WST":2.587451,"XAF":580.007444,"XAG":0.04510909,"XAU":0.00056292,"XCD":2.70255,"XDR":0.712183,"XOF":580.007444,"XPD":0.00054885,"XPF":105.514994,"XPT":0.00106214,"YER":250.274989,"ZAR":15.932965,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T13:00:03.824Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T13:00:03.824Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2717.24 2000 2659.17
2717.24 1500 2659.17
2717.24 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-312838'
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672973,"AFN":97.372693,"ALL":107.034241,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.3827,"AUD":1.400187,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.729098,"BHD":0.376987,"BIF":1994.142167,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.524107,"BSD":1,"BTC":0.000020214929,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.26936,"CDF":2002.065675,"CHF":0.923981,"CLF":0.030274,"CLP":835.35,"CNH":6.37674,"CNY":6.3729,"COP":3896.479957,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.4925,"DJF":178.129668,"DKK":6.57496,"DOP":56.739709,"DZD":138.83,"EGP":15.7161,"ERN":15.000155,"ETB":47.965033,"EUR":0.884216,"FJD":2.125,"FKP":0.75811,"GBP":0.75811,"GEL":3.105,"GGP":0.75811,"GHS":6.178616,"GIP":0.75811,"GMD":52.4,"GNF":9506.197058,"GTQ":7.734543,"GYD":209.319251,"HKD":7.79645,"HNL":24.18415,"HRK":6.6586,"HTG":99.942078,"HUF":323.449039,"IDR":14365.95,"ILS":3.103714,"IMP":0.75811,"INR":75.587993,"IQD":1459.844088,"IRR":42275,"ISK":130.34,"JEP":0.75811,"JMD":154.793867,"JOD":0.709,"JPY":113.43275,"KES":112.93,"KGS":84.798098,"KHR":4074.167294,"KMF":434.625072,"KPW":900,"KRW":1176.548787,"KWD":0.30286,"KYD":0.833834,"KZT":436.35442,"LAK":10968.243034,"LBP":1512.956375,"LKR":202.616401,"LRD":141.975008,"LSL":15.899313,"LYD":4.602837,"MAD":9.245106,"MDL":17.67053,"MGA":3973.598622,"MKD":54.486302,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.65,"MVR":15.45,"MWK":817.432373,"MXN":21.039498,"MYR":4.2165,"MZN":63.83,"NAD":15.81,"NGN":411.24,"NIO":35.250481,"NOK":8.962005,"NPR":120.832445,"NZD":1.473561,"OMR":0.384999,"PAB":1,"PEN":4.07773,"PGK":3.513087,"PHP":50.428358,"PKR":177.677084,"PLN":4.072724,"PYG":6834.96197,"QAR":3.641,"RON":4.3759,"RSD":103.977,"RUB":73.665833,"RWF":1036.98264,"SAR":3.751519,"SBD":8.080841,"SCR":13.619748,"SDG":437.5,"SEK":9.064785,"SGD":1.365203,"SHP":0.75811,"SLL":11132.50012,"SOS":578.847295,"SRD":21.5245,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.754929,"SYP":2512.5,"SZL":15.899312,"THB":33.532497,"TJS":11.301557,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.785125,"TTD":6.803379,"TWD":27.722499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.175437,"UZS":10802.085477,"VES":4.6321,"VND":22988.510607,"VUV":112.698305,"WST":2.587451,"XAF":580.007444,"XAG":0.04510909,"XAU":0.00056292,"XCD":2.70255,"XDR":0.712183,"XOF":580.007444,"XPD":0.00054885,"XPF":105.514994,"XPT":0.00106214,"YER":250.274989,"ZAR":15.932965,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T13:30:03.899Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T13:30:03.899Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2717.24 2000 2659.17
2717.24 1500 2659.17
2717.24 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672973,"AFN":97.372693,"ALL":107.034241,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.514514,"AUD":1.400045,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.726964,"BHD":0.377082,"BIF":1994.142167,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.564101,"BSD":1,"BTC":0.000020260548,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269258,"CDF":2002.065675,"CHF":0.923613,"CLF":0.030468,"CLP":840.65,"CNH":6.378215,"CNY":6.375,"COP":3902.98,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.480389,"DJF":178.129668,"DKK":6.5709,"DOP":56.739709,"DZD":138.89,"EGP":15.713326,"ERN":15.000155,"ETB":47.965033,"EUR":0.883669,"FJD":2.125,"FKP":0.757252,"GBP":0.757252,"GEL":3.105,"GGP":0.757252,"GHS":6.178616,"GIP":0.757252,"GMD":52.4,"GNF":9506.197058,"GTQ":7.734543,"GYD":209.319251,"HKD":7.79605,"HNL":24.18415,"HRK":6.6545,"HTG":99.942078,"HUF":323.12948,"IDR":14376.3,"ILS":3.103502,"IMP":0.757252,"INR":75.603249,"IQD":1459.844088,"IRR":42275,"ISK":130.25,"JEP":0.757252,"JMD":154.793867,"JOD":0.709,"JPY":113.348,"KES":112.97,"KGS":84.798098,"KHR":4074.167294,"KMF":434.625072,"KPW":900,"KRW":1177.327913,"KWD":0.302822,"KYD":0.833834,"KZT":436.35442,"LAK":10968.243034,"LBP":1512.956375,"LKR":202.616401,"LRD":141.975008,"LSL":15.899313,"LYD":4.602837,"MAD":9.245106,"MDL":17.632105,"MGA":3973.598622,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.651495,"MVR":15.45,"MWK":817.432373,"MXN":20.988501,"MYR":4.2165,"MZN":63.83,"NAD":15.81,"NGN":410.41,"NIO":35.250481,"NOK":9.001993,"NPR":120.832445,"NZD":1.472993,"OMR":0.384999,"PAB":1,"PEN":4.07773,"PGK":3.513087,"PHP":50.407006,"PKR":177.677084,"PLN":4.073,"PYG":6834.96197,"QAR":3.641,"RON":4.3736,"RSD":103.949821,"RUB":73.6619,"RWF":1036.98264,"SAR":3.751303,"SBD":8.080841,"SCR":13.374586,"SDG":437.5,"SEK":9.054035,"SGD":1.365,"SHP":0.757252,"SLL":11132.50012,"SOS":578.847295,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.754929,"SYP":2512.5,"SZL":15.899312,"THB":33.564,"TJS":11.301557,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.810337,"TTD":6.803379,"TWD":27.729499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.175437,"UZS":10802.085477,"VES":4.6321,"VND":22988.510607,"VUV":112.698305,"WST":2.587451,"XAF":579.648998,"XAG":0.04566317,"XAU":0.00056272,"XCD":2.70255,"XDR":0.712183,"XOF":579.648998,"XPD":0.0005505,"XPF":105.449785,"XPT":0.00105442,"YER":250.274989,"ZAR":15.92702,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T14:00:03.571Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T14:00:03.571Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2717.24 2000 2659.17
2717.24 1500 2659.17
2717.24 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-312838'
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.672973,"AFN":97.372693,"ALL":107.034241,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.514514,"AUD":1.400045,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.726964,"BHD":0.377082,"BIF":1994.142167,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.564101,"BSD":1,"BTC":0.000020260548,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269258,"CDF":2002.065675,"CHF":0.923613,"CLF":0.030468,"CLP":840.65,"CNH":6.378215,"CNY":6.375,"COP":3902.98,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":97.65,"CZK":22.480389,"DJF":178.129668,"DKK":6.5709,"DOP":56.739709,"DZD":138.89,"EGP":15.713326,"ERN":15.000155,"ETB":47.965033,"EUR":0.883669,"FJD":2.125,"FKP":0.757252,"GBP":0.757252,"GEL":3.105,"GGP":0.757252,"GHS":6.178616,"GIP":0.757252,"GMD":52.4,"GNF":9506.197058,"GTQ":7.734543,"GYD":209.319251,"HKD":7.79605,"HNL":24.18415,"HRK":6.6545,"HTG":99.942078,"HUF":323.12948,"IDR":14376.3,"ILS":3.103502,"IMP":0.757252,"INR":75.603249,"IQD":1459.844088,"IRR":42275,"ISK":130.25,"JEP":0.757252,"JMD":154.793867,"JOD":0.709,"JPY":113.348,"KES":112.97,"KGS":84.798098,"KHR":4074.167294,"KMF":434.625072,"KPW":900,"KRW":1177.327913,"KWD":0.302822,"KYD":0.833834,"KZT":436.35442,"LAK":10968.243034,"LBP":1512.956375,"LKR":202.616401,"LRD":141.975008,"LSL":15.899313,"LYD":4.602837,"MAD":9.245106,"MDL":17.632105,"MGA":3973.598622,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.651495,"MVR":15.45,"MWK":817.432373,"MXN":20.988501,"MYR":4.2165,"MZN":63.83,"NAD":15.81,"NGN":410.41,"NIO":35.250481,"NOK":9.001993,"NPR":120.832445,"NZD":1.472993,"OMR":0.384999,"PAB":1,"PEN":4.07773,"PGK":3.513087,"PHP":50.407006,"PKR":177.677084,"PLN":4.073,"PYG":6834.96197,"QAR":3.641,"RON":4.3736,"RSD":103.949821,"RUB":73.6619,"RWF":1036.98264,"SAR":3.751303,"SBD":8.080841,"SCR":13.374586,"SDG":437.5,"SEK":9.054035,"SGD":1.365,"SHP":0.757252,"SLL":11132.50012,"SOS":578.847295,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":21.95,"SVC":8.754929,"SYP":2512.5,"SZL":15.899312,"THB":33.564,"TJS":11.301557,"TMT":3.5,"TND":2.8795,"TOP":2.289256,"TRY":13.810337,"TTD":6.803379,"TWD":27.729499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.175437,"UZS":10802.085477,"VES":4.6321,"VND":22988.510607,"VUV":112.698305,"WST":2.587451,"XAF":579.648998,"XAG":0.04566317,"XAU":0.00056272,"XCD":2.70255,"XDR":0.712183,"XOF":579.648998,"XPD":0.0005505,"XPF":105.449785,"XPT":0.00105442,"YER":250.274989,"ZAR":15.92702,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T14:30:03.407Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T14:30:03.407Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2717.24 2000 2659.17
2717.24 1500 2659.17
2717.24 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5321,"AUD":1.398054,"AWG":1.8005,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.72702,"BHD":0.376988,"BIF":1998,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5643,"BSD":1,"BTC":0.000020547624,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269075,"CDF":2002,"CHF":0.924928,"CLF":0.030538,"CLP":842.68,"CNH":6.37973,"CNY":6.3751,"COP":3899,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.375,"CZK":22.498565,"DJF":178.05,"DKK":6.579294,"DOP":56.79,"DZD":138.946382,"EGP":15.7105,"ERN":15.000155,"ETB":48.25,"EUR":0.884755,"FJD":2.1245,"FKP":0.757671,"GBP":0.757671,"GEL":3.095,"GGP":0.757671,"GHS":6.16,"GIP":0.757671,"GMD":52.5,"GNF":9355,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796005,"HNL":24.150001,"HRK":6.6621,"HTG":99.942078,"HUF":323.525,"IDR":14373.95,"ILS":3.102373,"IMP":0.757671,"INR":75.583511,"IQD":1460.5,"IRR":42250,"ISK":130.58,"JEP":0.757671,"JMD":154.793867,"JOD":0.709,"JPY":113.49925,"KES":112.9,"KGS":84.798098,"KHR":4071,"KMF":437.649745,"KPW":900,"KRW":1177.060074,"KWD":0.302821,"KYD":0.833834,"KZT":436.35442,"LAK":10935,"LBP":1532,"LKR":202.616401,"LRD":141.850016,"LSL":15.9,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.32,"MUR":43.65,"MVR":15.4,"MWK":810.5,"MXN":21.013543,"MYR":4.2165,"MZN":63.824998,"NAD":15.9,"NGN":409.99,"NIO":35.225,"NOK":9.003565,"NPR":120.832445,"NZD":1.4724,"OMR":0.385013,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.401999,"PKR":176.8,"PLN":4.071188,"PYG":6834.96197,"QAR":3.641,"RON":4.3785,"RSD":104.021416,"RUB":73.5535,"RWF":1002.5,"SAR":3.751327,"SBD":8.074316,"SCR":13.377043,"SDG":437.5,"SEK":9.063373,"SGD":1.36491,"SHP":0.757671,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.9,"THB":33.548004,"TJS":11.301557,"TMT":3.51,"TND":2.8895,"TOP":2.289256,"TRY":13.7974,"TTD":6.803379,"TWD":27.7145,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":580.361002,"XAG":0.04558201,"XAU":0.00056252,"XCD":2.70255,"XDR":0.712183,"XOF":580.361002,"XPD":0.00055955,"XPF":105.579313,"XPT":0.00105765,"YER":250.250057,"ZAR":15.9681,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T15:00:02.996Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-08T20:51:08.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T15:00:02.996Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2695.24 2000 2659.17
2695.24 1500 2659.17
2695.24 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315377';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-08 20:51:08.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-312838'
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.8',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5321,"AUD":1.398054,"AWG":1.8005,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.72702,"BHD":0.376988,"BIF":1998,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5643,"BSD":1,"BTC":0.000020547624,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269075,"CDF":2002,"CHF":0.924928,"CLF":0.030538,"CLP":842.68,"CNH":6.37973,"CNY":6.3751,"COP":3899,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.375,"CZK":22.498565,"DJF":178.05,"DKK":6.579294,"DOP":56.79,"DZD":138.946382,"EGP":15.7105,"ERN":15.000155,"ETB":48.25,"EUR":0.884755,"FJD":2.1245,"FKP":0.757671,"GBP":0.757671,"GEL":3.095,"GGP":0.757671,"GHS":6.16,"GIP":0.757671,"GMD":52.5,"GNF":9355,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796005,"HNL":24.150001,"HRK":6.6621,"HTG":99.942078,"HUF":323.525,"IDR":14373.95,"ILS":3.102373,"IMP":0.757671,"INR":75.583511,"IQD":1460.5,"IRR":42250,"ISK":130.58,"JEP":0.757671,"JMD":154.793867,"JOD":0.709,"JPY":113.49925,"KES":112.9,"KGS":84.798098,"KHR":4071,"KMF":437.649745,"KPW":900,"KRW":1177.060074,"KWD":0.302821,"KYD":0.833834,"KZT":436.35442,"LAK":10935,"LBP":1532,"LKR":202.616401,"LRD":141.850016,"LSL":15.9,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.32,"MUR":43.65,"MVR":15.4,"MWK":810.5,"MXN":21.013543,"MYR":4.2165,"MZN":63.824998,"NAD":15.9,"NGN":409.99,"NIO":35.225,"NOK":9.003565,"NPR":120.832445,"NZD":1.4724,"OMR":0.385013,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.401999,"PKR":176.8,"PLN":4.071188,"PYG":6834.96197,"QAR":3.641,"RON":4.3785,"RSD":104.021416,"RUB":73.5535,"RWF":1002.5,"SAR":3.751327,"SBD":8.074316,"SCR":13.377043,"SDG":437.5,"SEK":9.063373,"SGD":1.36491,"SHP":0.757671,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.9,"THB":33.548004,"TJS":11.301557,"TMT":3.51,"TND":2.8895,"TOP":2.289256,"TRY":13.7974,"TTD":6.803379,"TWD":27.7145,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":580.361002,"XAG":0.04558201,"XAU":0.00056252,"XCD":2.70255,"XDR":0.712183,"XOF":580.361002,"XPD":0.00055955,"XPF":105.579313,"XPT":0.00105765,"YER":250.250057,"ZAR":15.9681,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-09T15:27:32.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T15:30:03.275Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-09T15:27:32.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T15:30:03.275Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2695.24 2000 2659.17
2695.24 1500 2659.17
2695.24 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315377';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-09 15:27:32.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-315377'
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-09T15:27:32.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T16:00:04.616Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-09T15:27:32.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T16:00:04.616Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2695.24 2000 2659.17
2695.24 1500 2659.17
2695.24 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315377';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-09 15:27:32.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-09T15:27:32.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T16:30:03.630Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-09T15:27:32.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T16:30:03.630Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2695.24 2000 2659.17
2695.24 1500 2659.17
2695.24 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315377';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-09 15:27:32.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-315377'
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-09T15:27:32.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T17:00:04.874Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-09T15:27:32.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T17:00:04.874Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2695.24 2000 2659.17
2695.24 1500 2659.17
2695.24 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315377';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-09 15:27:32.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-09T15:27:32.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T17:05:02.432Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-09T15:27:32.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T17:05:02.432Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2695.24 2000 2659.17
2695.24 1500 2659.17
2695.24 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315377';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-09 15:27:32.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-315377'
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';

> nest-typescript-starter@1.0.0 start:prod /home/wadiahex/nBanking-ExternalTransactions
> node dist/main

[32m[Nest] 1716170  - [39m12/09/2021, 12:44:15 PM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 1716170  - [39m12/09/2021, 12:44:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMailerModule dependencies initialized[39m[38;5;3m +83ms[39m
[32m[Nest] 1716170  - [39m12/09/2021, 12:44:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1716170  - [39m12/09/2021, 12:44:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 1716170  - [39m12/09/2021, 12:44:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1716170  - [39m12/09/2021, 12:44:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mCacheModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 1716170  - [39m12/09/2021, 12:44:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHttpModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1716170  - [39m12/09/2021, 12:44:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigHostModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1716170  - [39m12/09/2021, 12:44:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1716170  - [39m12/09/2021, 12:44:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1716170  - [39m12/09/2021, 12:44:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHelperModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 1716170  - [39m12/09/2021, 12:44:15 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMailerCoreModule dependencies initialized[39m[38;5;3m +609ms[39m
Executing (default): SELECT 1+1 AS result
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntities" ("code" VARCHAR(255) , "masterAccountCode" VARCHAR(255), "userName" VARCHAR(255), "source" INTEGER, "extraData" JSON, "lastTransactionDate" TIMESTAMP WITH TIME ZONE, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("code"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntities' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntities' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" TYPE INTEGER;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntities' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntityMovements" ("id"  SERIAL , "externalEntityCode" VARCHAR(255) REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE, "transactionNumber" VARCHAR(255), "transactionDateTime" TIMESTAMP WITH TIME ZONE, "accountReferenceNumber" VARCHAR(255), "originalCurrency" VARCHAR(255), "originalCurrencyAmount" VARCHAR(255), "TargetCurrency" VARCHAR(255), "TargetCurrencyAmount" VARCHAR(255), "OriginalToTargetExchangeRate" VARCHAR(255), "Description" VARCHAR(255), "Status" VARCHAR(255), "ConfirmedDateTime" TIMESTAMP WITH TIME ZONE, "ProcessedDateTime" TIMESTAMP WITH TIME ZONE, "ErrorMessage" VARCHAR(255), "FullData" JSON, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("id"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntityMovements' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntityMovements' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntityMovements" DROP CONSTRAINT "ExternalEntityMovements_externalEntityCode_fkey"
Executing (default): ALTER TABLE "ExternalEntityMovements"  ADD FOREIGN KEY ("externalEntityCode") REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrencyAmount" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "OriginalToTargetExchangeRate" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "OriginalToTargetExchangeRate" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "OriginalToTargetExchangeRate" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Description" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Description" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Description" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Status" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Status" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Status" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ConfirmedDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ConfirmedDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ConfirmedDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ProcessedDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ProcessedDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ProcessedDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ErrorMessage" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ErrorMessage" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ErrorMessage" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "FullData" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "FullData" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "FullData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntityMovements' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
[32m[Nest] 1716170  - [39m12/09/2021, 12:44:16 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeCoreModule dependencies initialized[39m[38;5;3m +125ms[39m
[32m[Nest] 1716170  - [39m12/09/2021, 12:44:16 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +1ms[39m
Executing (default): SELECT 1+1 AS result
Executing (default): SELECT 1+1 AS result
[32m[Nest] 1716170  - [39m12/09/2021, 12:44:17 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeCoreModule dependencies initialized[39m[38;5;3m +1336ms[39m
[32m[Nest] 1716170  - [39m12/09/2021, 12:44:17 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTransactionsModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 1716170  - [39m12/09/2021, 12:44:17 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1716170  - [39m12/09/2021, 12:44:17 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/}:[39m[38;5;3m +10ms[39m
[32m[Nest] 1716170  - [39m12/09/2021, 12:44:17 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/process-transactions/jeeves, GET} route[39m[38;5;3m +4ms[39m
[32m[Nest] 1716170  - [39m12/09/2021, 12:44:17 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1716170  - [39m12/09/2021, 12:44:17 PM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +5ms[39m
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-09T15:27:32.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T17:30:03.487Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'jeeves',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 2659.17 },
     lastTransactionDate: 2021-12-09T15:27:32.000Z,
     createdAt: 2021-11-11T12:25:54.637Z,
     updatedAt: 2021-12-09T17:30:03.487Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2695.24 2000 2659.17
2695.24 1500 2659.17
2695.24 1000 2659.17
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315377';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-09 15:27:32.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';

> nest-typescript-starter@1.0.0 start:prod /home/wadiahex/nBanking-ExternalTransactions
> node dist/main

[32m[Nest] 1724572  - [39m12/09/2021, 12:47:07 PM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 1724572  - [39m12/09/2021, 12:47:07 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMailerModule dependencies initialized[39m[38;5;3m +93ms[39m
[32m[Nest] 1724572  - [39m12/09/2021, 12:47:07 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1724572  - [39m12/09/2021, 12:47:07 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1724572  - [39m12/09/2021, 12:47:07 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1724572  - [39m12/09/2021, 12:47:07 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mCacheModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1724572  - [39m12/09/2021, 12:47:07 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHttpModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1724572  - [39m12/09/2021, 12:47:07 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigHostModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1724572  - [39m12/09/2021, 12:47:07 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1724572  - [39m12/09/2021, 12:47:07 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1724572  - [39m12/09/2021, 12:47:07 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHelperModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1724572  - [39m12/09/2021, 12:47:07 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMailerCoreModule dependencies initialized[39m[38;5;3m +586ms[39m
Executing (default): SELECT 1+1 AS result
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntities" ("code" VARCHAR(255) , "masterAccountCode" VARCHAR(255), "userName" VARCHAR(255), "source" INTEGER, "extraData" JSON, "lastTransactionDate" TIMESTAMP WITH TIME ZONE, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("code"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntities' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntities' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" TYPE INTEGER;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntities' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntityMovements" ("id"  SERIAL , "externalEntityCode" VARCHAR(255) REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE, "transactionNumber" VARCHAR(255), "transactionDateTime" TIMESTAMP WITH TIME ZONE, "accountReferenceNumber" VARCHAR(255), "originalCurrency" VARCHAR(255), "originalCurrencyAmount" INTEGER, "TargetCurrency" VARCHAR(255), "TargetCurrencyAmount" INTEGER, "OriginalToTargetExchangeRate" INTEGER, "Description" VARCHAR(255), "Status" VARCHAR(255), "ConfirmedDateTime" TIMESTAMP WITH TIME ZONE, "ProcessedDateTime" TIMESTAMP WITH TIME ZONE, "ErrorMessage" VARCHAR(255), "FullData" JSON, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("id"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntityMovements' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntityMovements' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntityMovements" DROP CONSTRAINT "ExternalEntityMovements_externalEntityCode_fkey"
Executing (default): ALTER TABLE "ExternalEntityMovements"  ADD FOREIGN KEY ("externalEntityCode") REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" TYPE INTEGER;
[31m[Nest] 1724572  - [39m12/09/2021, 12:47:07 PM [31m  ERROR[39m [38;5;3m[SequelizeModule] [39m[31mUnable to connect to the database. Retrying (1)...[39m
SequelizeDatabaseError: column "originalCurrencyAmount" cannot be cast automatically to type integer
    at Query.formatError (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:392:16)
    at Query.run (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:87:18)
    at process._tickCallback (internal/process/next_tick.js:68:7)
Executing (default): SELECT 1+1 AS result
Executing (default): SELECT 1+1 AS result
[32m[Nest] 1724572  - [39m12/09/2021, 12:47:09 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeCoreModule dependencies initialized[39m[38;5;3m +1182ms[39m
Executing (default): SELECT 1+1 AS result
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntities" ("code" VARCHAR(255) , "masterAccountCode" VARCHAR(255), "userName" VARCHAR(255), "source" INTEGER, "extraData" JSON, "lastTransactionDate" TIMESTAMP WITH TIME ZONE, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("code"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntities' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntities' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" TYPE INTEGER;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntities' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntityMovements" ("id"  SERIAL , "externalEntityCode" VARCHAR(255) REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE, "transactionNumber" VARCHAR(255), "transactionDateTime" TIMESTAMP WITH TIME ZONE, "accountReferenceNumber" VARCHAR(255), "originalCurrency" VARCHAR(255), "originalCurrencyAmount" INTEGER, "TargetCurrency" VARCHAR(255), "TargetCurrencyAmount" INTEGER, "OriginalToTargetExchangeRate" INTEGER, "Description" VARCHAR(255), "Status" VARCHAR(255), "ConfirmedDateTime" TIMESTAMP WITH TIME ZONE, "ProcessedDateTime" TIMESTAMP WITH TIME ZONE, "ErrorMessage" VARCHAR(255), "FullData" JSON, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("id"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntityMovements' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntityMovements' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntityMovements" DROP CONSTRAINT "ExternalEntityMovements_externalEntityCode_fkey"
Executing (default): ALTER TABLE "ExternalEntityMovements"  ADD FOREIGN KEY ("externalEntityCode") REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" TYPE INTEGER;
[31m[Nest] 1724572  - [39m12/09/2021, 12:47:10 PM [31m  ERROR[39m [38;5;3m[SequelizeModule] [39m[31mUnable to connect to the database. Retrying (2)...[39m
SequelizeDatabaseError: column "originalCurrencyAmount" cannot be cast automatically to type integer
    at Query.formatError (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:392:16)
    at Query.run (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:87:18)
    at process._tickCallback (internal/process/next_tick.js:68:7)
Executing (default): SELECT 1+1 AS result
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntities" ("code" VARCHAR(255) , "masterAccountCode" VARCHAR(255), "userName" VARCHAR(255), "source" INTEGER, "extraData" JSON, "lastTransactionDate" TIMESTAMP WITH TIME ZONE, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("code"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntities' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntities' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" TYPE INTEGER;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntities' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntityMovements" ("id"  SERIAL , "externalEntityCode" VARCHAR(255) REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE, "transactionNumber" VARCHAR(255), "transactionDateTime" TIMESTAMP WITH TIME ZONE, "accountReferenceNumber" VARCHAR(255), "originalCurrency" VARCHAR(255), "originalCurrencyAmount" INTEGER, "TargetCurrency" VARCHAR(255), "TargetCurrencyAmount" INTEGER, "OriginalToTargetExchangeRate" INTEGER, "Description" VARCHAR(255), "Status" VARCHAR(255), "ConfirmedDateTime" TIMESTAMP WITH TIME ZONE, "ProcessedDateTime" TIMESTAMP WITH TIME ZONE, "ErrorMessage" VARCHAR(255), "FullData" JSON, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("id"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntityMovements' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntityMovements' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntityMovements" DROP CONSTRAINT "ExternalEntityMovements_externalEntityCode_fkey"
Executing (default): ALTER TABLE "ExternalEntityMovements"  ADD FOREIGN KEY ("externalEntityCode") REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" TYPE INTEGER;
[31m[Nest] 1724572  - [39m12/09/2021, 12:47:14 PM [31m  ERROR[39m [38;5;3m[SequelizeModule] [39m[31mUnable to connect to the database. Retrying (3)...[39m
SequelizeDatabaseError: column "originalCurrencyAmount" cannot be cast automatically to type integer
    at Query.formatError (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:392:16)
    at Query.run (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:87:18)
    at process._tickCallback (internal/process/next_tick.js:68:7)
Executing (default): SELECT 1+1 AS result
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntities" ("code" VARCHAR(255) , "masterAccountCode" VARCHAR(255), "userName" VARCHAR(255), "source" INTEGER, "extraData" JSON, "lastTransactionDate" TIMESTAMP WITH TIME ZONE, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("code"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntities' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntities' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" TYPE INTEGER;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntities' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntityMovements" ("id"  SERIAL , "externalEntityCode" VARCHAR(255) REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE, "transactionNumber" VARCHAR(255), "transactionDateTime" TIMESTAMP WITH TIME ZONE, "accountReferenceNumber" VARCHAR(255), "originalCurrency" VARCHAR(255), "originalCurrencyAmount" INTEGER, "TargetCurrency" VARCHAR(255), "TargetCurrencyAmount" INTEGER, "OriginalToTargetExchangeRate" INTEGER, "Description" VARCHAR(255), "Status" VARCHAR(255), "ConfirmedDateTime" TIMESTAMP WITH TIME ZONE, "ProcessedDateTime" TIMESTAMP WITH TIME ZONE, "ErrorMessage" VARCHAR(255), "FullData" JSON, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("id"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntityMovements' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntityMovements' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntityMovements" DROP CONSTRAINT "ExternalEntityMovements_externalEntityCode_fkey"
Executing (default): ALTER TABLE "ExternalEntityMovements"  ADD FOREIGN KEY ("externalEntityCode") REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" TYPE INTEGER;
[31m[Nest] 1724572  - [39m12/09/2021, 12:47:17 PM [31m  ERROR[39m [38;5;3m[SequelizeModule] [39m[31mUnable to connect to the database. Retrying (4)...[39m
SequelizeDatabaseError: column "originalCurrencyAmount" cannot be cast automatically to type integer
    at Query.formatError (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:392:16)
    at Query.run (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:87:18)
    at process._tickCallback (internal/process/next_tick.js:68:7)
Executing (default): SELECT 1+1 AS result
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntities" ("code" VARCHAR(255) , "masterAccountCode" VARCHAR(255), "userName" VARCHAR(255), "source" INTEGER, "extraData" JSON, "lastTransactionDate" TIMESTAMP WITH TIME ZONE, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("code"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntities' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntities' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" TYPE INTEGER;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntities' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntityMovements" ("id"  SERIAL , "externalEntityCode" VARCHAR(255) REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE, "transactionNumber" VARCHAR(255), "transactionDateTime" TIMESTAMP WITH TIME ZONE, "accountReferenceNumber" VARCHAR(255), "originalCurrency" VARCHAR(255), "originalCurrencyAmount" INTEGER, "TargetCurrency" VARCHAR(255), "TargetCurrencyAmount" INTEGER, "OriginalToTargetExchangeRate" INTEGER, "Description" VARCHAR(255), "Status" VARCHAR(255), "ConfirmedDateTime" TIMESTAMP WITH TIME ZONE, "ProcessedDateTime" TIMESTAMP WITH TIME ZONE, "ErrorMessage" VARCHAR(255), "FullData" JSON, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("id"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntityMovements' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntityMovements' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntityMovements" DROP CONSTRAINT "ExternalEntityMovements_externalEntityCode_fkey"
Executing (default): ALTER TABLE "ExternalEntityMovements"  ADD FOREIGN KEY ("externalEntityCode") REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" TYPE INTEGER;
[31m[Nest] 1724572  - [39m12/09/2021, 12:47:20 PM [31m  ERROR[39m [38;5;3m[SequelizeModule] [39m[31mUnable to connect to the database. Retrying (5)...[39m
SequelizeDatabaseError: column "originalCurrencyAmount" cannot be cast automatically to type integer
    at Query.formatError (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:392:16)
    at Query.run (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:87:18)
    at process._tickCallback (internal/process/next_tick.js:68:7)
Executing (default): SELECT 1+1 AS result
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntities" ("code" VARCHAR(255) , "masterAccountCode" VARCHAR(255), "userName" VARCHAR(255), "source" INTEGER, "extraData" JSON, "lastTransactionDate" TIMESTAMP WITH TIME ZONE, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("code"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntities' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntities' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" TYPE INTEGER;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntities' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntityMovements" ("id"  SERIAL , "externalEntityCode" VARCHAR(255) REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE, "transactionNumber" VARCHAR(255), "transactionDateTime" TIMESTAMP WITH TIME ZONE, "accountReferenceNumber" VARCHAR(255), "originalCurrency" VARCHAR(255), "originalCurrencyAmount" INTEGER, "TargetCurrency" VARCHAR(255), "TargetCurrencyAmount" INTEGER, "OriginalToTargetExchangeRate" INTEGER, "Description" VARCHAR(255), "Status" VARCHAR(255), "ConfirmedDateTime" TIMESTAMP WITH TIME ZONE, "ProcessedDateTime" TIMESTAMP WITH TIME ZONE, "ErrorMessage" VARCHAR(255), "FullData" JSON, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("id"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntityMovements' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntityMovements' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntityMovements" DROP CONSTRAINT "ExternalEntityMovements_externalEntityCode_fkey"
Executing (default): ALTER TABLE "ExternalEntityMovements"  ADD FOREIGN KEY ("externalEntityCode") REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" TYPE INTEGER;
[31m[Nest] 1724572  - [39m12/09/2021, 12:47:23 PM [31m  ERROR[39m [38;5;3m[SequelizeModule] [39m[31mUnable to connect to the database. Retrying (6)...[39m
SequelizeDatabaseError: column "originalCurrencyAmount" cannot be cast automatically to type integer
    at Query.formatError (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:392:16)
    at Query.run (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:87:18)
    at process._tickCallback (internal/process/next_tick.js:68:7)
Executing (default): SELECT 1+1 AS result
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntities" ("code" VARCHAR(255) , "masterAccountCode" VARCHAR(255), "userName" VARCHAR(255), "source" INTEGER, "extraData" JSON, "lastTransactionDate" TIMESTAMP WITH TIME ZONE, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("code"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntities' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntities' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" TYPE INTEGER;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntities' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntityMovements" ("id"  SERIAL , "externalEntityCode" VARCHAR(255) REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE, "transactionNumber" VARCHAR(255), "transactionDateTime" TIMESTAMP WITH TIME ZONE, "accountReferenceNumber" VARCHAR(255), "originalCurrency" VARCHAR(255), "originalCurrencyAmount" INTEGER, "TargetCurrency" VARCHAR(255), "TargetCurrencyAmount" INTEGER, "OriginalToTargetExchangeRate" INTEGER, "Description" VARCHAR(255), "Status" VARCHAR(255), "ConfirmedDateTime" TIMESTAMP WITH TIME ZONE, "ProcessedDateTime" TIMESTAMP WITH TIME ZONE, "ErrorMessage" VARCHAR(255), "FullData" JSON, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("id"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntityMovements' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntityMovements' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntityMovements" DROP CONSTRAINT "ExternalEntityMovements_externalEntityCode_fkey"
Executing (default): ALTER TABLE "ExternalEntityMovements"  ADD FOREIGN KEY ("externalEntityCode") REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" TYPE INTEGER;
[31m[Nest] 1724572  - [39m12/09/2021, 12:47:26 PM [31m  ERROR[39m [38;5;3m[SequelizeModule] [39m[31mUnable to connect to the database. Retrying (7)...[39m
SequelizeDatabaseError: column "originalCurrencyAmount" cannot be cast automatically to type integer
    at Query.formatError (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:392:16)
    at Query.run (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:87:18)
    at process._tickCallback (internal/process/next_tick.js:68:7)
Executing (default): SELECT 1+1 AS result
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntities" ("code" VARCHAR(255) , "masterAccountCode" VARCHAR(255), "userName" VARCHAR(255), "source" INTEGER, "extraData" JSON, "lastTransactionDate" TIMESTAMP WITH TIME ZONE, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("code"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntities' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntities' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" TYPE INTEGER;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntities' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntityMovements" ("id"  SERIAL , "externalEntityCode" VARCHAR(255) REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE, "transactionNumber" VARCHAR(255), "transactionDateTime" TIMESTAMP WITH TIME ZONE, "accountReferenceNumber" VARCHAR(255), "originalCurrency" VARCHAR(255), "originalCurrencyAmount" INTEGER, "TargetCurrency" VARCHAR(255), "TargetCurrencyAmount" INTEGER, "OriginalToTargetExchangeRate" INTEGER, "Description" VARCHAR(255), "Status" VARCHAR(255), "ConfirmedDateTime" TIMESTAMP WITH TIME ZONE, "ProcessedDateTime" TIMESTAMP WITH TIME ZONE, "ErrorMessage" VARCHAR(255), "FullData" JSON, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("id"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntityMovements' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntityMovements' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntityMovements" DROP CONSTRAINT "ExternalEntityMovements_externalEntityCode_fkey"
Executing (default): ALTER TABLE "ExternalEntityMovements"  ADD FOREIGN KEY ("externalEntityCode") REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" TYPE INTEGER;
[31m[Nest] 1724572  - [39m12/09/2021, 12:47:29 PM [31m  ERROR[39m [38;5;3m[SequelizeModule] [39m[31mUnable to connect to the database. Retrying (8)...[39m
SequelizeDatabaseError: column "originalCurrencyAmount" cannot be cast automatically to type integer
    at Query.formatError (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:392:16)
    at Query.run (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:87:18)
    at process._tickCallback (internal/process/next_tick.js:68:7)
Executing (default): SELECT 1+1 AS result
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntities" ("code" VARCHAR(255) , "masterAccountCode" VARCHAR(255), "userName" VARCHAR(255), "source" INTEGER, "extraData" JSON, "lastTransactionDate" TIMESTAMP WITH TIME ZONE, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("code"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntities' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntities' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" TYPE INTEGER;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntities' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntityMovements" ("id"  SERIAL , "externalEntityCode" VARCHAR(255) REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE, "transactionNumber" VARCHAR(255), "transactionDateTime" TIMESTAMP WITH TIME ZONE, "accountReferenceNumber" VARCHAR(255), "originalCurrency" VARCHAR(255), "originalCurrencyAmount" INTEGER, "TargetCurrency" VARCHAR(255), "TargetCurrencyAmount" INTEGER, "OriginalToTargetExchangeRate" INTEGER, "Description" VARCHAR(255), "Status" VARCHAR(255), "ConfirmedDateTime" TIMESTAMP WITH TIME ZONE, "ProcessedDateTime" TIMESTAMP WITH TIME ZONE, "ErrorMessage" VARCHAR(255), "FullData" JSON, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("id"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntityMovements' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntityMovements' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntityMovements" DROP CONSTRAINT "ExternalEntityMovements_externalEntityCode_fkey"
Executing (default): ALTER TABLE "ExternalEntityMovements"  ADD FOREIGN KEY ("externalEntityCode") REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" TYPE INTEGER;
[31m[Nest] 1724572  - [39m12/09/2021, 12:47:32 PM [31m  ERROR[39m [38;5;3m[SequelizeModule] [39m[31mUnable to connect to the database. Retrying (9)...[39m
SequelizeDatabaseError: column "originalCurrencyAmount" cannot be cast automatically to type integer
    at Query.formatError (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:392:16)
    at Query.run (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:87:18)
    at process._tickCallback (internal/process/next_tick.js:68:7)
[31m[Nest] 1724572  - [39m12/09/2021, 12:47:32 PM [31m  ERROR[39m [38;5;3m[ExceptionHandler] [39m[31mcolumn "originalCurrencyAmount" cannot be cast automatically to type integer[39m
SequelizeDatabaseError: column "originalCurrencyAmount" cannot be cast automatically to type integer
    at Query.formatError (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:392:16)
    at Query.run (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:87:18)
    at process._tickCallback (internal/process/next_tick.js:68:7)
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! nest-typescript-starter@1.0.0 start:prod: `node dist/main`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the nest-typescript-starter@1.0.0 start:prod script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.

npm ERR! A complete log of this run can be found in:
npm ERR!     /home/wadiahex/.npm/_logs/2021-12-09T17_47_32_543Z-debug.log

> nest-typescript-starter@1.0.0 start:prod /home/wadiahex/nBanking-ExternalTransactions
> node dist/main

[32m[Nest] 1818752  - [39m12/09/2021, 12:50:33 PM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 1818752  - [39m12/09/2021, 12:50:33 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMailerModule dependencies initialized[39m[38;5;3m +72ms[39m
[32m[Nest] 1818752  - [39m12/09/2021, 12:50:33 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1818752  - [39m12/09/2021, 12:50:33 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1818752  - [39m12/09/2021, 12:50:33 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1818752  - [39m12/09/2021, 12:50:33 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mCacheModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1818752  - [39m12/09/2021, 12:50:33 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHttpModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1818752  - [39m12/09/2021, 12:50:33 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigHostModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1818752  - [39m12/09/2021, 12:50:33 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1818752  - [39m12/09/2021, 12:50:33 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1818752  - [39m12/09/2021, 12:50:33 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHelperModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1818752  - [39m12/09/2021, 12:50:33 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMailerCoreModule dependencies initialized[39m[38;5;3m +479ms[39m
Executing (default): SELECT 1+1 AS result
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntities" ("code" VARCHAR(255) , "masterAccountCode" VARCHAR(255), "userName" VARCHAR(255), "source" INTEGER, "extraData" JSON, "lastTransactionDate" TIMESTAMP WITH TIME ZONE, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("code"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntities' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntities' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" TYPE INTEGER;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntities' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntityMovements" ("id"  SERIAL , "externalEntityCode" VARCHAR(255) REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE, "transactionNumber" VARCHAR(255), "transactionDateTime" TIMESTAMP WITH TIME ZONE, "accountReferenceNumber" VARCHAR(255), "originalCurrency" VARCHAR(255), "originalCurrencyAmount" DECIMAL(30,8), "TargetCurrency" VARCHAR(255), "TargetCurrencyAmount" DECIMAL(30,8), "OriginalToTargetExchangeRate" DECIMAL(18,8), "Description" VARCHAR(255), "Status" VARCHAR(255), "ConfirmedDateTime" TIMESTAMP WITH TIME ZONE, "ProcessedDateTime" TIMESTAMP WITH TIME ZONE, "ErrorMessage" VARCHAR(255), "FullData" JSON, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("id"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntityMovements' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntityMovements' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntityMovements" DROP CONSTRAINT "ExternalEntityMovements_externalEntityCode_fkey"
Executing (default): ALTER TABLE "ExternalEntityMovements"  ADD FOREIGN KEY ("externalEntityCode") REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" TYPE DECIMAL(30,8);
[31m[Nest] 1818752  - [39m12/09/2021, 12:50:33 PM [31m  ERROR[39m [38;5;3m[SequelizeModule] [39m[31mUnable to connect to the database. Retrying (1)...[39m
SequelizeDatabaseError: column "originalCurrencyAmount" cannot be cast automatically to type numeric
    at Query.formatError (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:392:16)
    at Query.run (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:87:18)
    at process._tickCallback (internal/process/next_tick.js:68:7)
Executing (default): SELECT 1+1 AS result
Executing (default): SELECT 1+1 AS result
[32m[Nest] 1818752  - [39m12/09/2021, 12:50:35 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeCoreModule dependencies initialized[39m[38;5;3m +1364ms[39m
Executing (default): SELECT 1+1 AS result
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntities" ("code" VARCHAR(255) , "masterAccountCode" VARCHAR(255), "userName" VARCHAR(255), "source" INTEGER, "extraData" JSON, "lastTransactionDate" TIMESTAMP WITH TIME ZONE, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("code"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntities' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntities' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" TYPE INTEGER;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntities' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntityMovements" ("id"  SERIAL , "externalEntityCode" VARCHAR(255) REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE, "transactionNumber" VARCHAR(255), "transactionDateTime" TIMESTAMP WITH TIME ZONE, "accountReferenceNumber" VARCHAR(255), "originalCurrency" VARCHAR(255), "originalCurrencyAmount" DECIMAL(30,8), "TargetCurrency" VARCHAR(255), "TargetCurrencyAmount" DECIMAL(30,8), "OriginalToTargetExchangeRate" DECIMAL(18,8), "Description" VARCHAR(255), "Status" VARCHAR(255), "ConfirmedDateTime" TIMESTAMP WITH TIME ZONE, "ProcessedDateTime" TIMESTAMP WITH TIME ZONE, "ErrorMessage" VARCHAR(255), "FullData" JSON, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("id"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntityMovements' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntityMovements' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntityMovements" DROP CONSTRAINT "ExternalEntityMovements_externalEntityCode_fkey"
Executing (default): ALTER TABLE "ExternalEntityMovements"  ADD FOREIGN KEY ("externalEntityCode") REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" TYPE DECIMAL(30,8);
[31m[Nest] 1818752  - [39m12/09/2021, 12:50:36 PM [31m  ERROR[39m [38;5;3m[SequelizeModule] [39m[31mUnable to connect to the database. Retrying (2)...[39m
SequelizeDatabaseError: column "originalCurrencyAmount" cannot be cast automatically to type numeric
    at Query.formatError (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:392:16)
    at Query.run (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:87:18)
    at process._tickCallback (internal/process/next_tick.js:68:7)
Executing (default): SELECT 1+1 AS result
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntities" ("code" VARCHAR(255) , "masterAccountCode" VARCHAR(255), "userName" VARCHAR(255), "source" INTEGER, "extraData" JSON, "lastTransactionDate" TIMESTAMP WITH TIME ZONE, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("code"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntities' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntities' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" TYPE INTEGER;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntities' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntityMovements" ("id"  SERIAL , "externalEntityCode" VARCHAR(255) REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE, "transactionNumber" VARCHAR(255), "transactionDateTime" TIMESTAMP WITH TIME ZONE, "accountReferenceNumber" VARCHAR(255), "originalCurrency" VARCHAR(255), "originalCurrencyAmount" DECIMAL(30,8), "TargetCurrency" VARCHAR(255), "TargetCurrencyAmount" DECIMAL(30,8), "OriginalToTargetExchangeRate" DECIMAL(18,8), "Description" VARCHAR(255), "Status" VARCHAR(255), "ConfirmedDateTime" TIMESTAMP WITH TIME ZONE, "ProcessedDateTime" TIMESTAMP WITH TIME ZONE, "ErrorMessage" VARCHAR(255), "FullData" JSON, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("id"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntityMovements' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntityMovements' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntityMovements" DROP CONSTRAINT "ExternalEntityMovements_externalEntityCode_fkey"
Executing (default): ALTER TABLE "ExternalEntityMovements"  ADD FOREIGN KEY ("externalEntityCode") REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" TYPE DECIMAL(30,8);
[31m[Nest] 1818752  - [39m12/09/2021, 12:50:39 PM [31m  ERROR[39m [38;5;3m[SequelizeModule] [39m[31mUnable to connect to the database. Retrying (3)...[39m
SequelizeDatabaseError: column "originalCurrencyAmount" cannot be cast automatically to type numeric
    at Query.formatError (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:392:16)
    at Query.run (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:87:18)
    at process._tickCallback (internal/process/next_tick.js:68:7)
Executing (default): SELECT 1+1 AS result
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntities" ("code" VARCHAR(255) , "masterAccountCode" VARCHAR(255), "userName" VARCHAR(255), "source" INTEGER, "extraData" JSON, "lastTransactionDate" TIMESTAMP WITH TIME ZONE, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("code"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntities' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntities' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" TYPE INTEGER;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntities' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntityMovements" ("id"  SERIAL , "externalEntityCode" VARCHAR(255) REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE, "transactionNumber" VARCHAR(255), "transactionDateTime" TIMESTAMP WITH TIME ZONE, "accountReferenceNumber" VARCHAR(255), "originalCurrency" VARCHAR(255), "originalCurrencyAmount" DECIMAL(30,8), "TargetCurrency" VARCHAR(255), "TargetCurrencyAmount" DECIMAL(30,8), "OriginalToTargetExchangeRate" DECIMAL(18,8), "Description" VARCHAR(255), "Status" VARCHAR(255), "ConfirmedDateTime" TIMESTAMP WITH TIME ZONE, "ProcessedDateTime" TIMESTAMP WITH TIME ZONE, "ErrorMessage" VARCHAR(255), "FullData" JSON, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("id"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntityMovements' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntityMovements' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntityMovements" DROP CONSTRAINT "ExternalEntityMovements_externalEntityCode_fkey"
Executing (default): ALTER TABLE "ExternalEntityMovements"  ADD FOREIGN KEY ("externalEntityCode") REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" TYPE DECIMAL(30,8);
[31m[Nest] 1818752  - [39m12/09/2021, 12:50:42 PM [31m  ERROR[39m [38;5;3m[SequelizeModule] [39m[31mUnable to connect to the database. Retrying (4)...[39m
SequelizeDatabaseError: column "originalCurrencyAmount" cannot be cast automatically to type numeric
    at Query.formatError (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:392:16)
    at Query.run (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:87:18)
    at process._tickCallback (internal/process/next_tick.js:68:7)
Executing (default): SELECT 1+1 AS result
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntities" ("code" VARCHAR(255) , "masterAccountCode" VARCHAR(255), "userName" VARCHAR(255), "source" INTEGER, "extraData" JSON, "lastTransactionDate" TIMESTAMP WITH TIME ZONE, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("code"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntities' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntities' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" TYPE INTEGER;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntities' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntityMovements" ("id"  SERIAL , "externalEntityCode" VARCHAR(255) REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE, "transactionNumber" VARCHAR(255), "transactionDateTime" TIMESTAMP WITH TIME ZONE, "accountReferenceNumber" VARCHAR(255), "originalCurrency" VARCHAR(255), "originalCurrencyAmount" DECIMAL(30,8), "TargetCurrency" VARCHAR(255), "TargetCurrencyAmount" DECIMAL(30,8), "OriginalToTargetExchangeRate" DECIMAL(18,8), "Description" VARCHAR(255), "Status" VARCHAR(255), "ConfirmedDateTime" TIMESTAMP WITH TIME ZONE, "ProcessedDateTime" TIMESTAMP WITH TIME ZONE, "ErrorMessage" VARCHAR(255), "FullData" JSON, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("id"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntityMovements' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntityMovements' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntityMovements" DROP CONSTRAINT "ExternalEntityMovements_externalEntityCode_fkey"
Executing (default): ALTER TABLE "ExternalEntityMovements"  ADD FOREIGN KEY ("externalEntityCode") REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" TYPE DECIMAL(30,8);
[31m[Nest] 1818752  - [39m12/09/2021, 12:50:46 PM [31m  ERROR[39m [38;5;3m[SequelizeModule] [39m[31mUnable to connect to the database. Retrying (5)...[39m
SequelizeDatabaseError: column "originalCurrencyAmount" cannot be cast automatically to type numeric
    at Query.formatError (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:392:16)
    at Query.run (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:87:18)
    at process._tickCallback (internal/process/next_tick.js:68:7)
Executing (default): SELECT 1+1 AS result
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntities" ("code" VARCHAR(255) , "masterAccountCode" VARCHAR(255), "userName" VARCHAR(255), "source" INTEGER, "extraData" JSON, "lastTransactionDate" TIMESTAMP WITH TIME ZONE, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("code"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntities' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntities' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" TYPE INTEGER;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntities' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntityMovements" ("id"  SERIAL , "externalEntityCode" VARCHAR(255) REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE, "transactionNumber" VARCHAR(255), "transactionDateTime" TIMESTAMP WITH TIME ZONE, "accountReferenceNumber" VARCHAR(255), "originalCurrency" VARCHAR(255), "originalCurrencyAmount" DECIMAL(30,8), "TargetCurrency" VARCHAR(255), "TargetCurrencyAmount" DECIMAL(30,8), "OriginalToTargetExchangeRate" DECIMAL(18,8), "Description" VARCHAR(255), "Status" VARCHAR(255), "ConfirmedDateTime" TIMESTAMP WITH TIME ZONE, "ProcessedDateTime" TIMESTAMP WITH TIME ZONE, "ErrorMessage" VARCHAR(255), "FullData" JSON, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("id"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntityMovements' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntityMovements' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntityMovements" DROP CONSTRAINT "ExternalEntityMovements_externalEntityCode_fkey"
Executing (default): ALTER TABLE "ExternalEntityMovements"  ADD FOREIGN KEY ("externalEntityCode") REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" TYPE DECIMAL(30,8);
[31m[Nest] 1818752  - [39m12/09/2021, 12:50:49 PM [31m  ERROR[39m [38;5;3m[SequelizeModule] [39m[31mUnable to connect to the database. Retrying (6)...[39m
SequelizeDatabaseError: column "originalCurrencyAmount" cannot be cast automatically to type numeric
    at Query.formatError (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:392:16)
    at Query.run (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:87:18)
    at process._tickCallback (internal/process/next_tick.js:68:7)
Executing (default): SELECT 1+1 AS result
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntities" ("code" VARCHAR(255) , "masterAccountCode" VARCHAR(255), "userName" VARCHAR(255), "source" INTEGER, "extraData" JSON, "lastTransactionDate" TIMESTAMP WITH TIME ZONE, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("code"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntities' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntities' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" TYPE INTEGER;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntities' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntityMovements" ("id"  SERIAL , "externalEntityCode" VARCHAR(255) REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE, "transactionNumber" VARCHAR(255), "transactionDateTime" TIMESTAMP WITH TIME ZONE, "accountReferenceNumber" VARCHAR(255), "originalCurrency" VARCHAR(255), "originalCurrencyAmount" DECIMAL(30,8), "TargetCurrency" VARCHAR(255), "TargetCurrencyAmount" DECIMAL(30,8), "OriginalToTargetExchangeRate" DECIMAL(18,8), "Description" VARCHAR(255), "Status" VARCHAR(255), "ConfirmedDateTime" TIMESTAMP WITH TIME ZONE, "ProcessedDateTime" TIMESTAMP WITH TIME ZONE, "ErrorMessage" VARCHAR(255), "FullData" JSON, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("id"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntityMovements' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntityMovements' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntityMovements" DROP CONSTRAINT "ExternalEntityMovements_externalEntityCode_fkey"
Executing (default): ALTER TABLE "ExternalEntityMovements"  ADD FOREIGN KEY ("externalEntityCode") REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" TYPE DECIMAL(30,8);
[31m[Nest] 1818752  - [39m12/09/2021, 12:50:52 PM [31m  ERROR[39m [38;5;3m[SequelizeModule] [39m[31mUnable to connect to the database. Retrying (7)...[39m
SequelizeDatabaseError: column "originalCurrencyAmount" cannot be cast automatically to type numeric
    at Query.formatError (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:392:16)
    at Query.run (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:87:18)
    at process._tickCallback (internal/process/next_tick.js:68:7)
Executing (default): SELECT 1+1 AS result
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntities" ("code" VARCHAR(255) , "masterAccountCode" VARCHAR(255), "userName" VARCHAR(255), "source" INTEGER, "extraData" JSON, "lastTransactionDate" TIMESTAMP WITH TIME ZONE, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("code"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntities' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntities' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" TYPE INTEGER;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntities' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntityMovements" ("id"  SERIAL , "externalEntityCode" VARCHAR(255) REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE, "transactionNumber" VARCHAR(255), "transactionDateTime" TIMESTAMP WITH TIME ZONE, "accountReferenceNumber" VARCHAR(255), "originalCurrency" VARCHAR(255), "originalCurrencyAmount" DECIMAL(30,8), "TargetCurrency" VARCHAR(255), "TargetCurrencyAmount" DECIMAL(30,8), "OriginalToTargetExchangeRate" DECIMAL(18,8), "Description" VARCHAR(255), "Status" VARCHAR(255), "ConfirmedDateTime" TIMESTAMP WITH TIME ZONE, "ProcessedDateTime" TIMESTAMP WITH TIME ZONE, "ErrorMessage" VARCHAR(255), "FullData" JSON, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("id"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntityMovements' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntityMovements' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntityMovements" DROP CONSTRAINT "ExternalEntityMovements_externalEntityCode_fkey"
Executing (default): ALTER TABLE "ExternalEntityMovements"  ADD FOREIGN KEY ("externalEntityCode") REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" TYPE DECIMAL(30,8);
[31m[Nest] 1818752  - [39m12/09/2021, 12:50:55 PM [31m  ERROR[39m [38;5;3m[SequelizeModule] [39m[31mUnable to connect to the database. Retrying (8)...[39m
SequelizeDatabaseError: column "originalCurrencyAmount" cannot be cast automatically to type numeric
    at Query.formatError (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:392:16)
    at Query.run (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:87:18)
    at process._tickCallback (internal/process/next_tick.js:68:7)
Executing (default): SELECT 1+1 AS result
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntities" ("code" VARCHAR(255) , "masterAccountCode" VARCHAR(255), "userName" VARCHAR(255), "source" INTEGER, "extraData" JSON, "lastTransactionDate" TIMESTAMP WITH TIME ZONE, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("code"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntities' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntities' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" TYPE INTEGER;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntities' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntityMovements" ("id"  SERIAL , "externalEntityCode" VARCHAR(255) REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE, "transactionNumber" VARCHAR(255), "transactionDateTime" TIMESTAMP WITH TIME ZONE, "accountReferenceNumber" VARCHAR(255), "originalCurrency" VARCHAR(255), "originalCurrencyAmount" DECIMAL(30,8), "TargetCurrency" VARCHAR(255), "TargetCurrencyAmount" DECIMAL(30,8), "OriginalToTargetExchangeRate" DECIMAL(18,8), "Description" VARCHAR(255), "Status" VARCHAR(255), "ConfirmedDateTime" TIMESTAMP WITH TIME ZONE, "ProcessedDateTime" TIMESTAMP WITH TIME ZONE, "ErrorMessage" VARCHAR(255), "FullData" JSON, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("id"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntityMovements' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntityMovements' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntityMovements" DROP CONSTRAINT "ExternalEntityMovements_externalEntityCode_fkey"
Executing (default): ALTER TABLE "ExternalEntityMovements"  ADD FOREIGN KEY ("externalEntityCode") REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" TYPE DECIMAL(30,8);
[31m[Nest] 1818752  - [39m12/09/2021, 12:50:58 PM [31m  ERROR[39m [38;5;3m[SequelizeModule] [39m[31mUnable to connect to the database. Retrying (9)...[39m
SequelizeDatabaseError: column "originalCurrencyAmount" cannot be cast automatically to type numeric
    at Query.formatError (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:392:16)
    at Query.run (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:87:18)
    at process._tickCallback (internal/process/next_tick.js:68:7)
[31m[Nest] 1818752  - [39m12/09/2021, 12:50:58 PM [31m  ERROR[39m [38;5;3m[ExceptionHandler] [39m[31mcolumn "originalCurrencyAmount" cannot be cast automatically to type numeric[39m
SequelizeDatabaseError: column "originalCurrencyAmount" cannot be cast automatically to type numeric
    at Query.formatError (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:392:16)
    at Query.run (/home/wadiahex/nBanking-ExternalTransactions/node_modules/sequelize/lib/dialects/postgres/query.js:87:18)
    at process._tickCallback (internal/process/next_tick.js:68:7)
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! nest-typescript-starter@1.0.0 start:prod: `node dist/main`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the nest-typescript-starter@1.0.0 start:prod script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.

npm ERR! A complete log of this run can be found in:
npm ERR!     /home/wadiahex/.npm/_logs/2021-12-09T17_50_58_405Z-debug.log

> nest-typescript-starter@1.0.0 start:prod /home/wadiahex/nBanking-ExternalTransactions
> node dist/main

[32m[Nest] 1824554  - [39m12/09/2021, 12:52:31 PM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 1824554  - [39m12/09/2021, 12:52:31 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMailerModule dependencies initialized[39m[38;5;3m +78ms[39m
[32m[Nest] 1824554  - [39m12/09/2021, 12:52:31 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 1824554  - [39m12/09/2021, 12:52:31 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1824554  - [39m12/09/2021, 12:52:31 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1824554  - [39m12/09/2021, 12:52:31 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mCacheModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1824554  - [39m12/09/2021, 12:52:31 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHttpModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1824554  - [39m12/09/2021, 12:52:31 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigHostModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1824554  - [39m12/09/2021, 12:52:31 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1824554  - [39m12/09/2021, 12:52:31 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1824554  - [39m12/09/2021, 12:52:31 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHelperModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1824554  - [39m12/09/2021, 12:52:32 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMailerCoreModule dependencies initialized[39m[38;5;3m +499ms[39m
Executing (default): SELECT 1+1 AS result
Executing (default): DROP TABLE IF EXISTS "ExternalEntityMovements" CASCADE;
Executing (default): DROP TABLE IF EXISTS "ExternalEntities" CASCADE;
Executing (default): DROP TABLE IF EXISTS "ExternalEntities" CASCADE;
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntities" ("code" VARCHAR(255) , "masterAccountCode" VARCHAR(255), "userName" VARCHAR(255), "source" INTEGER, "extraData" JSON, "lastTransactionDate" TIMESTAMP WITH TIME ZONE, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("code"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntities' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntities' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" TYPE INTEGER;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntities' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): DROP TABLE IF EXISTS "ExternalEntityMovements" CASCADE;
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntityMovements" ("id"  SERIAL , "externalEntityCode" VARCHAR(255) REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE, "transactionNumber" VARCHAR(255), "transactionDateTime" TIMESTAMP WITH TIME ZONE, "accountReferenceNumber" VARCHAR(255), "originalCurrency" VARCHAR(255), "originalCurrencyAmount" DECIMAL(30,8), "TargetCurrency" VARCHAR(255), "TargetCurrencyAmount" DECIMAL(30,8), "OriginalToTargetExchangeRate" DECIMAL(18,8), "Description" VARCHAR(255), "Status" VARCHAR(255), "ConfirmedDateTime" TIMESTAMP WITH TIME ZONE, "ProcessedDateTime" TIMESTAMP WITH TIME ZONE, "ErrorMessage" VARCHAR(255), "FullData" JSON, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("id"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntityMovements' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntityMovements' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntityMovements" DROP CONSTRAINT "ExternalEntityMovements_externalEntityCode_fkey"
Executing (default): ALTER TABLE "ExternalEntityMovements"  ADD FOREIGN KEY ("externalEntityCode") REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" TYPE DECIMAL(30,8);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrencyAmount" TYPE DECIMAL(30,8);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "OriginalToTargetExchangeRate" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "OriginalToTargetExchangeRate" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "OriginalToTargetExchangeRate" TYPE DECIMAL(18,8);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Description" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Description" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Description" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Status" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Status" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Status" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ConfirmedDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ConfirmedDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ConfirmedDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ProcessedDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ProcessedDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ProcessedDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ErrorMessage" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ErrorMessage" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ErrorMessage" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "FullData" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "FullData" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "FullData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntityMovements' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
[32m[Nest] 1824554  - [39m12/09/2021, 12:52:32 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeCoreModule dependencies initialized[39m[38;5;3m +138ms[39m
[32m[Nest] 1824554  - [39m12/09/2021, 12:52:32 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +1ms[39m
Executing (default): SELECT 1+1 AS result
Executing (default): SELECT 1+1 AS result
[32m[Nest] 1824554  - [39m12/09/2021, 12:52:33 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeCoreModule dependencies initialized[39m[38;5;3m +1267ms[39m
[32m[Nest] 1824554  - [39m12/09/2021, 12:52:33 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTransactionsModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1824554  - [39m12/09/2021, 12:52:33 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1824554  - [39m12/09/2021, 12:52:33 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/}:[39m[38;5;3m +9ms[39m
[32m[Nest] 1824554  - [39m12/09/2021, 12:52:33 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/process-transactions/jeeves, GET} route[39m[38;5;3m +4ms[39m
[32m[Nest] 1824554  - [39m12/09/2021, 12:52:33 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1824554  - [39m12/09/2021, 12:52:33 PM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +6ms[39m

> nest-typescript-starter@1.0.0 start:prod /home/wadiahex/nBanking-ExternalTransactions
> node dist/main

[32m[Nest] 1825858  - [39m12/09/2021, 12:53:05 PM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 1825858  - [39m12/09/2021, 12:53:05 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMailerModule dependencies initialized[39m[38;5;3m +110ms[39m
[32m[Nest] 1825858  - [39m12/09/2021, 12:53:05 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1825858  - [39m12/09/2021, 12:53:05 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1825858  - [39m12/09/2021, 12:53:05 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1825858  - [39m12/09/2021, 12:53:05 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mCacheModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1825858  - [39m12/09/2021, 12:53:05 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHttpModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1825858  - [39m12/09/2021, 12:53:05 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigHostModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1825858  - [39m12/09/2021, 12:53:05 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1825858  - [39m12/09/2021, 12:53:05 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1825858  - [39m12/09/2021, 12:53:05 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mHelperModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 1825858  - [39m12/09/2021, 12:53:06 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mMailerCoreModule dependencies initialized[39m[38;5;3m +546ms[39m
Executing (default): SELECT 1+1 AS result
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntities" ("code" VARCHAR(255) , "masterAccountCode" VARCHAR(255), "userName" VARCHAR(255), "source" INTEGER, "extraData" JSON, "lastTransactionDate" TIMESTAMP WITH TIME ZONE, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("code"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntities' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntities' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "masterAccountCode" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "userName" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "source" TYPE INTEGER;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "extraData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "lastTransactionDate" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntities" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntities' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): CREATE TABLE IF NOT EXISTS "ExternalEntityMovements" ("id"  SERIAL , "externalEntityCode" VARCHAR(255) REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE, "transactionNumber" VARCHAR(255), "transactionDateTime" TIMESTAMP WITH TIME ZONE, "accountReferenceNumber" VARCHAR(255), "originalCurrency" VARCHAR(255), "originalCurrencyAmount" DECIMAL(30,8), "TargetCurrency" VARCHAR(255), "TargetCurrencyAmount" DECIMAL(30,8), "OriginalToTargetExchangeRate" DECIMAL(18,8), "Description" VARCHAR(255), "Status" VARCHAR(255), "ConfirmedDateTime" TIMESTAMP WITH TIME ZONE, "ProcessedDateTime" TIMESTAMP WITH TIME ZONE, "ErrorMessage" VARCHAR(255), "FullData" JSON, "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL, "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL, PRIMARY KEY ("id"));
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'ExternalEntityMovements' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'ExternalEntityMovements' AND tc.table_catalog = 'wadiahex_ternal'
Executing (default): ALTER TABLE "ExternalEntityMovements" DROP CONSTRAINT "ExternalEntityMovements_externalEntityCode_fkey"
Executing (default): ALTER TABLE "ExternalEntityMovements"  ADD FOREIGN KEY ("externalEntityCode") REFERENCES "ExternalEntities" ("code") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "transactionDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "accountReferenceNumber" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "originalCurrencyAmount" TYPE DECIMAL(30,8);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrency" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrency" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrencyAmount" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrencyAmount" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "TargetCurrencyAmount" TYPE DECIMAL(30,8);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "OriginalToTargetExchangeRate" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "OriginalToTargetExchangeRate" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "OriginalToTargetExchangeRate" TYPE DECIMAL(18,8);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Description" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Description" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Description" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Status" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Status" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "Status" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ConfirmedDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ConfirmedDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ConfirmedDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ProcessedDateTime" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ProcessedDateTime" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ProcessedDateTime" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ErrorMessage" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ErrorMessage" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "ErrorMessage" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "FullData" DROP NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "FullData" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "FullData" TYPE JSON;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ExternalEntityMovements" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'ExternalEntityMovements' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
[32m[Nest] 1825858  - [39m12/09/2021, 12:53:06 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeCoreModule dependencies initialized[39m[38;5;3m +126ms[39m
[32m[Nest] 1825858  - [39m12/09/2021, 12:53:06 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeModule dependencies initialized[39m[38;5;3m +2ms[39m
Executing (default): SELECT 1+1 AS result
Executing (default): SELECT 1+1 AS result
[32m[Nest] 1825858  - [39m12/09/2021, 12:53:07 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSequelizeCoreModule dependencies initialized[39m[38;5;3m +1001ms[39m
[32m[Nest] 1825858  - [39m12/09/2021, 12:53:07 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mTransactionsModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 1825858  - [39m12/09/2021, 12:53:07 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1825858  - [39m12/09/2021, 12:53:07 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/}:[39m[38;5;3m +8ms[39m
[32m[Nest] 1825858  - [39m12/09/2021, 12:53:07 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/process-transactions/jeeves, GET} route[39m[38;5;3m +5ms[39m
[32m[Nest] 1825858  - [39m12/09/2021, 12:53:07 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1825858  - [39m12/09/2021, 12:53:07 PM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +5ms[39m
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): INSERT INTO "ExternalEntities" ("code","masterAccountCode","userName","source","extraData","createdAt","updatedAt") VALUES ($1,$2,$3,$4,$5,$6,$7) RETURNING "code","masterAccountCode","userName","source","extraData","lastTransactionDate","createdAt","updatedAt";
entity:  null
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2595.4 2000 100000
2595.4 1500 100000
2595.4 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315987';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '310225';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '308190';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '308139';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '304506';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '304381';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '304312';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '304270';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '295931';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '293876';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '293562';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '286923';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '286277';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '280117';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '279627';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '279252';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '276291';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '274908';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '271196';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '268663';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '268620';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '268054';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '268053';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '261726';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '257930';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '257556';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '257525';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '252549';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '252531';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '251975';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '250053';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '249617';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '246635';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '245366';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '244080';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '236165';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '235460';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '234158';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '233583';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '233427';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '233102';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '230921';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '229858';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '229794';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '229787';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '229782';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '229752';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '229704';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '227144';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '223664';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315377';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '312838';
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Sasbon/Cloe',@number=N'JV-315987',@originalAmount=N'125.84000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'99.84000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'1747 DHL WSI Shipment',@source=3,@status=1,@date=N'2021-12-09T17:52:05.000Z',@extraData=N'{"id":315987,"transactionAmount":"99.84","transactionDateTime":"2021-12-09T17:52:03.000Z","completedAt":"2021-12-09T17:52:05.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"virtual","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"125.84","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1663,"firstName":"Sasbon ","lastName":"Cloe","role":"admin"},"merchant":{"id":6452,"name":"DHL WSI Shipment","address":"BONN, DE","description":"Courier Services Air and Ground, Freight Forwarders","website":null},"card":{"id":7989,"name":"","cardNumber":"1747"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Sasbon/Cloe',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-310225',@originalAmount=N'64.80000000',@originalCurrencyCode=N'USD',@convertedAmount=N'64.80000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-12-08T12:59:01.000Z',@extraData=N'{"id":310225,"transactionAmount":"64.80","transactionDateTime":"2021-12-08T12:59:01.000Z","completedAt":"2021-12-08T12:59:01.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"64.8","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Aliah/Reebo',@number=N'JV-308190',@originalAmount=N'17.89000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'14.03000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'2993 MY ZAIDY''S BAKERY',@source=3,@status=1,@date=N'2021-12-09T16:55:51.000Z',@extraData=N'{"id":308190,"transactionAmount":"14.03","transactionDateTime":"2021-12-07T22:14:20.000Z","completedAt":"2021-12-09T16:55:51.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"17.89","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":2294,"firstName":"Aliah","lastName":"Reebo","role":"employee"},"merchant":{"id":134326,"name":"MY ZAIDY''S BAKERY","address":"THORNHILL, ON, CA","description":"Bakeries","website":null},"card":{"id":12457,"name":"Primary","cardNumber":"2993"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Aliah/Reebo',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Aliah/Reebo',@number=N'JV-308139',@originalAmount=N'28.73000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'22.54000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'2993 ANTHONY''S NO FRILLS #3',@source=3,@status=1,@date=N'2021-12-08T16:49:07.000Z',@extraData=N'{"id":308139,"transactionAmount":"22.54","transactionDateTime":"2021-12-07T21:57:30.000Z","completedAt":"2021-12-08T16:49:07.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"28.73","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":2294,"firstName":"Aliah","lastName":"Reebo","role":"employee"},"merchant":{"id":134304,"name":"ANTHONY''S NO FRILLS #3","address":"VAUGHAN, ON, CA","description":"Grocery Stores, Supermarkets","website":null},"card":{"id":12457,"name":"Primary","cardNumber":"2993"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Aliah/Reebo',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Shlomo/Ovadiah',@number=N'JV-304506',@originalAmount=N'20.52000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'16.10000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'3937 UBER* TRIP',@source=3,@status=1,@date=N'2021-12-07T16:27:44.000Z',@extraData=N'{"id":304506,"transactionAmount":"16.10","transactionDateTime":"2021-12-06T21:49:37.000Z","completedAt":"2021-12-07T16:27:44.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"virtual","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"20.52","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1104,"firstName":"Shlomo ","lastName":"Ovadiah ","role":"admin"},"merchant":{"id":43179,"name":"UBER* TRIP","address":"UBER.COM/CA/E, ON, CA","description":"Limousines and Taxicabs","website":null},"card":{"id":4314,"name":"bestbuy","cardNumber":"3937"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 3,
  reference: 'Shlomo/Ovadiah',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Shlomo/Ovadiah',@number=N'JV-304381',@originalAmount=N'102.61000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'80.55000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'3937 UBER CANADA',@source=3,@status=1,@date=N'2021-12-07T16:47:50.000Z',@extraData=N'{"id":304381,"transactionAmount":"80.55","transactionDateTime":"2021-12-06T21:08:23.000Z","completedAt":"2021-12-07T16:47:50.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"virtual","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"102.61","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1104,"firstName":"Shlomo ","lastName":"Ovadiah ","role":"admin"},"merchant":{"id":58669,"name":"UBER CANADA","address":"TORONTO, ON, CA","description":"Limousines and Taxicabs","website":null},"card":{"id":4314,"name":"bestbuy","cardNumber":"3937"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 3,
  reference: 'Shlomo/Ovadiah',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Shlomo/Ovadiah',@number=N'JV-304312',@originalAmount=N'82.17000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'64.50000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'3937 UBER CANADA',@source=3,@status=1,@date=N'2021-12-07T16:54:10.000Z',@extraData=N'{"id":304312,"transactionAmount":"64.50","transactionDateTime":"2021-12-06T20:57:05.000Z","completedAt":"2021-12-07T16:54:10.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"virtual","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"82.17","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1104,"firstName":"Shlomo ","lastName":"Ovadiah ","role":"admin"},"merchant":{"id":58669,"name":"UBER CANADA","address":"TORONTO, ON, CA","description":"Limousines and Taxicabs","website":null},"card":{"id":4314,"name":"bestbuy","cardNumber":"3937"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 3,
  reference: 'Shlomo/Ovadiah',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Shlomo/Ovadiah',@number=N'JV-304270',@originalAmount=N'205.92000000',@originalCurrencyCode=N'USD',@convertedAmount=N'205.92000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'4946 ILSOLS LLC',@source=3,@status=1,@date=N'2021-12-07T16:18:39.000Z',@extraData=N'{"id":304270,"transactionAmount":"205.92","transactionDateTime":"2021-12-06T20:47:42.000Z","completedAt":"2021-12-07T16:18:39.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"virtual","paymentType":"cards","description":null,"currency":840,"localCurrency":840,"localCurrencyAmount":"205.92","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1104,"firstName":"Shlomo ","lastName":"Ovadiah ","role":"admin"},"merchant":{"id":133180,"name":"ILSOLS LLC","address":"305-2030759, FL, US","description":"Transportation Services","website":null},"card":{"id":30463,"name":"Rafa Lobo","cardNumber":"4946"},"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 3,
  reference: 'Shlomo/Ovadiah',
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Shlomo/Ovadiah',@number=N'JV-286277',@originalAmount=N'624.96000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'491.09000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'4267 BEST BUY #947',@source=3,@status=1,@date=N'2021-12-01T17:48:29.000Z',@extraData=N'{"id":286277,"transactionAmount":"491.09","transactionDateTime":"2021-12-01T00:31:38.000Z","completedAt":"2021-12-01T17:48:29.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"624.96","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1104,"firstName":"Shlomo ","lastName":"Ovadiah ","role":"admin"},"merchant":{"id":127479,"name":"BEST BUY #947","address":"CALGARY, AB, CA","description":"Electronic Sales","website":null},"card":{"id":7347,"name":"Primary","cardNumber":"4267"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 0,
  reference: 'Shlomo/Ovadiah',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-276291',@originalAmount=N'4780.00000000',@originalCurrencyCode=N'USD',@convertedAmount=N'4780.00000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-11-27T00:06:55.000Z',@extraData=N'{"id":276291,"transactionAmount":"4780.00","transactionDateTime":"2021-11-27T00:06:55.000Z","completedAt":"2021-11-27T00:06:55.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"settlement","description":"4780 USD Paid","currency":840,"localCurrency":840,"localCurrencyAmount":"4780","memo":"","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":null,"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Erica/Bethancourt',@number=N'JV-271196',@originalAmount=N'470.70000000',@originalCurrencyCode=N'USD',@convertedAmount=N'470.70000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'3796 LOLTEC COMPUTER TUMBA',@source=3,@status=1,@date=N'2021-11-27T16:58:19.000Z',@extraData=N'{"id":271196,"transactionAmount":"470.70","transactionDateTime":"2021-11-25T14:34:06.000Z","completedAt":"2021-11-27T16:58:19.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":840,"localCurrencyAmount":"470.7","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1600,"firstName":"Erica","lastName":"Bethancourt","role":"employee"},"merchant":{"id":122610,"name":"LOLTEC COMPUTER TUMBA","address":"PANAMA, PA","description":"Computer Software Stores","website":null},"card":{"id":7485,"name":"Primary","cardNumber":"3796"},"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Erica/Bethancourt',
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Erica/Bethancourt',@number=N'JV-257930',@originalAmount=N'480.00000000',@originalCurrencyCode=N'USD',@convertedAmount=N'480.00000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'3796 GALERIAS DRILO',@source=3,@status=1,@date=N'2021-11-20T18:49:08.000Z',@extraData=N'{"id":257930,"transactionAmount":"480.00","transactionDateTime":"2021-11-19T21:30:15.000Z","completedAt":"2021-11-20T18:49:08.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":840,"localCurrencyAmount":"480","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1600,"firstName":"Erica","lastName":"Bethancourt","role":"employee"},"merchant":{"id":117618,"name":"GALERIAS DRILO","address":"ANCON, PA","description":"Variety Stores","website":null},"card":{"id":7485,"name":"Primary","cardNumber":"3796"},"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Erica/Bethancourt',
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Aliah/Reebo',@number=N'JV-252531',@originalAmount=N'3.54000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'2.83000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'2993 STARBUCKS #04412#',@source=3,@status=1,@date=N'2021-11-19T16:22:57.000Z',@extraData=N'{"id":252531,"transactionAmount":"2.83","transactionDateTime":"2021-11-17T22:28:39.000Z","completedAt":"2021-11-19T16:22:57.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"3.54","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":2294,"firstName":"Aliah","lastName":"Reebo","role":"employee"},"merchant":{"id":107122,"name":"STARBUCKS #04412#","address":"CALGARY, AB, CA","description":"Miscellaneous Food Stores Convenience Stores, Markets, Specialty Stores","website":null},"card":{"id":12457,"name":"Primary","cardNumber":"2993"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Aliah/Reebo',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Erica/Bethancourt',@number=N'JV-245366',@originalAmount=N'16.84000000',@originalCurrencyCode=N'USD',@convertedAmount=N'16.84000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'3796 PANAGRAFICA',@source=3,@status=1,@date=N'2021-11-16T17:47:47.000Z',@extraData=N'{"id":245366,"transactionAmount":"16.84","transactionDateTime":"2021-11-15T15:02:15.000Z","completedAt":"2021-11-16T17:47:47.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":840,"localCurrencyAmount":"16.84","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1600,"firstName":"Erica","lastName":"Bethancourt","role":"employee"},"merchant":{"id":113322,"name":"PANAGRAFICA","address":"BELLA VISTA, PA","description":"Commercial Art, Graphics, Photography","website":null},"card":{"id":7485,"name":"Primary","cardNumber":"3796"},"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Erica/Bethancourt',
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Erica/Bethancourt',@number=N'JV-295931',@originalAmount=N'64.01000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'50.11000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'3796 STAPLESPRINT.CA',@source=3,@status=1,@date=N'2021-12-05T16:18:08.000Z',@extraData=N'{"id":295931,"transactionAmount":"50.11","transactionDateTime":"2021-12-03T16:47:26.000Z","completedAt":"2021-12-05T16:18:08.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"64.01","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1600,"firstName":"Erica","lastName":"Bethancourt","role":"employee"},"merchant":{"id":11758,"name":"STAPLESPRINT.CA","address":"RICHMOND HILL, ON, CA","description":"Office, School Supply, and Stationery Stores","website":null},"card":{"id":7485,"name":"Primary","cardNumber":"3796"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Erica/Bethancourt',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Shlomo/Ovadiah',@number=N'JV-280117',@originalAmount=N'369.60000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'292.34000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'4267 DECATHLON CALGARY',@source=3,@status=1,@date=N'2021-11-29T16:54:46.000Z',@extraData=N'{"id":280117,"transactionAmount":"292.34","transactionDateTime":"2021-11-28T22:49:39.000Z","completedAt":"2021-11-29T16:54:46.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"369.6","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1104,"firstName":"Shlomo ","lastName":"Ovadiah ","role":"admin"},"merchant":{"id":125559,"name":"DECATHLON CALGARY","address":"CALGARY, AB, CA","description":"Sporting Goods Stores","website":null},"card":{"id":7347,"name":"Primary","cardNumber":"4267"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 3,
  reference: 'Shlomo/Ovadiah',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Shlomo/Ovadiah',@number=N'JV-268663',@originalAmount=N'107.66000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'85.07000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'4267 SHOPPERS DRUG MART #2375',@source=3,@status=1,@date=N'2021-11-26T15:49:16.000Z',@extraData=N'{"id":268663,"transactionAmount":"85.07","transactionDateTime":"2021-11-24T16:45:08.000Z","completedAt":"2021-11-26T15:49:16.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"107.66","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1104,"firstName":"Shlomo ","lastName":"Ovadiah ","role":"admin"},"merchant":{"id":121675,"name":"SHOPPERS DRUG MART #2375","address":"CALGARY, AB, CA","description":"Drug Stores, Pharmacies","website":null},"card":{"id":7347,"name":"Primary","cardNumber":"4267"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 0,
  reference: 'Shlomo/Ovadiah',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=NULL,@number=N'JV-250053',@originalAmount=N'16.34000000',@originalCurrencyCode=N'USD',@convertedAmount=N'16.34000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=NULL,@source=3,@status=1,@date=N'2021-11-17T08:06:59.000Z',@extraData=N'{"id":250053,"transactionAmount":"16.34","transactionDateTime":"2021-11-17T08:06:59.000Z","completedAt":"2021-11-17T08:06:59.000Z","transactionStatus":"completed","transactionType":"credit","cardType":null,"paymentType":"adjustment","description":"Cashback","currency":840,"localCurrency":840,"localCurrencyAmount":"16.34","memo":"Jeeves Cashback","authStatus":null,"cardServiceType":"none","beneficiaryId":0,"subPaymentType":"cashback","stpTransactionId":null,"currencyAlphaCode":"USD","user":null,"merchant":{"id":3524,"name":"Jeeves Credit","address":null,"description":"Jeeves Credit","website":null},"card":null,"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: null,
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Johanes/Rosekrans',@number=N'JV-233583',@originalAmount=N'84.99000000',@originalCurrencyCode=N'EUR',@convertedAmount=N'97.65000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'3452 Coolblue',@source=3,@status=1,@date=N'2021-11-13T02:29:59.000Z',@extraData=N'{"id":233583,"transactionAmount":"97.65","transactionDateTime":"2021-11-10T15:00:11.000Z","completedAt":"2021-11-13T02:29:59.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":978,"localCurrencyAmount":"84.99","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1567,"firstName":"Johanes","lastName":"Rosekrans","role":"employee"},"merchant":{"id":100422,"name":"Coolblue","address":"Rotterdam, NL","description":"Electronic Sales","website":null},"card":{"id":7349,"name":"Primary","cardNumber":"3452"},"localCurrencyLookup":{"numericCode":978,"alphaCode":"EUR"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: -2,
  reference: 'Johanes/Rosekrans',
  originalCurrency: 'EUR',
  targetCurrency: 'USD' }
email sent
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Shlomo/Ovadiah',@number=N'JV-229752',@originalAmount=N'192.06000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'154.50000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'4267 WINNERS 466',@source=3,@status=1,@date=N'2021-11-09T17:19:46.000Z',@extraData=N'{"id":229752,"transactionAmount":"154.50","transactionDateTime":"2021-11-08T23:03:22.000Z","completedAt":"2021-11-09T17:19:46.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"192.06","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1104,"firstName":"Shlomo ","lastName":"Ovadiah ","role":"admin"},"merchant":{"id":107373,"name":"WINNERS 466","address":"CALGARY, AB, CA","description":"Family Clothing Stores","website":null},"card":{"id":7347,"name":"Primary","cardNumber":"4267"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 0,
  reference: 'Shlomo/Ovadiah',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Shlomo/Ovadiah',@number=N'JV-293876',@originalAmount=N'195.85000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'153.32000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'4267 DHL BRAMPTON MY BILL',@source=3,@status=1,@date=N'2021-12-03T19:27:19.000Z',@extraData=N'{"id":293876,"transactionAmount":"153.32","transactionDateTime":"2021-12-02T23:44:09.000Z","completedAt":"2021-12-03T19:27:19.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"195.85","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1104,"firstName":"Shlomo ","lastName":"Ovadiah ","role":"admin"},"merchant":{"id":24851,"name":"DHL BRAMPTON MY BILL","address":"BRAMPTON, ON, CA","description":"Courier Services Air and Ground, Freight Forwarders","website":null},"card":{"id":7347,"name":"Primary","cardNumber":"4267"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 0,
  reference: 'Shlomo/Ovadiah',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Aliah/Reebo',@number=N'JV-274908',@originalAmount=N'21.65000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'17.13000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'2993 SOBEYS #659',@source=3,@status=1,@date=N'2021-11-29T16:18:57.000Z',@extraData=N'{"id":274908,"transactionAmount":"17.13","transactionDateTime":"2021-11-26T17:13:37.000Z","completedAt":"2021-11-29T16:18:57.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"21.65","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":2294,"firstName":"Aliah","lastName":"Reebo","role":"employee"},"merchant":{"id":123827,"name":"SOBEYS #659","address":"THORNHILL, ON, CA","description":"Grocery Stores, Supermarkets","website":null},"card":{"id":12457,"name":"Primary","cardNumber":"2993"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Aliah/Reebo',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Sasbon/Cloe',@number=N'JV-257556',@originalAmount=N'6.99000000',@originalCurrencyCode=N'USD',@convertedAmount=N'6.99000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'1747 SKYPE.COM/GO/BILL',@source=3,@status=1,@date=N'2021-11-22T20:45:29.000Z',@extraData=N'{"id":257556,"transactionAmount":"6.99","transactionDateTime":"2021-11-19T19:30:45.000Z","completedAt":"2021-11-22T20:45:29.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"virtual","paymentType":"cards","description":null,"currency":840,"localCurrency":840,"localCurrencyAmount":"6.99","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1663,"firstName":"Sasbon ","lastName":"Cloe","role":"admin"},"merchant":{"id":10918,"name":"SKYPE.COM/GO/BILL","address":"Luxembourg, LU","description":"Telecommunication Services including but not limited to prepaid and recurring services","website":null},"card":{"id":7989,"name":"","cardNumber":"1747"},"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Sasbon/Cloe',
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Ariel/Laniado',@number=N'JV-251975',@originalAmount=N'39.00000000',@originalCurrencyCode=N'EUR',@convertedAmount=N'44.41000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'0157 THEANO GMBH, IBAN CALC',@source=3,@status=1,@date=N'2021-11-18T18:46:22.000Z',@extraData=N'{"id":251975,"transactionAmount":"44.41","transactionDateTime":"2021-11-17T19:03:21.000Z","completedAt":"2021-11-18T18:46:22.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"virtual","paymentType":"cards","description":null,"currency":840,"localCurrency":978,"localCurrencyAmount":"39","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1571,"firstName":"Ariel","lastName":"Laniado","role":"employee"},"merchant":{"id":115514,"name":"THEANO GMBH, IBAN CALC","address":"4954059282543, DE","description":"Computer Software Stores","website":null},"card":{"id":7305,"name":"","cardNumber":"0157"},"localCurrencyLookup":{"numericCode":978,"alphaCode":"EUR"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 3,
  reference: 'Ariel/Laniado',
  originalCurrency: 'EUR',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Shlomo/Ovadiah',@number=N'JV-244080',@originalAmount=N'293.17000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'233.90000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'4267 SAFEWAY #8842',@source=3,@status=1,@date=N'2021-11-17T16:17:54.000Z',@extraData=N'{"id":244080,"transactionAmount":"233.90","transactionDateTime":"2021-11-14T21:02:29.000Z","completedAt":"2021-11-17T16:17:54.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"293.17","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1104,"firstName":"Shlomo ","lastName":"Ovadiah ","role":"admin"},"merchant":{"id":59579,"name":"SAFEWAY #8842","address":"CALGARY, AB, CA","description":"Grocery Stores, Supermarkets","website":null},"card":{"id":7347,"name":"Primary","cardNumber":"4267"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 0,
  reference: 'Shlomo/Ovadiah',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Shlomo/Ovadiah',@number=N'JV-229858',@originalAmount=N'121.54000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'97.77000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'4267 WILLOW PARK WINES & SP',@source=3,@status=1,@date=N'2021-11-10T16:45:00.000Z',@extraData=N'{"id":229858,"transactionAmount":"97.77","transactionDateTime":"2021-11-08T23:41:04.000Z","completedAt":"2021-11-10T16:45:00.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"121.54","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1104,"firstName":"Shlomo ","lastName":"Ovadiah ","role":"admin"},"merchant":{"id":107400,"name":"WILLOW PARK WINES & SP","address":"CALGARY, AB, CA","description":"Package Stores, Beer, Wine, and Liquor","website":null},"card":{"id":7347,"name":"Primary","cardNumber":"4267"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 0,
  reference: 'Shlomo/Ovadiah',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Shlomo/Ovadiah',@number=N'JV-293562',@originalAmount=N'57.29000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'45.08000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'3937 GOOGLE *SERVICES',@source=3,@status=1,@date=N'2021-12-03T19:30:39.000Z',@extraData=N'{"id":293562,"transactionAmount":"45.08","transactionDateTime":"2021-12-02T22:15:46.000Z","completedAt":"2021-12-03T19:30:39.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"virtual","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"57.29","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1104,"firstName":"Shlomo ","lastName":"Ovadiah ","role":"admin"},"merchant":{"id":9912,"name":"GOOGLE *SERVICES","address":"INTERNET, CA, US","description":"Digital Goods Software Applications (Excluding Games)","website":null},"card":{"id":4314,"name":"bestbuy","cardNumber":"3937"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 0,
  reference: 'Shlomo/Ovadiah',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Yelena/Gonzalez',@number=N'JV-279627',@originalAmount=N'39.60000000',@originalCurrencyCode=N'EUR',@convertedAmount=N'44.89000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'0190 FREEPIK & FLATICON',@source=3,@status=1,@date=N'2021-11-29T17:19:03.000Z',@extraData=N'{"id":279627,"transactionAmount":"44.89","transactionDateTime":"2021-11-28T17:21:34.000Z","completedAt":"2021-11-29T17:19:03.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"virtual","paymentType":"cards","description":null,"currency":840,"localCurrency":978,"localCurrencyAmount":"39.6","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":5479,"firstName":"Yelena","lastName":"Gonzalez","role":"employee"},"merchant":{"id":7092,"name":"FREEPIK & FLATICON","address":"+34913396655, ES","description":"Commercial Art, Graphics, Photography","website":null},"card":{"id":26675,"name":"","cardNumber":"0190"},"localCurrencyLookup":{"numericCode":978,"alphaCode":"EUR"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Yelena/Gonzalez',
  originalCurrency: 'EUR',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Aliah/Reebo',@number=N'JV-268054',@originalAmount=N'2.61000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'2.06000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'2993 3712-CLGY RELAY D41K02 C',@source=3,@status=1,@date=N'2021-11-25T16:54:10.000Z',@extraData=N'{"id":268054,"transactionAmount":"2.06","transactionDateTime":"2021-11-24T12:56:44.000Z","completedAt":"2021-11-25T16:54:10.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"2.61","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":2294,"firstName":"Aliah","lastName":"Reebo","role":"employee"},"merchant":{"id":121473,"name":"3712-CLGY RELAY D41K02 C","address":"CALGARY, AB, CA","description":"Miscellaneous and Specialty Retail Stores","website":null},"card":{"id":12457,"name":"Primary","cardNumber":"2993"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Aliah/Reebo',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Erica/Bethancourt',@number=N'JV-268620',@originalAmount=N'9.88000000',@originalCurrencyCode=N'USD',@convertedAmount=N'9.88000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'3796 COMPA#IA ATLAS',@source=3,@status=1,@date=N'2021-11-25T16:44:46.000Z',@extraData=N'{"id":268620,"transactionAmount":"9.88","transactionDateTime":"2021-11-24T16:31:46.000Z","completedAt":"2021-11-25T16:44:46.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":840,"localCurrencyAmount":"9.88","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1600,"firstName":"Erica","lastName":"Bethancourt","role":"employee"},"merchant":{"id":121662,"name":"COMPA#IA ATLAS","address":"PANAMA, PA","description":"Stationery, Office Supplies, Printing and Writing Paper","website":null},"card":{"id":7485,"name":"Primary","cardNumber":"3796"},"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Erica/Bethancourt',
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Shlomo/Ovadiah',@number=N'JV-257525',@originalAmount=N'112.86000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'89.66000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'4267 3472  CARTER''S/OSHKOSH',@source=3,@status=1,@date=N'2021-11-20T19:16:54.000Z',@extraData=N'{"id":257525,"transactionAmount":"89.66","transactionDateTime":"2021-11-19T19:21:45.000Z","completedAt":"2021-11-20T19:16:54.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"112.86","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1104,"firstName":"Shlomo ","lastName":"Ovadiah ","role":"admin"},"merchant":{"id":117504,"name":"3472  CARTER''S/OSHKOSH","address":"OKOTOKS, AB, CA","description":"Family Clothing Stores","website":null},"card":{"id":7347,"name":"Primary","cardNumber":"4267"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 3,
  reference: 'Shlomo/Ovadiah',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Shlomo/Ovadiah',@number=N'JV-249617',@originalAmount=N'19.95000000',@originalCurrencyCode=N'EUR',@convertedAmount=N'22.72000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'3937 Clevver GmbH',@source=3,@status=1,@date=N'2021-11-18T18:45:48.000Z',@extraData=N'{"id":249617,"transactionAmount":"22.72","transactionDateTime":"2021-11-17T05:00:43.000Z","completedAt":"2021-11-18T18:45:48.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"virtual","paymentType":"cards","description":null,"currency":840,"localCurrency":978,"localCurrencyAmount":"19.95","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1104,"firstName":"Shlomo ","lastName":"Ovadiah ","role":"admin"},"merchant":{"id":48581,"name":"Clevver GmbH","address":"Berlin, DE","description":"Business Services","website":null},"card":{"id":4314,"name":"bestbuy","cardNumber":"3937"},"localCurrencyLookup":{"numericCode":978,"alphaCode":"EUR"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 3,
  reference: 'Shlomo/Ovadiah',
  originalCurrency: 'EUR',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Ariel/Laniado',@number=N'JV-236165',@originalAmount=N'36.00000000',@originalCurrencyCode=N'USD',@convertedAmount=N'36.00000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'0157 A2WEBHOST* INV3084048',@source=3,@status=1,@date=N'2021-11-13T01:39:41.000Z',@extraData=N'{"id":236165,"transactionAmount":"36.00","transactionDateTime":"2021-11-11T14:03:06.000Z","completedAt":"2021-11-13T01:39:41.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"virtual","paymentType":"cards","description":null,"currency":840,"localCurrency":840,"localCurrencyAmount":"36","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1571,"firstName":"Ariel","lastName":"Laniado","role":"employee"},"merchant":{"id":109614,"name":"A2WEBHOST* INV3084048","address":"+17342224678, MI, US","description":"Computer Programming, Data Processing, and Integrated Systems Design Services","website":null},"card":{"id":7305,"name":"","cardNumber":"0157"},"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 0,
  reference: 'Ariel/Laniado',
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Shlomo/Ovadiah',@number=N'JV-286923',@originalAmount=N'174.15000000',@originalCurrencyCode=N'EUR',@convertedAmount=N'197.87000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'3937 Clevver GmbH',@source=3,@status=1,@date=N'2021-12-02T17:49:37.000Z',@extraData=N'{"id":286923,"transactionAmount":"197.87","transactionDateTime":"2021-12-01T05:03:44.000Z","completedAt":"2021-12-02T17:49:37.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"virtual","paymentType":"cards","description":null,"currency":840,"localCurrency":978,"localCurrencyAmount":"174.15","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1104,"firstName":"Shlomo ","lastName":"Ovadiah ","role":"admin"},"merchant":{"id":48581,"name":"Clevver GmbH","address":"Berlin, DE","description":"Business Services","website":null},"card":{"id":4314,"name":"bestbuy","cardNumber":"3937"},"localCurrencyLookup":{"numericCode":978,"alphaCode":"EUR"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 3,
  reference: 'Shlomo/Ovadiah',
  originalCurrency: 'EUR',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Erica/Bethancourt',@number=N'JV-279252',@originalAmount=N'604.50000000',@originalCurrencyCode=N'USD',@convertedAmount=N'604.50000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'3796 PANAFOTO 50',@source=3,@status=1,@date=N'2021-12-01T03:55:02.000Z',@extraData=N'{"id":279252,"transactionAmount":"604.50","transactionDateTime":"2021-11-28T12:03:47.000Z","completedAt":"2021-12-01T03:55:02.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":840,"localCurrencyAmount":"604.5","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1600,"firstName":"Erica","lastName":"Bethancourt","role":"employee"},"merchant":{"id":123912,"name":"PANAFOTO 50","address":"PANAMA, PA","description":"Electronic Sales","website":null},"card":{"id":7485,"name":"Primary","cardNumber":"3796"},"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Erica/Bethancourt',
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Aliah/Reebo',@number=N'JV-268053',@originalAmount=N'6.69000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'5.29000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'2993 TIM HORTON''S# 0845QPSE',@source=3,@status=1,@date=N'2021-11-25T16:51:44.000Z',@extraData=N'{"id":268053,"transactionAmount":"5.29","transactionDateTime":"2021-11-24T12:54:54.000Z","completedAt":"2021-11-25T16:51:44.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"6.69","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":2294,"firstName":"Aliah","lastName":"Reebo","role":"employee"},"merchant":{"id":105300,"name":"TIM HORTON''S# 0845QPSE","address":"CALGARY, AB, CA","description":"Eating Places, Restaurants","website":null},"card":{"id":12457,"name":"Primary","cardNumber":"2993"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Aliah/Reebo',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Shlomo/Ovadiah',@number=N'JV-261726',@originalAmount=N'101.71000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'80.45000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'3937 ASSOCIATED CAB/ALLIED LIM',@source=3,@status=1,@date=N'2021-11-27T17:52:00.000Z',@extraData=N'{"id":261726,"transactionAmount":"80.45","transactionDateTime":"2021-11-21T21:28:05.000Z","completedAt":"2021-11-27T17:52:00.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"virtual","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"101.71","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1104,"firstName":"Shlomo ","lastName":"Ovadiah ","role":"admin"},"merchant":{"id":119178,"name":"ASSOCIATED CAB/ALLIED LIM","address":"4032991199, AB, CA","description":"Limousines and Taxicabs","website":null},"card":{"id":4314,"name":"bestbuy","cardNumber":"3937"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 0,
  reference: 'Shlomo/Ovadiah',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Aliah/Reebo',@number=N'JV-252549',@originalAmount=N'3.62000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'2.90000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'2993 STARBUCKS #04412#',@source=3,@status=1,@date=N'2021-11-19T16:17:35.000Z',@extraData=N'{"id":252549,"transactionAmount":"2.90","transactionDateTime":"2021-11-17T22:36:19.000Z","completedAt":"2021-11-19T16:17:35.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"3.62","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":2294,"firstName":"Aliah","lastName":"Reebo","role":"employee"},"merchant":{"id":107122,"name":"STARBUCKS #04412#","address":"CALGARY, AB, CA","description":"Miscellaneous Food Stores Convenience Stores, Markets, Specialty Stores","website":null},"card":{"id":12457,"name":"Primary","cardNumber":"2993"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Aliah/Reebo',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Shlomo/Ovadiah',@number=N'JV-246635',@originalAmount=N'2.00000000',@originalCurrencyCode=N'USD',@convertedAmount=N'2.00000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'4521 BUENASTAREAS.COM',@source=3,@status=1,@date=N'2021-11-17T17:20:07.000Z',@extraData=N'{"id":246635,"transactionAmount":"2.00","transactionDateTime":"2021-11-16T03:08:23.000Z","completedAt":"2021-11-17T17:20:07.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"virtual","paymentType":"cards","description":null,"currency":840,"localCurrency":840,"localCurrencyAmount":"2","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1104,"firstName":"Shlomo ","lastName":"Ovadiah ","role":"admin"},"merchant":{"id":113869,"name":"BUENASTAREAS.COM","address":"BUENASTAREAS, CA, US","description":"Schools and Educational Services","website":null},"card":{"id":7486,"name":"Jose","cardNumber":"4521"},"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 0,
  reference: 'Shlomo/Ovadiah',
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Shlomo/Ovadiah',@number=N'JV-235460',@originalAmount=N'68.51000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'55.33000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'4267 DOMINO''S PIZZA #39019',@source=3,@status=1,@date=N'2021-11-11T17:33:49.000Z',@extraData=N'{"id":235460,"transactionAmount":"55.33","transactionDateTime":"2021-11-11T03:09:28.000Z","completedAt":"2021-11-11T17:33:49.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"68.51","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1104,"firstName":"Shlomo ","lastName":"Ovadiah ","role":"admin"},"merchant":{"id":109278,"name":"DOMINO''S PIZZA #39019","address":"CALGARY, AB, CA","description":"Fast Food Restaurants","website":null},"card":{"id":7347,"name":"Primary","cardNumber":"4267"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 0,
  reference: 'Shlomo/Ovadiah',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Erica/Bethancourt',@number=N'JV-234158',@originalAmount=N'19.20000000',@originalCurrencyCode=N'USD',@convertedAmount=N'19.20000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'3796 TODO A DOLAR - VERSALLES',@source=3,@status=1,@date=N'2021-11-11T16:52:36.000Z',@extraData=N'{"id":234158,"transactionAmount":"19.20","transactionDateTime":"2021-11-10T18:30:19.000Z","completedAt":"2021-11-11T16:52:36.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":840,"localCurrencyAmount":"19.2","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1600,"firstName":"Erica","lastName":"Bethancourt","role":"employee"},"merchant":{"id":108902,"name":"TODO A DOLAR - VERSALLES","address":"PANAMA, PA","description":"Department Stores","website":null},"card":{"id":7485,"name":"Primary","cardNumber":"3796"},"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Erica/Bethancourt',
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Johanes/Rosekrans',@number=N'JV-230921',@originalAmount=N'108.22000000',@originalCurrencyCode=N'EUR',@convertedAmount=N'125.50000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'3452 ESSO VIJFHUIZEN ZUID',@source=3,@status=1,@date=N'2021-11-10T17:55:32.000Z',@extraData=N'{"id":230921,"transactionAmount":"125.50","transactionDateTime":"2021-11-09T14:16:33.000Z","completedAt":"2021-11-10T17:55:32.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":978,"localCurrencyAmount":"108.22","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1567,"firstName":"Johanes","lastName":"Rosekrans","role":"employee"},"merchant":{"id":107831,"name":"ESSO VIJFHUIZEN ZUID","address":"VYFHUIZEN, NL","description":"Service Stations (with or without Ancillary Services)","website":null},"card":{"id":7349,"name":"Primary","cardNumber":"3452"},"localCurrencyLookup":{"numericCode":978,"alphaCode":"EUR"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: -2,
  reference: 'Johanes/Rosekrans',
  originalCurrency: 'EUR',
  targetCurrency: 'USD' }
email sent
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Shlomo/Ovadiah',@number=N'JV-229782',@originalAmount=N'10.85000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'8.73000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'4267 DOLLARAMA #1346',@source=3,@status=1,@date=N'2021-11-09T17:25:28.000Z',@extraData=N'{"id":229782,"transactionAmount":"8.73","transactionDateTime":"2021-11-08T23:11:59.000Z","completedAt":"2021-11-09T17:25:28.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"10.85","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1104,"firstName":"Shlomo ","lastName":"Ovadiah ","role":"admin"},"merchant":{"id":107378,"name":"DOLLARAMA #1346","address":"CALGARY, AB, CA","description":"Discount Stores","website":null},"card":{"id":7347,"name":"Primary","cardNumber":"4267"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 0,
  reference: 'Shlomo/Ovadiah',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Johanes/Rosekrans',@number=N'JV-223664',@originalAmount=N'24.99000000',@originalCurrencyCode=N'EUR',@convertedAmount=N'28.93000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'3452 PLUS SUPERMARKET',@source=3,@status=1,@date=N'2021-11-06T17:52:29.000Z',@extraData=N'{"id":223664,"transactionAmount":"28.93","transactionDateTime":"2021-11-05T17:51:35.000Z","completedAt":"2021-11-06T17:52:29.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":978,"localCurrencyAmount":"24.99","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1567,"firstName":"Johanes","lastName":"Rosekrans","role":"employee"},"merchant":{"id":105149,"name":"PLUS SUPERMARKET","address":"BALK, NL","description":"Grocery Stores, Supermarkets","website":null},"card":{"id":7349,"name":"Primary","cardNumber":"3452"},"localCurrencyLookup":{"numericCode":978,"alphaCode":"EUR"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: -2,
  reference: 'Johanes/Rosekrans',
  originalCurrency: 'EUR',
  targetCurrency: 'USD' }
email sent
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Johanes/Rosekrans',@number=N'JV-233427',@originalAmount=N'795.94000000',@originalCurrencyCode=N'EUR',@convertedAmount=N'914.54000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'3452 Coolblue',@source=3,@status=1,@date=N'2021-11-13T03:01:02.000Z',@extraData=N'{"id":233427,"transactionAmount":"914.54","transactionDateTime":"2021-11-10T13:50:49.000Z","completedAt":"2021-11-13T03:01:02.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":978,"localCurrencyAmount":"795.94","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1567,"firstName":"Johanes","lastName":"Rosekrans","role":"employee"},"merchant":{"id":100422,"name":"Coolblue","address":"Rotterdam, NL","description":"Electronic Sales","website":null},"card":{"id":7349,"name":"Primary","cardNumber":"3452"},"localCurrencyLookup":{"numericCode":978,"alphaCode":"EUR"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: -2,
  reference: 'Johanes/Rosekrans',
  originalCurrency: 'EUR',
  targetCurrency: 'USD' }
email sent
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Shlomo/Ovadiah',@number=N'JV-229794',@originalAmount=N'31.50000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'25.34000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'4267 TREEHOUSE TOY SOUTHLAND',@source=3,@status=1,@date=N'2021-11-09T17:08:46.000Z',@extraData=N'{"id":229794,"transactionAmount":"25.34","transactionDateTime":"2021-11-08T23:15:54.000Z","completedAt":"2021-11-09T17:08:46.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"31.5","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1104,"firstName":"Shlomo ","lastName":"Ovadiah ","role":"admin"},"merchant":{"id":107380,"name":"TREEHOUSE TOY SOUTHLAND","address":"CALGARY, AB, CA","description":"Game, Toy, and Hobby Shops","website":null},"card":{"id":7347,"name":"Primary","cardNumber":"4267"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 0,
  reference: 'Shlomo/Ovadiah',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Shlomo/Ovadiah',@number=N'JV-229704',@originalAmount=N'73.48000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'59.11000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'4267 WINNERS 466',@source=3,@status=1,@date=N'2021-11-09T16:46:42.000Z',@extraData=N'{"id":229704,"transactionAmount":"59.11","transactionDateTime":"2021-11-08T22:47:25.000Z","completedAt":"2021-11-09T16:46:42.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"73.48","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1104,"firstName":"Shlomo ","lastName":"Ovadiah ","role":"admin"},"merchant":{"id":107353,"name":"WINNERS 466","address":"CALGARY, AB, CA","description":"Family Clothing Stores","website":null},"card":{"id":7347,"name":"Primary","cardNumber":"4267"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 0,
  reference: 'Shlomo/Ovadiah',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Johanes/Rosekrans',@number=N'JV-233102',@originalAmount=N'42.60000000',@originalCurrencyCode=N'EUR',@convertedAmount=N'49.46000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'3452 ACS',@source=3,@status=1,@date=N'2021-11-11T17:18:51.000Z',@extraData=N'{"id":233102,"transactionAmount":"49.46","transactionDateTime":"2021-11-10T08:08:27.000Z","completedAt":"2021-11-11T17:18:51.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":978,"localCurrencyAmount":"42.6","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1567,"firstName":"Johanes","lastName":"Rosekrans","role":"employee"},"merchant":{"id":108521,"name":"ACS","address":"PARIS, FR","description":"Insurance Sales, Underwriting, and Premiums","website":null},"card":{"id":7349,"name":"Primary","cardNumber":"3452"},"localCurrencyLookup":{"numericCode":978,"alphaCode":"EUR"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: -2,
  reference: 'Johanes/Rosekrans',
  originalCurrency: 'EUR',
  targetCurrency: 'USD' }
email sent
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Shlomo/Ovadiah',@number=N'JV-229787',@originalAmount=N'35.70000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'28.72000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'4267 TREEHOUSE TOY SOUTHLAND',@source=3,@status=1,@date=N'2021-11-09T17:08:00.000Z',@extraData=N'{"id":229787,"transactionAmount":"28.72","transactionDateTime":"2021-11-08T23:13:29.000Z","completedAt":"2021-11-09T17:08:00.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"physical","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"35.7","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1104,"firstName":"Shlomo ","lastName":"Ovadiah ","role":"admin"},"merchant":{"id":107380,"name":"TREEHOUSE TOY SOUTHLAND","address":"CALGARY, AB, CA","description":"Game, Toy, and Hobby Shops","website":null},"card":{"id":7347,"name":"Primary","cardNumber":"4267"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 0,
  reference: 'Shlomo/Ovadiah',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Shlomo/Ovadiah',@number=N'JV-227144',@originalAmount=N'40.00000000',@originalCurrencyCode=N'USD',@convertedAmount=N'40.00000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'0018 DEALSTREAM PRO',@source=3,@status=1,@date=N'2021-11-08T16:55:12.000Z',@extraData=N'{"id":227144,"transactionAmount":"40.00","transactionDateTime":"2021-11-07T17:14:54.000Z","completedAt":"2021-11-08T16:55:12.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"virtual","paymentType":"cards","description":null,"currency":840,"localCurrency":840,"localCurrencyAmount":"40","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1104,"firstName":"Shlomo ","lastName":"Ovadiah ","role":"admin"},"merchant":{"id":106403,"name":"DEALSTREAM PRO","address":"+16174975100, MA, US","description":"Business Services","website":null},"card":{"id":24202,"name":"Cancel Tomorrow","cardNumber":"0018"},"localCurrencyLookup":{"numericCode":840,"alphaCode":"USD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5021,"AUD":1.399535,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.73302,"BHD":0.377034,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5824,"BSD":1,"BTC":0.000020520571,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269982,"CDF":2003,"CHF":0.926001,"CLF":0.030664,"CLP":846.51,"CNH":6.377594,"CNY":6.3776,"COP":3904.99842,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5361,"DJF":178,"DKK":6.588986,"DOP":56.8,"DZD":138.978883,"EGP":15.7108,"ERN":15.000155,"ETB":48.25,"EUR":0.886113,"FJD":2.1245,"FKP":0.758341,"GBP":0.758341,"GEL":3.095,"GGP":0.758341,"GHS":6.15,"GIP":0.758341,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.796675,"HNL":24.150001,"HRK":6.6718,"HTG":99.942078,"HUF":323.601367,"IDR":14366.85,"ILS":3.10131,"IMP":0.758341,"INR":75.587248,"IQD":1459.5,"IRR":42275,"ISK":130.61,"JEP":0.758341,"JMD":154.793867,"JOD":0.709,"JPY":113.538,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.350498,"KWD":0.302828,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.595,"MAD":9.2425,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.325,"MUR":43.648157,"MVR":15.45,"MWK":807.75,"MXN":21.015851,"MYR":4.2165,"MZN":63.824998,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":9.003838,"NPR":120.832445,"NZD":1.47463,"OMR":0.385041,"PAB":1,"PEN":4.08,"PGK":3.535,"PHP":50.358999,"PKR":176.8,"PLN":4.082537,"PYG":6834.96197,"QAR":3.641,"RON":4.3848,"RSD":104.190809,"RUB":73.6678,"RWF":1002.5,"SAR":3.751585,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.079695,"SGD":1.365372,"SHP":0.758341,"SLL":11132.50012,"SOS":584,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.13,"SVC":8.754929,"SYP":2512.5,"SZL":15.96,"THB":33.56,"TJS":11.301557,"TMT":3.505,"TND":2.8895,"TOP":2.289256,"TRY":13.7804,"TTD":6.803379,"TWD":27.713499,"TZS":2300,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6223,"VND":23080,"VUV":112.698305,"WST":2.587451,"XAF":581.251763,"XAG":0.0454753,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.251763,"XPD":0.00056499,"XPF":105.74136,"XPT":0.00106214,"YER":250.250057,"ZAR":15.960152,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 0,
  reference: 'Shlomo/Ovadiah',
  originalCurrency: 'USD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-09T17:52:03.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-09T17:53:12.533Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-09T17:52:03.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-09T17:53:12.533Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2595.4 2000 100000
2595.4 1500 100000
2595.4 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315987';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315377';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-09 17:52:03.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-315377'
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-312838'
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Sasbon/Cloe',@number=N'JV-315987',@originalAmount=N'125.84000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'99.84000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'1747 DHL WSI Shipment',@source=3,@status=1,@date=N'2021-12-09T17:52:05.000Z',@extraData=N'{"id":315987,"transactionAmount":"99.84","transactionDateTime":"2021-12-09T17:52:03.000Z","completedAt":"2021-12-09T17:52:05.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"virtual","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"125.84","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1663,"firstName":"Sasbon ","lastName":"Cloe","role":"admin"},"merchant":{"id":6452,"name":"DHL WSI Shipment","address":"BONN, DE","description":"Courier Services Air and Ground, Freight Forwarders","website":null},"card":{"id":7989,"name":"","cardNumber":"1747"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5231,"AUD":1.398471,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.732625,"BHD":0.377018,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5875,"BSD":1,"BTC":0.000020645683,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.26901,"CDF":2003,"CHF":0.925001,"CLF":0.030722,"CLP":847.75,"CNH":6.37682,"CNY":6.3776,"COP":3902.77,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5241,"DJF":178,"DKK":6.586249,"DOP":56.8,"DZD":138.973584,"EGP":15.7097,"ERN":15.000155,"ETB":48.25,"EUR":0.885732,"FJD":2.1245,"FKP":0.756876,"GBP":0.756876,"GEL":3.1,"GGP":0.756876,"GHS":6.15,"GIP":0.756876,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.79634,"HNL":24.27,"HRK":6.6692,"HTG":99.942078,"HUF":323.421289,"IDR":14367.35,"ILS":3.10131,"IMP":0.756876,"INR":75.62955,"IQD":1461,"IRR":42275,"ISK":130.56,"JEP":0.756876,"JMD":154.793867,"JOD":0.709,"JPY":113.546,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.129626,"KWD":0.302869,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.6,"MAD":9.25375,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.32,"MUR":43.65,"MVR":15.45,"MWK":810,"MXN":20.974455,"MYR":4.2165,"MZN":63.850001,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":8.986849,"NPR":120.832445,"NZD":1.472966,"OMR":0.385032,"PAB":1,"PEN":4.0835,"PGK":3.535,"PHP":50.356005,"PKR":176.8,"PLN":4.082399,"PYG":6834.96197,"QAR":3.641,"RON":4.3833,"RSD":104.131678,"RUB":73.7247,"RWF":1002.5,"SAR":3.751489,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.069058,"SGD":1.364726,"SHP":0.756876,"SLL":11132.50012,"SOS":586,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.1,"SVC":8.754929,"SYP":2512.5,"SZL":15.97,"THB":33.568996,"TJS":11.301557,"TMT":3.5,"TND":2.8825,"TOP":2.289256,"TRY":13.785025,"TTD":6.803379,"TWD":27.709501,"TZS":2303,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6321,"VND":23000,"VUV":112.698305,"WST":2.587451,"XAF":581.001946,"XAG":0.04540914,"XAU":0.00056284,"XCD":2.70255,"XDR":0.712183,"XOF":581.001946,"XPD":0.00055551,"XPF":105.695914,"XPT":0.00105597,"YER":250.249937,"ZAR":15.96099,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Sasbon/Cloe',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-09T17:52:03.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-09T18:00:04.951Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-09T17:52:03.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-09T18:00:04.951Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2595.4 2000 100000
2595.4 1500 100000
2595.4 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315987';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315377';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-09 17:52:03.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Sasbon/Cloe',@number=N'JV-315987',@originalAmount=N'125.84000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'99.84000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'1747 DHL WSI Shipment',@source=3,@status=1,@date=N'2021-12-09T17:52:05.000Z',@extraData=N'{"id":315987,"transactionAmount":"99.84","transactionDateTime":"2021-12-09T17:52:03.000Z","completedAt":"2021-12-09T17:52:05.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"virtual","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"125.84","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1663,"firstName":"Sasbon ","lastName":"Cloe","role":"admin"},"merchant":{"id":6452,"name":"DHL WSI Shipment","address":"BONN, DE","description":"Courier Services Air and Ground, Freight Forwarders","website":null},"card":{"id":7989,"name":"","cardNumber":"1747"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.7,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5231,"AUD":1.398471,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.732625,"BHD":0.377018,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5875,"BSD":1,"BTC":0.000020645683,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.26901,"CDF":2003,"CHF":0.925001,"CLF":0.030722,"CLP":847.75,"CNH":6.37682,"CNY":6.3776,"COP":3902.77,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5241,"DJF":178,"DKK":6.586249,"DOP":56.8,"DZD":138.973584,"EGP":15.7097,"ERN":15.000155,"ETB":48.25,"EUR":0.885732,"FJD":2.1245,"FKP":0.756876,"GBP":0.756876,"GEL":3.1,"GGP":0.756876,"GHS":6.15,"GIP":0.756876,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.79634,"HNL":24.27,"HRK":6.6692,"HTG":99.942078,"HUF":323.421289,"IDR":14367.35,"ILS":3.10131,"IMP":0.756876,"INR":75.62955,"IQD":1461,"IRR":42275,"ISK":130.56,"JEP":0.756876,"JMD":154.793867,"JOD":0.709,"JPY":113.546,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.129626,"KWD":0.302869,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1531.5,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.6,"MAD":9.25375,"MDL":17.632105,"MGA":3975,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.32,"MUR":43.65,"MVR":15.45,"MWK":810,"MXN":20.974455,"MYR":4.2165,"MZN":63.850001,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":8.986849,"NPR":120.832445,"NZD":1.472966,"OMR":0.385032,"PAB":1,"PEN":4.0835,"PGK":3.535,"PHP":50.356005,"PKR":176.8,"PLN":4.082399,"PYG":6834.96197,"QAR":3.641,"RON":4.3833,"RSD":104.131678,"RUB":73.7247,"RWF":1002.5,"SAR":3.751489,"SBD":8.074316,"SCR":13.527739,"SDG":437.5,"SEK":9.069058,"SGD":1.364726,"SHP":0.756876,"SLL":11132.50012,"SOS":586,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.1,"SVC":8.754929,"SYP":2512.5,"SZL":15.97,"THB":33.568996,"TJS":11.301557,"TMT":3.5,"TND":2.8825,"TOP":2.289256,"TRY":13.785025,"TTD":6.803379,"TWD":27.709501,"TZS":2303,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6321,"VND":23000,"VUV":112.698305,"WST":2.587451,"XAF":581.001946,"XAG":0.04540914,"XAU":0.00056284,"XCD":2.70255,"XDR":0.712183,"XOF":581.001946,"XPD":0.00055551,"XPF":105.695914,"XPT":0.00105597,"YER":250.249937,"ZAR":15.96099,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Sasbon/Cloe',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-09T17:52:03.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-09T18:30:03.783Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-09T17:52:03.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-09T18:30:03.783Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2595.4 2000 100000
2595.4 1500 100000
2595.4 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315987';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315377';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-09 17:52:03.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-315377'
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Sasbon/Cloe',@number=N'JV-315987',@originalAmount=N'125.84000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'99.84000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'1747 DHL WSI Shipment',@source=3,@status=1,@date=N'2021-12-09T17:52:05.000Z',@extraData=N'{"id":315987,"transactionAmount":"99.84","transactionDateTime":"2021-12-09T17:52:03.000Z","completedAt":"2021-12-09T17:52:05.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"virtual","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"125.84","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1663,"firstName":"Sasbon ","lastName":"Cloe","role":"admin"},"merchant":{"id":6452,"name":"DHL WSI Shipment","address":"BONN, DE","description":"Courier Services Air and Ground, Freight Forwarders","website":null},"card":{"id":7989,"name":"","cardNumber":"1747"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.15,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5285,"AUD":1.397898,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.732425,"BHD":0.377028,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5835,"BSD":1,"BTC":0.000020980293,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269845,"CDF":2003,"CHF":0.92435,"CLF":0.030741,"CLP":848.23,"CNH":6.377564,"CNY":6.3776,"COP":3902.02847,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5196,"DJF":178,"DKK":6.583842,"DOP":56.8,"DZD":138.930487,"EGP":15.7063,"ERN":15.000155,"ETB":48.35,"EUR":0.885436,"FJD":2.1245,"FKP":0.756597,"GBP":0.756597,"GEL":3.1,"GGP":0.756597,"GHS":6.15,"GIP":0.756597,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.79635,"HNL":24.27,"HRK":6.6662,"HTG":99.942078,"HUF":323.407458,"IDR":14370.32691,"ILS":3.10131,"IMP":0.756597,"INR":75.621547,"IQD":1461,"IRR":42275,"ISK":130.53,"JEP":0.756597,"JMD":154.793867,"JOD":0.709,"JPY":113.4935,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.068036,"KWD":0.302865,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1524.004399,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.6,"MAD":9.25375,"MDL":17.632105,"MGA":3970,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.32,"MUR":43.65,"MVR":15.45,"MWK":810,"MXN":20.97542,"MYR":4.2165,"MZN":63.850001,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":8.9887,"NPR":120.832445,"NZD":1.472537,"OMR":0.385025,"PAB":1,"PEN":4.0835,"PGK":3.53,"PHP":50.361,"PKR":176.8,"PLN":4.075855,"PYG":6834.96197,"QAR":3.641,"RON":4.3822,"RSD":104.181288,"RUB":73.6944,"RWF":1002.5,"SAR":3.751306,"SBD":8.067802,"SCR":13.586102,"SDG":437.5,"SEK":9.06618,"SGD":1.364731,"SHP":0.756597,"SLL":11132.50012,"SOS":586,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.1,"SVC":8.754929,"SYP":2512.5,"SZL":15.97,"THB":33.5815,"TJS":11.301557,"TMT":3.5,"TND":2.883,"TOP":2.289256,"TRY":13.772209,"TTD":6.803379,"TWD":27.7125,"TZS":2303,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6321,"VND":23000,"VUV":112.698305,"WST":2.587451,"XAF":580.808156,"XAG":0.04535357,"XAU":0.00056232,"XCD":2.70255,"XDR":0.712183,"XOF":580.808156,"XPD":0.00054902,"XPF":105.660659,"XPT":0.00105933,"YER":250.249937,"ZAR":15.965356,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Sasbon/Cloe',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-09T17:52:03.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-09T19:00:03.718Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-09T17:52:03.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-09T19:00:03.718Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2595.4 2000 100000
2595.4 1500 100000
2595.4 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315987';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315377';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-09 17:52:03.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Sasbon/Cloe',@number=N'JV-315987',@originalAmount=N'125.84000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'99.84000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'1747 DHL WSI Shipment',@source=3,@status=1,@date=N'2021-12-09T17:52:05.000Z',@extraData=N'{"id":315987,"transactionAmount":"99.84","transactionDateTime":"2021-12-09T17:52:03.000Z","completedAt":"2021-12-09T17:52:05.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"virtual","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"125.84","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1663,"firstName":"Sasbon ","lastName":"Cloe","role":"admin"},"merchant":{"id":6452,"name":"DHL WSI Shipment","address":"BONN, DE","description":"Courier Services Air and Ground, Freight Forwarders","website":null},"card":{"id":7989,"name":"","cardNumber":"1747"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673,"AFN":97.949997,"ALL":107.15,"AMD":490.957033,"ANG":1.803208,"AOA":564,"ARS":101.5285,"AUD":1.397898,"AWG":1.8,"AZN":1.700805,"BAM":1.729247,"BBD":2,"BDT":85.824273,"BGN":1.732425,"BHD":0.377028,"BIF":1997,"BMD":1,"BND":1.366618,"BOB":6.898625,"BRL":5.5835,"BSD":1,"BTC":0.000020980293,"BTN":75.524027,"BWP":11.716473,"BYN":2.536338,"BZD":2.016852,"CAD":1.269845,"CDF":2003,"CHF":0.92435,"CLF":0.030741,"CLP":848.23,"CNH":6.377564,"CNY":6.3776,"COP":3902.02847,"CRC":630.950214,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.5196,"DJF":178,"DKK":6.583842,"DOP":56.8,"DZD":138.930487,"EGP":15.7063,"ERN":15.000155,"ETB":48.35,"EUR":0.885436,"FJD":2.1245,"FKP":0.756597,"GBP":0.756597,"GEL":3.1,"GGP":0.756597,"GHS":6.15,"GIP":0.756597,"GMD":52.45,"GNF":9350,"GTQ":7.734543,"GYD":209.319251,"HKD":7.79635,"HNL":24.27,"HRK":6.6662,"HTG":99.942078,"HUF":323.407458,"IDR":14370.32691,"ILS":3.10131,"IMP":0.756597,"INR":75.621547,"IQD":1461,"IRR":42275,"ISK":130.53,"JEP":0.756597,"JMD":154.793867,"JOD":0.709,"JPY":113.4935,"KES":112.95,"KGS":84.798098,"KHR":4070,"KMF":436.350068,"KPW":900,"KRW":1177.068036,"KWD":0.302865,"KYD":0.833834,"KZT":436.35442,"LAK":10970,"LBP":1524.004399,"LKR":202.616401,"LRD":141.949996,"LSL":15.96,"LYD":4.6,"MAD":9.25375,"MDL":17.632105,"MGA":3970,"MKD":54.466301,"MMK":1780.966917,"MNT":2858.209306,"MOP":8.035083,"MRO":356.999828,"MRU":36.32,"MUR":43.65,"MVR":15.45,"MWK":810,"MXN":20.97542,"MYR":4.2165,"MZN":63.850001,"NAD":15.96,"NGN":409.99,"NIO":35.225,"NOK":8.9887,"NPR":120.832445,"NZD":1.472537,"OMR":0.385025,"PAB":1,"PEN":4.0835,"PGK":3.53,"PHP":50.361,"PKR":176.8,"PLN":4.075855,"PYG":6834.96197,"QAR":3.641,"RON":4.3822,"RSD":104.181288,"RUB":73.6944,"RWF":1002.5,"SAR":3.751306,"SBD":8.067802,"SCR":13.586102,"SDG":437.5,"SEK":9.06618,"SGD":1.364731,"SHP":0.756597,"SLL":11132.50012,"SOS":586,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.1,"SVC":8.754929,"SYP":2512.5,"SZL":15.97,"THB":33.5815,"TJS":11.301557,"TMT":3.5,"TND":2.883,"TOP":2.289256,"TRY":13.772209,"TTD":6.803379,"TWD":27.7125,"TZS":2303,"UAH":27.090024,"UGX":3559.046672,"USD":1,"UYU":44.184976,"UZS":10787,"VES":4.6321,"VND":23000,"VUV":112.698305,"WST":2.587451,"XAF":580.808156,"XAG":0.04535357,"XAU":0.00056232,"XCD":2.70255,"XDR":0.712183,"XOF":580.808156,"XPD":0.00054902,"XPF":105.660659,"XPT":0.00105933,"YER":250.249937,"ZAR":15.965356,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Sasbon/Cloe',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-09T17:52:03.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-09T19:30:03.429Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-09T17:52:03.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-09T19:30:03.429Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2595.4 2000 100000
2595.4 1500 100000
2595.4 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315987';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315377';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-09 17:52:03.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-315377'
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Sasbon/Cloe',@number=N'JV-315987',@originalAmount=N'125.84000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'99.84000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'1747 DHL WSI Shipment',@source=3,@status=1,@date=N'2021-12-09T17:52:05.000Z',@extraData=N'{"id":315987,"transactionAmount":"99.84","transactionDateTime":"2021-12-09T17:52:03.000Z","completedAt":"2021-12-09T17:52:05.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"virtual","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"125.84","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1663,"firstName":"Sasbon ","lastName":"Cloe","role":"admin"},"merchant":{"id":6452,"name":"DHL WSI Shipment","address":"BONN, DE","description":"Courier Services Air and Ground, Freight Forwarders","website":null},"card":{"id":7989,"name":"","cardNumber":"1747"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.6731,"AFN":97.949997,"ALL":107.203941,"AMD":495.035922,"ANG":1.806155,"AOA":564,"ARS":101.53,"AUD":1.399747,"AWG":1.8,"AZN":1.700805,"BAM":1.731973,"BBD":2,"BDT":85.960328,"BGN":1.732531,"BHD":0.376993,"BIF":1996.930449,"BMD":1,"BND":1.368542,"BOB":6.909896,"BRL":5.5739,"BSD":1,"BTC":0.000020930367,"BTN":75.643747,"BWP":11.735045,"BYN":2.540359,"BZD":2.020013,"CAD":1.272175,"CDF":2005.236721,"CHF":0.924575,"CLF":0.03077,"CLP":849.05,"CNH":6.37874,"CNY":6.3776,"COP":3903.016799,"CRC":638.838622,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.53,"DJF":178.410461,"DKK":6.587478,"DOP":56.832408,"DZD":138.933752,"EGP":15.7104,"ERN":15.000155,"ETB":48.35,"EUR":0.885953,"FJD":2.125,"FKP":0.757137,"GBP":0.757137,"GEL":3.1,"GGP":0.757137,"GHS":6.188355,"GIP":0.757137,"GMD":52.45,"GNF":9521.594371,"GTQ":7.746734,"GYD":209.661313,"HKD":7.797025,"HNL":24.27,"HRK":6.6686,"HTG":100.087675,"HUF":323.69452,"IDR":14381.95,"ILS":3.10131,"IMP":0.757137,"INR":75.64256,"IQD":1462.150412,"IRR":42275,"ISK":130.57,"JEP":0.757137,"JMD":155.039235,"JOD":0.709,"JPY":113.4744,"KES":113.14,"KGS":84.798098,"KHR":4080.916379,"KMF":436.350068,"KPW":900,"KRW":1178.202178,"KWD":0.30287,"KYD":0.835156,"KZT":437.042541,"LAK":10985.663178,"LBP":1524.004399,"LKR":202.937515,"LRD":141.949996,"LSL":15.924374,"LYD":4.610317,"MAD":9.260128,"MDL":17.698384,"MGA":3979.853209,"MKD":54.56276,"MMK":1783.843614,"MNT":2858.209306,"MOP":8.047819,"MRO":356.999828,"MRU":36.32,"MUR":43.648861,"MVR":15.45,"MWK":818.717766,"MXN":20.98285,"MYR":4.2165,"MZN":63.850001,"NAD":15.96,"NGN":411.88,"NIO":35.307294,"NOK":9.005255,"NPR":121.029891,"NZD":1.473286,"OMR":0.385038,"PAB":1,"PEN":4.084392,"PGK":3.518951,"PHP":50.361004,"PKR":177.958756,"PLN":4.078387,"PYG":6846.275537,"QAR":3.641,"RON":4.3842,"RSD":104.139346,"RUB":73.7469,"RWF":1038.629208,"SAR":3.751312,"SBD":8.067802,"SCR":13.337,"SDG":437.5,"SEK":9.073142,"SGD":1.365395,"SHP":0.757137,"SLL":11132.50012,"SOS":579.766413,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.1,"SVC":8.768652,"SYP":2512.5,"SZL":15.924374,"THB":33.5865,"TJS":11.319371,"TMT":3.5,"TND":2.883,"TOP":2.289256,"TRY":13.7868,"TTD":6.814434,"TWD":27.732501,"TZS":2303.986,"UAH":27.132965,"UGX":3564.674186,"USD":1,"UYU":44.184976,"UZS":10808,"VES":4.6321,"VND":23000,"VUV":112.698305,"WST":2.587451,"XAF":581.147141,"XAG":0.04549284,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.147141,"XPD":0.00055327,"XPF":105.722328,"XPT":0.00106401,"YER":250.249937,"ZAR":15.998687,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Sasbon/Cloe',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-09T17:52:03.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-09T20:00:04.665Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-09T17:52:03.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-09T20:00:04.665Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2595.4 2000 100000
2595.4 1500 100000
2595.4 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315987';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315377';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-09 17:52:03.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Sasbon/Cloe',@number=N'JV-315987',@originalAmount=N'125.84000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'99.84000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'1747 DHL WSI Shipment',@source=3,@status=1,@date=N'2021-12-09T17:52:05.000Z',@extraData=N'{"id":315987,"transactionAmount":"99.84","transactionDateTime":"2021-12-09T17:52:03.000Z","completedAt":"2021-12-09T17:52:05.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"virtual","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"125.84","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1663,"firstName":"Sasbon ","lastName":"Cloe","role":"admin"},"merchant":{"id":6452,"name":"DHL WSI Shipment","address":"BONN, DE","description":"Courier Services Air and Ground, Freight Forwarders","website":null},"card":{"id":7989,"name":"","cardNumber":"1747"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.6731,"AFN":97.949997,"ALL":107.203941,"AMD":495.035922,"ANG":1.806155,"AOA":564,"ARS":101.53,"AUD":1.399747,"AWG":1.8,"AZN":1.700805,"BAM":1.731973,"BBD":2,"BDT":85.960328,"BGN":1.732531,"BHD":0.376993,"BIF":1996.930449,"BMD":1,"BND":1.368542,"BOB":6.909896,"BRL":5.5739,"BSD":1,"BTC":0.000020930367,"BTN":75.643747,"BWP":11.735045,"BYN":2.540359,"BZD":2.020013,"CAD":1.272175,"CDF":2005.236721,"CHF":0.924575,"CLF":0.03077,"CLP":849.05,"CNH":6.37874,"CNY":6.3776,"COP":3903.016799,"CRC":638.838622,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.53,"DJF":178.410461,"DKK":6.587478,"DOP":56.832408,"DZD":138.933752,"EGP":15.7104,"ERN":15.000155,"ETB":48.35,"EUR":0.885953,"FJD":2.125,"FKP":0.757137,"GBP":0.757137,"GEL":3.1,"GGP":0.757137,"GHS":6.188355,"GIP":0.757137,"GMD":52.45,"GNF":9521.594371,"GTQ":7.746734,"GYD":209.661313,"HKD":7.797025,"HNL":24.27,"HRK":6.6686,"HTG":100.087675,"HUF":323.69452,"IDR":14381.95,"ILS":3.10131,"IMP":0.757137,"INR":75.64256,"IQD":1462.150412,"IRR":42275,"ISK":130.57,"JEP":0.757137,"JMD":155.039235,"JOD":0.709,"JPY":113.4744,"KES":113.14,"KGS":84.798098,"KHR":4080.916379,"KMF":436.350068,"KPW":900,"KRW":1178.202178,"KWD":0.30287,"KYD":0.835156,"KZT":437.042541,"LAK":10985.663178,"LBP":1524.004399,"LKR":202.937515,"LRD":141.949996,"LSL":15.924374,"LYD":4.610317,"MAD":9.260128,"MDL":17.698384,"MGA":3979.853209,"MKD":54.56276,"MMK":1783.843614,"MNT":2858.209306,"MOP":8.047819,"MRO":356.999828,"MRU":36.32,"MUR":43.648861,"MVR":15.45,"MWK":818.717766,"MXN":20.98285,"MYR":4.2165,"MZN":63.850001,"NAD":15.96,"NGN":411.88,"NIO":35.307294,"NOK":9.005255,"NPR":121.029891,"NZD":1.473286,"OMR":0.385038,"PAB":1,"PEN":4.084392,"PGK":3.518951,"PHP":50.361004,"PKR":177.958756,"PLN":4.078387,"PYG":6846.275537,"QAR":3.641,"RON":4.3842,"RSD":104.139346,"RUB":73.7469,"RWF":1038.629208,"SAR":3.751312,"SBD":8.067802,"SCR":13.337,"SDG":437.5,"SEK":9.073142,"SGD":1.365395,"SHP":0.757137,"SLL":11132.50012,"SOS":579.766413,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.1,"SVC":8.768652,"SYP":2512.5,"SZL":15.924374,"THB":33.5865,"TJS":11.319371,"TMT":3.5,"TND":2.883,"TOP":2.289256,"TRY":13.7868,"TTD":6.814434,"TWD":27.732501,"TZS":2303.986,"UAH":27.132965,"UGX":3564.674186,"USD":1,"UYU":44.184976,"UZS":10808,"VES":4.6321,"VND":23000,"VUV":112.698305,"WST":2.587451,"XAF":581.147141,"XAG":0.04549284,"XAU":0.000563,"XCD":2.70255,"XDR":0.712183,"XOF":581.147141,"XPD":0.00055327,"XPF":105.722328,"XPT":0.00106401,"YER":250.249937,"ZAR":15.998687,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Sasbon/Cloe',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-09T17:52:03.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-09T20:30:03.785Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-09T17:52:03.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-09T20:30:03.785Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2595.4 2000 100000
2595.4 1500 100000
2595.4 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315987';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315377';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-09 17:52:03.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-315377'
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Sasbon/Cloe',@number=N'JV-315987',@originalAmount=N'125.84000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'99.84000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'1747 DHL WSI Shipment',@source=3,@status=1,@date=N'2021-12-09T17:52:05.000Z',@extraData=N'{"id":315987,"transactionAmount":"99.84","transactionDateTime":"2021-12-09T17:52:03.000Z","completedAt":"2021-12-09T17:52:05.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"virtual","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"125.84","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1663,"firstName":"Sasbon ","lastName":"Cloe","role":"admin"},"merchant":{"id":6452,"name":"DHL WSI Shipment","address":"BONN, DE","description":"Courier Services Air and Ground, Freight Forwarders","website":null},"card":{"id":7989,"name":"","cardNumber":"1747"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.6731,"AFN":97.949997,"ALL":107.203941,"AMD":495.035922,"ANG":1.806155,"AOA":564,"ARS":101.5314,"AUD":1.398568,"AWG":1.8,"AZN":1.700805,"BAM":1.731973,"BBD":2,"BDT":85.960328,"BGN":1.732375,"BHD":0.376966,"BIF":1996.930449,"BMD":1,"BND":1.368542,"BOB":6.909896,"BRL":5.5805,"BSD":1,"BTC":0.00002105721,"BTN":75.643747,"BWP":11.735045,"BYN":2.540359,"BZD":2.020013,"CAD":1.271483,"CDF":2005.236721,"CHF":0.923676,"CLF":0.030771,"CLP":849.06,"CNH":6.377297,"CNY":6.3776,"COP":3901.723938,"CRC":638.838622,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.508028,"DJF":178.410461,"DKK":6.583814,"DOP":56.832408,"DZD":138.960024,"EGP":15.707437,"ERN":15.000155,"ETB":48.35,"EUR":0.885394,"FJD":2.12995,"FKP":0.756425,"GBP":0.756425,"GEL":3.1,"GGP":0.756425,"GHS":6.188355,"GIP":0.756425,"GMD":52.45,"GNF":9521.594371,"GTQ":7.746734,"GYD":209.661313,"HKD":7.797111,"HNL":24.27,"HRK":6.6656,"HTG":100.087675,"HUF":323.434655,"IDR":14380.45,"ILS":3.10131,"IMP":0.756425,"INR":75.62655,"IQD":1462.150412,"IRR":42275,"ISK":130.51,"JEP":0.756425,"JMD":155.039235,"JOD":0.709,"JPY":113.45072,"KES":113.14,"KGS":84.798098,"KHR":4080.916379,"KMF":436.350068,"KPW":900,"KRW":1178.189604,"KWD":0.302848,"KYD":0.835156,"KZT":437.042541,"LAK":10985.663178,"LBP":1524.004399,"LKR":202.937515,"LRD":141.949996,"LSL":15.924374,"LYD":4.610317,"MAD":9.260128,"MDL":17.698384,"MGA":3979.853209,"MKD":54.56276,"MMK":1783.843614,"MNT":2858.209306,"MOP":8.047819,"MRO":356.999828,"MRU":36.32,"MUR":43.65,"MVR":15.45,"MWK":818.717766,"MXN":20.946595,"MYR":4.2165,"MZN":63.850001,"NAD":15.96,"NGN":411.88,"NIO":35.307294,"NOK":9.001822,"NPR":121.029891,"NZD":1.471652,"OMR":0.385015,"PAB":1,"PEN":4.084392,"PGK":3.518951,"PHP":50.342004,"PKR":177.958756,"PLN":4.074535,"PYG":6846.275537,"QAR":3.641,"RON":4.3819,"RSD":104.103836,"RUB":73.6542,"RWF":1038.629208,"SAR":3.751517,"SBD":8.067802,"SCR":13.337,"SDG":437.5,"SEK":9.061222,"SGD":1.364583,"SHP":0.756425,"SLL":11132.50012,"SOS":579.766413,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.1,"SVC":8.768652,"SYP":2512.5,"SZL":15.924374,"THB":33.6062,"TJS":11.319371,"TMT":3.5,"TND":2.883,"TOP":2.289256,"TRY":13.792749,"TTD":6.814434,"TWD":27.7315,"TZS":2303.986,"UAH":27.132965,"UGX":3564.674186,"USD":1,"UYU":44.184976,"UZS":10808,"VES":4.6321,"VND":23000,"VUV":112.698305,"WST":2.587451,"XAF":580.780421,"XAG":0.04552701,"XAU":0.00056325,"XCD":2.70255,"XDR":0.712183,"XOF":580.780421,"XPD":0.00055235,"XPF":105.655614,"XPT":0.00106497,"YER":250.249937,"ZAR":15.961599,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Sasbon/Cloe',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-09T17:52:03.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-09T21:00:03.845Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-09T17:52:03.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-09T21:00:03.845Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2595.4 2000 100000
2595.4 1500 100000
2595.4 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315987';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315377';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-09 17:52:03.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Sasbon/Cloe',@number=N'JV-315987',@originalAmount=N'125.84000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'99.84000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'1747 DHL WSI Shipment',@source=3,@status=1,@date=N'2021-12-09T17:52:05.000Z',@extraData=N'{"id":315987,"transactionAmount":"99.84","transactionDateTime":"2021-12-09T17:52:03.000Z","completedAt":"2021-12-09T17:52:05.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"virtual","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"125.84","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1663,"firstName":"Sasbon ","lastName":"Cloe","role":"admin"},"merchant":{"id":6452,"name":"DHL WSI Shipment","address":"BONN, DE","description":"Courier Services Air and Ground, Freight Forwarders","website":null},"card":{"id":7989,"name":"","cardNumber":"1747"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.6731,"AFN":97.949997,"ALL":107.203941,"AMD":495.035922,"ANG":1.806155,"AOA":564,"ARS":101.5314,"AUD":1.398568,"AWG":1.8,"AZN":1.700805,"BAM":1.731973,"BBD":2,"BDT":85.960328,"BGN":1.732375,"BHD":0.376966,"BIF":1996.930449,"BMD":1,"BND":1.368542,"BOB":6.909896,"BRL":5.5805,"BSD":1,"BTC":0.00002105721,"BTN":75.643747,"BWP":11.735045,"BYN":2.540359,"BZD":2.020013,"CAD":1.271483,"CDF":2005.236721,"CHF":0.923676,"CLF":0.030771,"CLP":849.06,"CNH":6.377297,"CNY":6.3776,"COP":3901.723938,"CRC":638.838622,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.508028,"DJF":178.410461,"DKK":6.583814,"DOP":56.832408,"DZD":138.960024,"EGP":15.707437,"ERN":15.000155,"ETB":48.35,"EUR":0.885394,"FJD":2.12995,"FKP":0.756425,"GBP":0.756425,"GEL":3.1,"GGP":0.756425,"GHS":6.188355,"GIP":0.756425,"GMD":52.45,"GNF":9521.594371,"GTQ":7.746734,"GYD":209.661313,"HKD":7.797111,"HNL":24.27,"HRK":6.6656,"HTG":100.087675,"HUF":323.434655,"IDR":14380.45,"ILS":3.10131,"IMP":0.756425,"INR":75.62655,"IQD":1462.150412,"IRR":42275,"ISK":130.51,"JEP":0.756425,"JMD":155.039235,"JOD":0.709,"JPY":113.45072,"KES":113.14,"KGS":84.798098,"KHR":4080.916379,"KMF":436.350068,"KPW":900,"KRW":1178.189604,"KWD":0.302848,"KYD":0.835156,"KZT":437.042541,"LAK":10985.663178,"LBP":1524.004399,"LKR":202.937515,"LRD":141.949996,"LSL":15.924374,"LYD":4.610317,"MAD":9.260128,"MDL":17.698384,"MGA":3979.853209,"MKD":54.56276,"MMK":1783.843614,"MNT":2858.209306,"MOP":8.047819,"MRO":356.999828,"MRU":36.32,"MUR":43.65,"MVR":15.45,"MWK":818.717766,"MXN":20.946595,"MYR":4.2165,"MZN":63.850001,"NAD":15.96,"NGN":411.88,"NIO":35.307294,"NOK":9.001822,"NPR":121.029891,"NZD":1.471652,"OMR":0.385015,"PAB":1,"PEN":4.084392,"PGK":3.518951,"PHP":50.342004,"PKR":177.958756,"PLN":4.074535,"PYG":6846.275537,"QAR":3.641,"RON":4.3819,"RSD":104.103836,"RUB":73.6542,"RWF":1038.629208,"SAR":3.751517,"SBD":8.067802,"SCR":13.337,"SDG":437.5,"SEK":9.061222,"SGD":1.364583,"SHP":0.756425,"SLL":11132.50012,"SOS":579.766413,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.1,"SVC":8.768652,"SYP":2512.5,"SZL":15.924374,"THB":33.6062,"TJS":11.319371,"TMT":3.5,"TND":2.883,"TOP":2.289256,"TRY":13.792749,"TTD":6.814434,"TWD":27.7315,"TZS":2303.986,"UAH":27.132965,"UGX":3564.674186,"USD":1,"UYU":44.184976,"UZS":10808,"VES":4.6321,"VND":23000,"VUV":112.698305,"WST":2.587451,"XAF":580.780421,"XAG":0.04552701,"XAU":0.00056325,"XCD":2.70255,"XDR":0.712183,"XOF":580.780421,"XPD":0.00055235,"XPF":105.655614,"XPT":0.00106497,"YER":250.249937,"ZAR":15.961599,"ZMW":17.211131,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Sasbon/Cloe',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-09T17:52:03.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-09T21:30:03.413Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-09T17:52:03.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-09T21:30:03.413Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2595.4 2000 100000
2595.4 1500 100000
2595.4 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315987';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315377';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-09 17:52:03.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-315377'
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Sasbon/Cloe',@number=N'JV-315987',@originalAmount=N'125.84000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'99.84000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'1747 DHL WSI Shipment',@source=3,@status=1,@date=N'2021-12-09T17:52:05.000Z',@extraData=N'{"id":315987,"transactionAmount":"99.84","transactionDateTime":"2021-12-09T17:52:03.000Z","completedAt":"2021-12-09T17:52:05.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"virtual","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"125.84","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1663,"firstName":"Sasbon ","lastName":"Cloe","role":"admin"},"merchant":{"id":6452,"name":"DHL WSI Shipment","address":"BONN, DE","description":"Courier Services Air and Ground, Freight Forwarders","website":null},"card":{"id":7989,"name":"","cardNumber":"1747"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673051,"AFN":97.949996,"ALL":107.148423,"AMD":495.815772,"ANG":1.806155,"AOA":568.677,"ARS":101.536699,"AUD":1.398788,"AWG":1.8,"AZN":1.700805,"BAM":1.731973,"BBD":2,"BDT":85.960328,"BGN":1.732204,"BHD":0.377024,"BIF":1996.944359,"BMD":1,"BND":1.368542,"BOB":6.909896,"BRL":5.572481,"BSD":1,"BTC":0.000020797872,"BTN":75.643747,"BWP":11.735045,"BYN":2.540359,"BZD":2.020013,"CAD":1.271372,"CDF":2004.118361,"CHF":0.923755,"CLF":0.030771,"CLP":845.962752,"CNH":6.37941,"CNY":6.3776,"COP":3902.402069,"CRC":639.840861,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.514181,"DJF":178.328369,"DKK":6.584497,"DOP":56.825926,"DZD":138.967246,"EGP":15.709274,"ERN":15.000155,"ETB":48.463289,"EUR":0.885512,"FJD":2.12995,"FKP":0.756442,"GBP":0.756442,"GEL":3.1,"GGP":0.756442,"GHS":6.180684,"GIP":0.756442,"GMD":52.45,"GNF":9487.275497,"GTQ":7.746734,"GYD":209.661313,"HKD":7.797053,"HNL":24.25283,"HRK":6.6677,"HTG":100.087675,"HUF":323.418412,"IDR":14352.75,"ILS":3.101293,"IMP":0.756442,"INR":75.60528,"IQD":1461.228615,"IRR":42275,"ISK":130.53,"JEP":0.756442,"JMD":155.039235,"JOD":0.709,"JPY":113.47266242,"KES":113.142378,"KGS":84.798098,"KHR":4078.733103,"KMF":436.350068,"KPW":900,"KRW":1178.246075,"KWD":0.302864,"KYD":0.835156,"KZT":437.042541,"LAK":10982.530542,"LBP":1525.503519,"LKR":202.937515,"LRD":141.949996,"LSL":15.942187,"LYD":4.608253,"MAD":9.254572,"MDL":17.666302,"MGA":3977.882567,"MKD":54.562757,"MMK":1783.843614,"MNT":2858.209306,"MOP":8.047819,"MRO":356.999828,"MRU":36.32,"MUR":43.650673,"MVR":15.45,"MWK":814.973486,"MXN":20.9531,"MYR":4.2165,"MZN":63.842,"NAD":15.96,"NGN":411.882333,"NIO":35.263014,"NOK":8.996109,"NPR":121.029891,"NZD":1.471483,"OMR":0.385038,"PAB":1,"PEN":4.082703,"PGK":3.521161,"PHP":50.344705,"PKR":177.958756,"PLN":4.075781,"PYG":6846.275537,"QAR":3.641,"RON":4.383184,"RSD":104.195566,"RUB":73.656228,"RWF":1023.848415,"SAR":3.751416,"SBD":8.067802,"SCR":13.120101,"SDG":437.5,"SEK":9.062333,"SGD":1.364826,"SHP":0.756442,"SLL":11132.50012,"SOS":582.076122,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.1,"SVC":8.768652,"SYP":2512.5,"SZL":15.933499,"THB":33.589127,"TJS":11.319371,"TMT":3.5,"TND":2.883,"TOP":2.281938,"TRY":13.784463,"TTD":6.814434,"TWD":27.737167,"TZS":2304.972,"UAH":27.132965,"UGX":3564.674186,"USD":1,"UYU":44.184976,"UZS":10817.803892,"VES":4.6321,"VND":22991.00303,"VUV":112.698305,"WST":2.587451,"XAF":580.857484,"XAG":0.04554238,"XAU":0.00056333,"XCD":2.70255,"XDR":0.712183,"XOF":580.857484,"XPD":0.00055125,"XPF":105.669633,"XPT":0.00106521,"YER":250.249937,"ZAR":15.954025,"ZMW":16.051172,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Sasbon/Cloe',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-09T17:52:03.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-09T22:00:04.647Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-09T17:52:03.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-09T22:00:04.647Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2595.4 2000 100000
2595.4 1500 100000
2595.4 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315987';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315377';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-09 17:52:03.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Sasbon/Cloe',@number=N'JV-315987',@originalAmount=N'125.84000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'99.84000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'1747 DHL WSI Shipment',@source=3,@status=1,@date=N'2021-12-09T17:52:05.000Z',@extraData=N'{"id":315987,"transactionAmount":"99.84","transactionDateTime":"2021-12-09T17:52:03.000Z","completedAt":"2021-12-09T17:52:05.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"virtual","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"125.84","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1663,"firstName":"Sasbon ","lastName":"Cloe","role":"admin"},"merchant":{"id":6452,"name":"DHL WSI Shipment","address":"BONN, DE","description":"Courier Services Air and Ground, Freight Forwarders","website":null},"card":{"id":7989,"name":"","cardNumber":"1747"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673051,"AFN":97.949996,"ALL":107.148423,"AMD":495.815772,"ANG":1.806155,"AOA":568.677,"ARS":101.536699,"AUD":1.398788,"AWG":1.8,"AZN":1.700805,"BAM":1.731973,"BBD":2,"BDT":85.960328,"BGN":1.732204,"BHD":0.377024,"BIF":1996.944359,"BMD":1,"BND":1.368542,"BOB":6.909896,"BRL":5.572481,"BSD":1,"BTC":0.000020797872,"BTN":75.643747,"BWP":11.735045,"BYN":2.540359,"BZD":2.020013,"CAD":1.271372,"CDF":2004.118361,"CHF":0.923755,"CLF":0.030771,"CLP":845.962752,"CNH":6.37941,"CNY":6.3776,"COP":3902.402069,"CRC":639.840861,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.514181,"DJF":178.328369,"DKK":6.584497,"DOP":56.825926,"DZD":138.967246,"EGP":15.709274,"ERN":15.000155,"ETB":48.463289,"EUR":0.885512,"FJD":2.12995,"FKP":0.756442,"GBP":0.756442,"GEL":3.1,"GGP":0.756442,"GHS":6.180684,"GIP":0.756442,"GMD":52.45,"GNF":9487.275497,"GTQ":7.746734,"GYD":209.661313,"HKD":7.797053,"HNL":24.25283,"HRK":6.6677,"HTG":100.087675,"HUF":323.418412,"IDR":14352.75,"ILS":3.101293,"IMP":0.756442,"INR":75.60528,"IQD":1461.228615,"IRR":42275,"ISK":130.53,"JEP":0.756442,"JMD":155.039235,"JOD":0.709,"JPY":113.47266242,"KES":113.142378,"KGS":84.798098,"KHR":4078.733103,"KMF":436.350068,"KPW":900,"KRW":1178.246075,"KWD":0.302864,"KYD":0.835156,"KZT":437.042541,"LAK":10982.530542,"LBP":1525.503519,"LKR":202.937515,"LRD":141.949996,"LSL":15.942187,"LYD":4.608253,"MAD":9.254572,"MDL":17.666302,"MGA":3977.882567,"MKD":54.562757,"MMK":1783.843614,"MNT":2858.209306,"MOP":8.047819,"MRO":356.999828,"MRU":36.32,"MUR":43.650673,"MVR":15.45,"MWK":814.973486,"MXN":20.9531,"MYR":4.2165,"MZN":63.842,"NAD":15.96,"NGN":411.882333,"NIO":35.263014,"NOK":8.996109,"NPR":121.029891,"NZD":1.471483,"OMR":0.385038,"PAB":1,"PEN":4.082703,"PGK":3.521161,"PHP":50.344705,"PKR":177.958756,"PLN":4.075781,"PYG":6846.275537,"QAR":3.641,"RON":4.383184,"RSD":104.195566,"RUB":73.656228,"RWF":1023.848415,"SAR":3.751416,"SBD":8.067802,"SCR":13.120101,"SDG":437.5,"SEK":9.062333,"SGD":1.364826,"SHP":0.756442,"SLL":11132.50012,"SOS":582.076122,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.1,"SVC":8.768652,"SYP":2512.5,"SZL":15.933499,"THB":33.589127,"TJS":11.319371,"TMT":3.5,"TND":2.883,"TOP":2.281938,"TRY":13.784463,"TTD":6.814434,"TWD":27.737167,"TZS":2304.972,"UAH":27.132965,"UGX":3564.674186,"USD":1,"UYU":44.184976,"UZS":10817.803892,"VES":4.6321,"VND":22991.00303,"VUV":112.698305,"WST":2.587451,"XAF":580.857484,"XAG":0.04554238,"XAU":0.00056333,"XCD":2.70255,"XDR":0.712183,"XOF":580.857484,"XPD":0.00055125,"XPF":105.669633,"XPT":0.00106521,"YER":250.249937,"ZAR":15.954025,"ZMW":16.051172,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Sasbon/Cloe',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-09T17:52:03.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-09T22:30:03.122Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-09T17:52:03.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-09T22:30:03.122Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2595.4 2000 100000
2595.4 1500 100000
2595.4 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315987';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315377';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-09 17:52:03.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-315377'
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Sasbon/Cloe',@number=N'JV-315987',@originalAmount=N'125.84000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'99.84000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'1747 DHL WSI Shipment',@source=3,@status=1,@date=N'2021-12-09T17:52:05.000Z',@extraData=N'{"id":315987,"transactionAmount":"99.84","transactionDateTime":"2021-12-09T17:52:03.000Z","completedAt":"2021-12-09T17:52:05.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"virtual","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"125.84","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1663,"firstName":"Sasbon ","lastName":"Cloe","role":"admin"},"merchant":{"id":6452,"name":"DHL WSI Shipment","address":"BONN, DE","description":"Courier Services Air and Ground, Freight Forwarders","website":null},"card":{"id":7989,"name":"","cardNumber":"1747"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673051,"AFN":97.949996,"ALL":107.148423,"AMD":495.815772,"ANG":1.806155,"AOA":568.677,"ARS":101.5449,"AUD":1.399849,"AWG":1.8,"AZN":1.700805,"BAM":1.731973,"BBD":2,"BDT":85.960328,"BGN":1.7322,"BHD":0.376998,"BIF":1996.944359,"BMD":1,"BND":1.368542,"BOB":6.909896,"BRL":5.5733,"BSD":1,"BTC":0.000020851571,"BTN":75.643747,"BWP":11.735045,"BYN":2.540359,"BZD":2.020013,"CAD":1.270905,"CDF":2004.118361,"CHF":0.924079,"CLF":0.030771,"CLP":845.962752,"CNH":6.378165,"CNY":6.3776,"COP":3902.180754,"CRC":639.840861,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.51165,"DJF":178.328369,"DKK":6.584244,"DOP":56.825926,"DZD":139.184,"EGP":15.7124,"ERN":15.000155,"ETB":48.463289,"EUR":0.885462,"FJD":2.12995,"FKP":0.75638,"GBP":0.75638,"GEL":3.1,"GGP":0.75638,"GHS":6.180684,"GIP":0.75638,"GMD":52.45,"GNF":9487.275497,"GTQ":7.746734,"GYD":209.661313,"HKD":7.797158,"HNL":24.25283,"HRK":6.6665,"HTG":100.087675,"HUF":323.677935,"IDR":14352.75,"ILS":3.10131,"IMP":0.75638,"INR":75.6081,"IQD":1461.228615,"IRR":42275,"ISK":130.53,"JEP":0.75638,"JMD":155.039235,"JOD":0.709,"JPY":113.46941304,"KES":113.142378,"KGS":84.798098,"KHR":4078.733103,"KMF":436.350068,"KPW":900,"KRW":1178.675209,"KWD":0.30282,"KYD":0.835156,"KZT":437.042541,"LAK":10982.530542,"LBP":1525.503519,"LKR":202.937515,"LRD":141.949996,"LSL":15.942187,"LYD":4.608253,"MAD":9.254572,"MDL":17.666302,"MGA":3977.882567,"MKD":54.562757,"MMK":1783.843614,"MNT":2858.209306,"MOP":8.047819,"MRO":356.999828,"MRU":36.32,"MUR":43.649998,"MVR":15.45,"MWK":814.973486,"MXN":20.965873,"MYR":4.2165,"MZN":63.842,"NAD":15.96,"NGN":411.882333,"NIO":35.263014,"NOK":9.005233,"NPR":121.029891,"NZD":1.472348,"OMR":0.385028,"PAB":1,"PEN":4.082703,"PGK":3.521161,"PHP":50.467601,"PKR":177.958756,"PLN":4.079086,"PYG":6846.275537,"QAR":3.641,"RON":4.3816,"RSD":104.112205,"RUB":73.6695,"RWF":1023.848415,"SAR":3.75103,"SBD":8.067802,"SCR":13.120101,"SDG":437.5,"SEK":9.064637,"SGD":1.364964,"SHP":0.75638,"SLL":11132.50012,"SOS":582.076122,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.1,"SVC":8.768652,"SYP":2512.5,"SZL":15.933499,"THB":33.595,"TJS":11.319371,"TMT":3.5,"TND":2.883,"TOP":2.281938,"TRY":13.786775,"TTD":6.814434,"TWD":27.699802,"TZS":2304.972,"UAH":27.132965,"UGX":3564.674186,"USD":1,"UYU":44.184976,"UZS":10817.803892,"VES":4.6321,"VND":22988.510607,"VUV":112.698305,"WST":2.587451,"XAF":580.825291,"XAG":0.04555817,"XAU":0.00056331,"XCD":2.70255,"XDR":0.712183,"XOF":580.825291,"XPD":0.00055113,"XPF":105.663777,"XPT":0.00106425,"YER":250.249937,"ZAR":15.949984,"ZMW":16.051172,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Sasbon/Cloe',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-09T17:52:03.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-09T23:00:04.087Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-09T17:52:03.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-09T23:00:04.087Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2595.4 2000 100000
2595.4 1500 100000
2595.4 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315987';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315377';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-09 17:52:03.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Sasbon/Cloe',@number=N'JV-315987',@originalAmount=N'125.84000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'99.84000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'1747 DHL WSI Shipment',@source=3,@status=1,@date=N'2021-12-09T17:52:05.000Z',@extraData=N'{"id":315987,"transactionAmount":"99.84","transactionDateTime":"2021-12-09T17:52:03.000Z","completedAt":"2021-12-09T17:52:05.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"virtual","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"125.84","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1663,"firstName":"Sasbon ","lastName":"Cloe","role":"admin"},"merchant":{"id":6452,"name":"DHL WSI Shipment","address":"BONN, DE","description":"Courier Services Air and Ground, Freight Forwarders","website":null},"card":{"id":7989,"name":"","cardNumber":"1747"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.673051,"AFN":97.949996,"ALL":107.148423,"AMD":495.815772,"ANG":1.806155,"AOA":568.677,"ARS":101.5449,"AUD":1.399849,"AWG":1.8,"AZN":1.700805,"BAM":1.731973,"BBD":2,"BDT":85.960328,"BGN":1.7322,"BHD":0.376998,"BIF":1996.944359,"BMD":1,"BND":1.368542,"BOB":6.909896,"BRL":5.5733,"BSD":1,"BTC":0.000020851571,"BTN":75.643747,"BWP":11.735045,"BYN":2.540359,"BZD":2.020013,"CAD":1.270905,"CDF":2004.118361,"CHF":0.924079,"CLF":0.030771,"CLP":845.962752,"CNH":6.378165,"CNY":6.3776,"COP":3902.180754,"CRC":639.840861,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.51165,"DJF":178.328369,"DKK":6.584244,"DOP":56.825926,"DZD":139.184,"EGP":15.7124,"ERN":15.000155,"ETB":48.463289,"EUR":0.885462,"FJD":2.12995,"FKP":0.75638,"GBP":0.75638,"GEL":3.1,"GGP":0.75638,"GHS":6.180684,"GIP":0.75638,"GMD":52.45,"GNF":9487.275497,"GTQ":7.746734,"GYD":209.661313,"HKD":7.797158,"HNL":24.25283,"HRK":6.6665,"HTG":100.087675,"HUF":323.677935,"IDR":14352.75,"ILS":3.10131,"IMP":0.75638,"INR":75.6081,"IQD":1461.228615,"IRR":42275,"ISK":130.53,"JEP":0.75638,"JMD":155.039235,"JOD":0.709,"JPY":113.46941304,"KES":113.142378,"KGS":84.798098,"KHR":4078.733103,"KMF":436.350068,"KPW":900,"KRW":1178.675209,"KWD":0.30282,"KYD":0.835156,"KZT":437.042541,"LAK":10982.530542,"LBP":1525.503519,"LKR":202.937515,"LRD":141.949996,"LSL":15.942187,"LYD":4.608253,"MAD":9.254572,"MDL":17.666302,"MGA":3977.882567,"MKD":54.562757,"MMK":1783.843614,"MNT":2858.209306,"MOP":8.047819,"MRO":356.999828,"MRU":36.32,"MUR":43.649998,"MVR":15.45,"MWK":814.973486,"MXN":20.965873,"MYR":4.2165,"MZN":63.842,"NAD":15.96,"NGN":411.882333,"NIO":35.263014,"NOK":9.005233,"NPR":121.029891,"NZD":1.472348,"OMR":0.385028,"PAB":1,"PEN":4.082703,"PGK":3.521161,"PHP":50.467601,"PKR":177.958756,"PLN":4.079086,"PYG":6846.275537,"QAR":3.641,"RON":4.3816,"RSD":104.112205,"RUB":73.6695,"RWF":1023.848415,"SAR":3.75103,"SBD":8.067802,"SCR":13.120101,"SDG":437.5,"SEK":9.064637,"SGD":1.364964,"SHP":0.75638,"SLL":11132.50012,"SOS":582.076122,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.1,"SVC":8.768652,"SYP":2512.5,"SZL":15.933499,"THB":33.595,"TJS":11.319371,"TMT":3.5,"TND":2.883,"TOP":2.281938,"TRY":13.786775,"TTD":6.814434,"TWD":27.699802,"TZS":2304.972,"UAH":27.132965,"UGX":3564.674186,"USD":1,"UYU":44.184976,"UZS":10817.803892,"VES":4.6321,"VND":22988.510607,"VUV":112.698305,"WST":2.587451,"XAF":580.825291,"XAG":0.04555817,"XAU":0.00056331,"XCD":2.70255,"XDR":0.712183,"XOF":580.825291,"XPD":0.00055113,"XPF":105.663777,"XPT":0.00106425,"YER":250.249937,"ZAR":15.949984,"ZMW":16.051172,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Sasbon/Cloe',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-09T17:52:03.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-09T23:30:03.876Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-09T17:52:03.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-09T23:30:03.876Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2595.4 2000 100000
2595.4 1500 100000
2595.4 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315987';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315377';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-09 17:52:03.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-315377'
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Sasbon/Cloe',@number=N'JV-315987',@originalAmount=N'125.84000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'99.84000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'1747 DHL WSI Shipment',@source=3,@status=1,@date=N'2021-12-09T17:52:05.000Z',@extraData=N'{"id":315987,"transactionAmount":"99.84","transactionDateTime":"2021-12-09T17:52:03.000Z","completedAt":"2021-12-09T17:52:05.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"virtual","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"125.84","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1663,"firstName":"Sasbon ","lastName":"Cloe","role":"admin"},"merchant":{"id":6452,"name":"DHL WSI Shipment","address":"BONN, DE","description":"Courier Services Air and Ground, Freight Forwarders","website":null},"card":{"id":7989,"name":"","cardNumber":"1747"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.6731,"AFN":97.949996,"ALL":107.165934,"AMD":495.716802,"ANG":1.805515,"AOA":568.677,"ARS":101.5506,"AUD":1.3996,"AWG":1.8,"AZN":1.700805,"BAM":1.731666,"BBD":2,"BDT":85.945091,"BGN":1.73193,"BHD":0.376964,"BIF":1996.57423,"BMD":1,"BND":1.3683,"BOB":6.908672,"BRL":5.5732,"BSD":1,"BTC":0.000020891788,"BTN":75.630343,"BWP":11.73089,"BYN":2.539909,"BZD":2.019298,"CAD":1.270661,"CDF":2004.533655,"CHF":0.923753,"CLF":0.030771,"CLP":845.962752,"CNH":6.377652,"CNY":6.3776,"COP":3902.180754,"CRC":639.614011,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.506689,"DJF":178.347227,"DKK":6.5841,"DOP":56.81229,"DZD":138.91,"EGP":15.7089,"ERN":15.000155,"ETB":48.749351,"EUR":0.885452,"FJD":2.12995,"FKP":0.756185,"GBP":0.756185,"GEL":3.1,"GGP":0.756185,"GHS":6.187259,"GIP":0.756185,"GMD":52.45,"GNF":9517.432244,"GTQ":7.745191,"GYD":209.624115,"HKD":7.79715,"HNL":24.213694,"HRK":6.6665,"HTG":100.069926,"HUF":323.45,"IDR":14352.75,"ILS":3.10131,"IMP":0.756185,"INR":75.599141,"IQD":1461.895613,"IRR":42275,"ISK":130.52,"JEP":0.756185,"JMD":154.984274,"JOD":0.709,"JPY":113.4415,"KES":113.12,"KGS":84.798098,"KHR":4079.314245,"KMF":436.350068,"KPW":900,"KRW":1178.329518,"KWD":0.302793,"KYD":0.835008,"KZT":436.964692,"LAK":10983.75315,"LBP":1515.163511,"LKR":202.901539,"LRD":141.949996,"LSL":15.921554,"LYD":4.608684,"MAD":9.258489,"MDL":17.69525,"MGA":3978.436001,"MKD":54.553097,"MMK":1783.209681,"MNT":2858.209306,"MOP":8.046394,"MRO":356.999828,"MRU":36.32,"MUR":43.649998,"MVR":15.45,"MWK":818.430062,"MXN":20.95455,"MYR":4.2165,"MZN":63.842,"NAD":15.96,"NGN":411.81,"NIO":35.29323,"NOK":8.99662,"NPR":120.987051,"NZD":1.471454,"OMR":0.384967,"PAB":1,"PEN":4.083669,"PGK":3.51755,"PHP":50.467502,"PKR":177.895674,"PLN":4.078527,"PYG":6843.778537,"QAR":3.641,"RON":4.3813,"RSD":104.154408,"RUB":73.6904,"RWF":1038.258445,"SAR":3.751166,"SBD":8.067802,"SCR":13.154796,"SDG":437.5,"SEK":9.064992,"SGD":1.3649,"SHP":0.756185,"SLL":11132.50012,"SOS":579.559315,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.1,"SVC":8.767099,"SYP":2512.5,"SZL":15.918736,"THB":33.579998,"TJS":11.317367,"TMT":3.5,"TND":2.883,"TOP":2.281938,"TRY":13.7787,"TTD":6.813228,"TWD":27.695701,"TZS":2300,"UAH":27.123356,"UGX":3564.040904,"USD":1,"UYU":44.184976,"UZS":10817.1411,"VES":4.6321,"VND":22988.510607,"VUV":112.698305,"WST":2.587451,"XAF":580.818346,"XAG":0.04549599,"XAU":0.00056298,"XCD":2.70255,"XDR":0.712183,"XOF":580.818346,"XPD":0.00055338,"XPF":105.662513,"XPT":0.00106384,"YER":250.249937,"ZAR":15.950405,"ZMW":16.053911,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Sasbon/Cloe',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-09T17:52:03.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:00:04.474Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-09T17:52:03.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:00:04.474Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2505.41 2000 100000
2505.41 1500 100000
2505.41 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315987';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '317537';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."transactionNumber" = '315377';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-09 17:52:03.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): INSERT INTO "ExternalEntityMovements" ("id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "id","externalEntityCode","transactionNumber","transactionDateTime","accountReferenceNumber","originalCurrency","originalCurrencyAmount","TargetCurrency","TargetCurrencyAmount","OriginalToTargetExchangeRate","Description","Status","ConfirmedDateTime","ProcessedDateTime","ErrorMessage","FullData","createdAt","updatedAt";
Executing (default): UPDATE "ExternalEntities" SET "lastTransactionDate"=$1,"updatedAt"=$2 WHERE "code" = $3
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): DECLARE @return_value int EXEC @return_value = [dbo].[ExternalTransaction] @masterAccountCode=N'Jeeves',@masterAccountKey=N'3',@accountReferenceNumber=N'Sasbon/Cloe',@number=N'JV-315987',@originalAmount=N'125.84000000',@originalCurrencyCode=N'CAD',@convertedAmount=N'99.84000000',@convertedRate=NULL,@convertedCurrencyCode=N'USD',@description=N'1747 DHL WSI Shipment',@source=3,@status=1,@date=N'2021-12-09T17:52:05.000Z',@extraData=N'{"id":315987,"transactionAmount":"99.84","transactionDateTime":"2021-12-09T17:52:03.000Z","completedAt":"2021-12-09T17:52:05.000Z","transactionStatus":"completed","transactionType":"debit","cardType":"virtual","paymentType":"cards","description":null,"currency":840,"localCurrency":124,"localCurrencyAmount":"125.84","memo":null,"authStatus":"rdf_settled","cardServiceType":"stripeUS","beneficiaryId":0,"subPaymentType":"none","stpTransactionId":null,"currencyAlphaCode":"USD","user":{"id":1663,"firstName":"Sasbon ","lastName":"Cloe","role":"admin"},"merchant":{"id":6452,"name":"DHL WSI Shipment","address":"BONN, DE","description":"Courier Services Air and Ground, Freight Forwarders","website":null},"card":{"id":7989,"name":"","cardNumber":"1747"},"localCurrencyLookup":{"numericCode":124,"alphaCode":"CAD"},"transBillPayBiller":null,"transaction_scheduling":null,"beneficiary":null,"parentTransaction":null,"transactionReceipts":[],"rates":{"AED":3.6731,"AFN":97.949996,"ALL":107.165934,"AMD":495.716802,"ANG":1.805515,"AOA":568.677,"ARS":101.5506,"AUD":1.3996,"AWG":1.8,"AZN":1.700805,"BAM":1.731666,"BBD":2,"BDT":85.945091,"BGN":1.73193,"BHD":0.376964,"BIF":1996.57423,"BMD":1,"BND":1.3683,"BOB":6.908672,"BRL":5.5732,"BSD":1,"BTC":0.000020891788,"BTN":75.630343,"BWP":11.73089,"BYN":2.539909,"BZD":2.019298,"CAD":1.270661,"CDF":2004.533655,"CHF":0.923753,"CLF":0.030771,"CLP":845.962752,"CNH":6.377652,"CNY":6.3776,"COP":3902.180754,"CRC":639.614011,"CUC":1,"CUP":25.75,"CVE":98.2,"CZK":22.506689,"DJF":178.347227,"DKK":6.5841,"DOP":56.81229,"DZD":138.91,"EGP":15.7089,"ERN":15.000155,"ETB":48.749351,"EUR":0.885452,"FJD":2.12995,"FKP":0.756185,"GBP":0.756185,"GEL":3.1,"GGP":0.756185,"GHS":6.187259,"GIP":0.756185,"GMD":52.45,"GNF":9517.432244,"GTQ":7.745191,"GYD":209.624115,"HKD":7.79715,"HNL":24.213694,"HRK":6.6665,"HTG":100.069926,"HUF":323.45,"IDR":14352.75,"ILS":3.10131,"IMP":0.756185,"INR":75.599141,"IQD":1461.895613,"IRR":42275,"ISK":130.52,"JEP":0.756185,"JMD":154.984274,"JOD":0.709,"JPY":113.4415,"KES":113.12,"KGS":84.798098,"KHR":4079.314245,"KMF":436.350068,"KPW":900,"KRW":1178.329518,"KWD":0.302793,"KYD":0.835008,"KZT":436.964692,"LAK":10983.75315,"LBP":1515.163511,"LKR":202.901539,"LRD":141.949996,"LSL":15.921554,"LYD":4.608684,"MAD":9.258489,"MDL":17.69525,"MGA":3978.436001,"MKD":54.553097,"MMK":1783.209681,"MNT":2858.209306,"MOP":8.046394,"MRO":356.999828,"MRU":36.32,"MUR":43.649998,"MVR":15.45,"MWK":818.430062,"MXN":20.95455,"MYR":4.2165,"MZN":63.842,"NAD":15.96,"NGN":411.81,"NIO":35.29323,"NOK":8.99662,"NPR":120.987051,"NZD":1.471454,"OMR":0.384967,"PAB":1,"PEN":4.083669,"PGK":3.51755,"PHP":50.467502,"PKR":177.895674,"PLN":4.078527,"PYG":6843.778537,"QAR":3.641,"RON":4.3813,"RSD":104.154408,"RUB":73.6904,"RWF":1038.258445,"SAR":3.751166,"SBD":8.067802,"SCR":13.154796,"SDG":437.5,"SEK":9.064992,"SGD":1.3649,"SHP":0.756185,"SLL":11132.50012,"SOS":579.559315,"SRD":21.545,"SSP":130.26,"STD":21297.740504,"STN":22.1,"SVC":8.767099,"SYP":2512.5,"SZL":15.918736,"THB":33.579998,"TJS":11.317367,"TMT":3.5,"TND":2.883,"TOP":2.281938,"TRY":13.7787,"TTD":6.813228,"TWD":27.695701,"TZS":2300,"UAH":27.123356,"UGX":3564.040904,"USD":1,"UYU":44.184976,"UZS":10817.1411,"VES":4.6321,"VND":22988.510607,"VUV":112.698305,"WST":2.587451,"XAF":580.818346,"XAG":0.04549599,"XAU":0.00056298,"XCD":2.70255,"XDR":0.712183,"XOF":580.818346,"XPD":0.00055338,"XPF":105.662513,"XPT":0.00106384,"YER":250.249937,"ZAR":15.950405,"ZMW":16.053911,"ZWL":322}}' SELECT 'Return Value' = @return_value
Executing (default): UPDATE "ExternalEntityMovements" SET "Status"=$1,"updatedAt"=$2 WHERE "id" = $3
{ response: 2,
  reference: 'Sasbon/Cloe',
  originalCurrency: 'CAD',
  targetCurrency: 'USD' }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2400.79 2000 100000
2400.79 1500 100000
2400.79 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-10 00:13:29.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-317537'
Executing (default): DELETE FROM "ExternalEntityMovements" WHERE "transactionNumber" = 'JV-315377'
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2400.79 2000 100000
2400.79 1500 100000
2400.79 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-10 00:13:29.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2400.79 2000 100000
2400.79 1500 100000
2400.79 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-10 00:13:29.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2400.79 2000 100000
2400.79 1500 100000
2400.79 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-10 00:13:29.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2400.79 2000 100000
2400.79 1500 100000
2400.79 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-10 00:13:29.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2400.79 2000 100000
2400.79 1500 100000
2400.79 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-10 00:13:29.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2400.79 2000 100000
2400.79 1500 100000
2400.79 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-10 00:13:29.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2400.79 2000 100000
2400.79 1500 100000
2400.79 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-10 00:13:29.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2400.79 2000 100000
2400.79 1500 100000
2400.79 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-10 00:13:29.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2400.79 2000 100000
2400.79 1500 100000
2400.79 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-10 00:13:29.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2400.79 2000 100000
2400.79 1500 100000
2400.79 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-10 00:13:29.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2400.79 2000 100000
2400.79 1500 100000
2400.79 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-10 00:13:29.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2400.79 2000 100000
2400.79 1500 100000
2400.79 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-10 00:13:29.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2400.79 2000 100000
2400.79 1500 100000
2400.79 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-10 00:13:29.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2400.79 2000 100000
2400.79 1500 100000
2400.79 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-10 00:13:29.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2400.79 2000 100000
2400.79 1500 100000
2400.79 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-10 00:13:29.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2400.79 2000 100000
2400.79 1500 100000
2400.79 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-10 00:13:29.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2400.79 2000 100000
2400.79 1500 100000
2400.79 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-10 00:13:29.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2400.79 2000 100000
2400.79 1500 100000
2400.79 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-10 00:13:29.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2400.79 2000 100000
2400.79 1500 100000
2400.79 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-10 00:13:29.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2400.79 2000 100000
2400.79 1500 100000
2400.79 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-10 00:13:29.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2400.79 2000 100000
2400.79 1500 100000
2400.79 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-10 00:13:29.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
entity:  ExternalEntity {
  dataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _previousDataValues:
   { code: 'Jeeves',
     masterAccountCode: 'string',
     userName: 'ari',
     source: 3,
     extraData: { previousLimit: 100000 },
     lastTransactionDate: 2021-12-10T00:13:29.000Z,
     createdAt: 2021-12-09T17:53:11.591Z,
     updatedAt: 2021-12-10T00:30:03.333Z },
  _changed: Set {},
  _options:
   { isNewRecord: false,
     _schema: null,
     _schemaDelimiter: '',
     raw: true,
     attributes:
      [ 'code',
        'masterAccountCode',
        'userName',
        'source',
        'extraData',
        'lastTransactionDate',
        'createdAt',
        'updatedAt' ] },
  isNewRecord: false }
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
2400.79 2000 100000
2400.79 1500 100000
2400.79 1000 100000
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE "ExternalEntityMovement"."externalEntityCode" = 'Jeeves' AND "ExternalEntityMovement"."transactionDateTime" <= '2021-12-10 00:13:29.000 +00:00' AND "ExternalEntityMovement"."Status" = 'Pendiente';
Executing (default): SELECT "id", "externalEntityCode", "transactionNumber", "transactionDateTime", "accountReferenceNumber", "originalCurrency", "originalCurrencyAmount", "TargetCurrency", "TargetCurrencyAmount", "OriginalToTargetExchangeRate", "Description", "Status", "ConfirmedDateTime", "ProcessedDateTime", "ErrorMessage", "FullData", "createdAt", "updatedAt" FROM "ExternalEntityMovements" AS "ExternalEntityMovement" WHERE ("ExternalEntityMovement"."Status" = 'Confirmada' OR "ExternalEntityMovement"."Status" = 'Error') AND "ExternalEntityMovement"."externalEntityCode" = 'Jeeves';
Executing (default): SELECT "code", "masterAccountCode", "userName", "source", "extraData", "lastTransactionDate", "createdAt", "updatedAt" FROM "ExternalEntities" AS "ExternalEntity" WHERE "ExternalEntity"."code" = 'Jeeves';
